(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))o(f);new MutationObserver(f=>{for(const m of f)if(m.type==="childList")for(const x of m.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&o(x)}).observe(document,{childList:!0,subtree:!0});function c(f){const m={};return f.integrity&&(m.integrity=f.integrity),f.referrerPolicy&&(m.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?m.credentials="include":f.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(f){if(f.ep)return;f.ep=!0;const m=c(f);fetch(f.href,m)}})();function Eh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ko={exports:{}},nn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh;function a0(){if(sh)return nn;sh=1;var r=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function c(o,f,m){var x=null;if(m!==void 0&&(x=""+m),f.key!==void 0&&(x=""+f.key),"key"in f){m={};for(var S in f)S!=="key"&&(m[S]=f[S])}else m=f;return f=m.ref,{$$typeof:r,type:o,key:x,ref:f!==void 0?f:null,props:m}}return nn.Fragment=u,nn.jsx=c,nn.jsxs=c,nn}var lh;function s0(){return lh||(lh=1,Ko.exports=a0()),Ko.exports}var l=s0(),Wo={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh;function l0(){if(nh)return Se;nh=1;var r=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),q=Symbol.iterator;function _(v){return v===null||typeof v!="object"?null:(v=q&&v[q]||v["@@iterator"],typeof v=="function"?v:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,T={};function z(v,O,Q){this.props=v,this.context=O,this.refs=T,this.updater=Q||C}z.prototype.isReactComponent={},z.prototype.setState=function(v,O){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,O,"setState")},z.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function P(){}P.prototype=z.prototype;function H(v,O,Q){this.props=v,this.context=O,this.refs=T,this.updater=Q||C}var J=H.prototype=new P;J.constructor=H,p(J,z.prototype),J.isPureReactComponent=!0;var ee=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},le=Object.prototype.hasOwnProperty;function B(v,O,Q,I,ne,ve){return Q=ve.ref,{$$typeof:r,type:v,key:O,ref:Q!==void 0?Q:null,props:ve}}function Z(v,O){return B(v.type,O,void 0,void 0,void 0,v.props)}function W(v){return typeof v=="object"&&v!==null&&v.$$typeof===r}function oe(v){var O={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(Q){return O[Q]})}var de=/\/+/g;function se(v,O){return typeof v=="object"&&v!==null&&v.key!=null?oe(""+v.key):O.toString(36)}function ge(){}function he(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(ge,ge):(v.status="pending",v.then(function(O){v.status==="pending"&&(v.status="fulfilled",v.value=O)},function(O){v.status==="pending"&&(v.status="rejected",v.reason=O)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function K(v,O,Q,I,ne){var ve=typeof v;(ve==="undefined"||ve==="boolean")&&(v=null);var G=!1;if(v===null)G=!0;else switch(ve){case"bigint":case"string":case"number":G=!0;break;case"object":switch(v.$$typeof){case r:case u:G=!0;break;case w:return G=v._init,K(G(v._payload),O,Q,I,ne)}}if(G)return ne=ne(v),G=I===""?"."+se(v,0):I,ee(ne)?(Q="",G!=null&&(Q=G.replace(de,"$&/")+"/"),K(ne,O,Q,"",function(ye){return ye})):ne!=null&&(W(ne)&&(ne=Z(ne,Q+(ne.key==null||v&&v.key===ne.key?"":(""+ne.key).replace(de,"$&/")+"/")+G)),O.push(ne)),1;G=0;var xe=I===""?".":I+":";if(ee(v))for(var ce=0;ce<v.length;ce++)I=v[ce],ve=xe+se(I,ce),G+=K(I,O,Q,ve,ne);else if(ce=_(v),typeof ce=="function")for(v=ce.call(v),ce=0;!(I=v.next()).done;)I=I.value,ve=xe+se(I,ce++),G+=K(I,O,Q,ve,ne);else if(ve==="object"){if(typeof v.then=="function")return K(he(v),O,Q,I,ne);throw O=String(v),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.")}return G}function A(v,O,Q){if(v==null)return v;var I=[],ne=0;return K(v,I,"","",function(ve){return O.call(Q,ve,ne++)}),I}function R(v){if(v._status===-1){var O=v._result;O=O(),O.then(function(Q){(v._status===0||v._status===-1)&&(v._status=1,v._result=Q)},function(Q){(v._status===0||v._status===-1)&&(v._status=2,v._result=Q)}),v._status===-1&&(v._status=0,v._result=O)}if(v._status===1)return v._result.default;throw v._result}var V=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)};function te(){}return Se.Children={map:A,forEach:function(v,O,Q){A(v,function(){O.apply(this,arguments)},Q)},count:function(v){var O=0;return A(v,function(){O++}),O},toArray:function(v){return A(v,function(O){return O})||[]},only:function(v){if(!W(v))throw Error("React.Children.only expected to receive a single React element child.");return v}},Se.Component=z,Se.Fragment=c,Se.Profiler=f,Se.PureComponent=H,Se.StrictMode=o,Se.Suspense=b,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Se.__COMPILER_RUNTIME={__proto__:null,c:function(v){return U.H.useMemoCache(v)}},Se.cache=function(v){return function(){return v.apply(null,arguments)}},Se.cloneElement=function(v,O,Q){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var I=p({},v.props),ne=v.key,ve=void 0;if(O!=null)for(G in O.ref!==void 0&&(ve=void 0),O.key!==void 0&&(ne=""+O.key),O)!le.call(O,G)||G==="key"||G==="__self"||G==="__source"||G==="ref"&&O.ref===void 0||(I[G]=O[G]);var G=arguments.length-2;if(G===1)I.children=Q;else if(1<G){for(var xe=Array(G),ce=0;ce<G;ce++)xe[ce]=arguments[ce+2];I.children=xe}return B(v.type,ne,void 0,void 0,ve,I)},Se.createContext=function(v){return v={$$typeof:x,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:m,_context:v},v},Se.createElement=function(v,O,Q){var I,ne={},ve=null;if(O!=null)for(I in O.key!==void 0&&(ve=""+O.key),O)le.call(O,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(ne[I]=O[I]);var G=arguments.length-2;if(G===1)ne.children=Q;else if(1<G){for(var xe=Array(G),ce=0;ce<G;ce++)xe[ce]=arguments[ce+2];ne.children=xe}if(v&&v.defaultProps)for(I in G=v.defaultProps,G)ne[I]===void 0&&(ne[I]=G[I]);return B(v,ve,void 0,void 0,null,ne)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(v){return{$$typeof:S,render:v}},Se.isValidElement=W,Se.lazy=function(v){return{$$typeof:w,_payload:{_status:-1,_result:v},_init:R}},Se.memo=function(v,O){return{$$typeof:g,type:v,compare:O===void 0?null:O}},Se.startTransition=function(v){var O=U.T,Q={};U.T=Q;try{var I=v(),ne=U.S;ne!==null&&ne(Q,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(te,V)}catch(ve){V(ve)}finally{U.T=O}},Se.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Se.use=function(v){return U.H.use(v)},Se.useActionState=function(v,O,Q){return U.H.useActionState(v,O,Q)},Se.useCallback=function(v,O){return U.H.useCallback(v,O)},Se.useContext=function(v){return U.H.useContext(v)},Se.useDebugValue=function(){},Se.useDeferredValue=function(v,O){return U.H.useDeferredValue(v,O)},Se.useEffect=function(v,O,Q){var I=U.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return I.useEffect(v,O)},Se.useId=function(){return U.H.useId()},Se.useImperativeHandle=function(v,O,Q){return U.H.useImperativeHandle(v,O,Q)},Se.useInsertionEffect=function(v,O){return U.H.useInsertionEffect(v,O)},Se.useLayoutEffect=function(v,O){return U.H.useLayoutEffect(v,O)},Se.useMemo=function(v,O){return U.H.useMemo(v,O)},Se.useOptimistic=function(v,O){return U.H.useOptimistic(v,O)},Se.useReducer=function(v,O,Q){return U.H.useReducer(v,O,Q)},Se.useRef=function(v){return U.H.useRef(v)},Se.useState=function(v){return U.H.useState(v)},Se.useSyncExternalStore=function(v,O,Q){return U.H.useSyncExternalStore(v,O,Q)},Se.useTransition=function(){return U.H.useTransition()},Se.version="19.1.0",Se}var ih;function oc(){return ih||(ih=1,Wo.exports=l0()),Wo.exports}var $=oc();const At=Eh($);var Po={exports:{}},rn={},Io={exports:{}},ec={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rh;function n0(){return rh||(rh=1,function(r){function u(A,R){var V=A.length;A.push(R);e:for(;0<V;){var te=V-1>>>1,v=A[te];if(0<f(v,R))A[te]=R,A[V]=v,V=te;else break e}}function c(A){return A.length===0?null:A[0]}function o(A){if(A.length===0)return null;var R=A[0],V=A.pop();if(V!==R){A[0]=V;e:for(var te=0,v=A.length,O=v>>>1;te<O;){var Q=2*(te+1)-1,I=A[Q],ne=Q+1,ve=A[ne];if(0>f(I,V))ne<v&&0>f(ve,I)?(A[te]=ve,A[ne]=V,te=ne):(A[te]=I,A[Q]=V,te=Q);else if(ne<v&&0>f(ve,V))A[te]=ve,A[ne]=V,te=ne;else break e}}return R}function f(A,R){var V=A.sortIndex-R.sortIndex;return V!==0?V:A.id-R.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;r.unstable_now=function(){return m.now()}}else{var x=Date,S=x.now();r.unstable_now=function(){return x.now()-S}}var b=[],g=[],w=1,q=null,_=3,C=!1,p=!1,T=!1,z=!1,P=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function ee(A){for(var R=c(g);R!==null;){if(R.callback===null)o(g);else if(R.startTime<=A)o(g),R.sortIndex=R.expirationTime,u(b,R);else break;R=c(g)}}function U(A){if(T=!1,ee(A),!p)if(c(b)!==null)p=!0,le||(le=!0,se());else{var R=c(g);R!==null&&K(U,R.startTime-A)}}var le=!1,B=-1,Z=5,W=-1;function oe(){return z?!0:!(r.unstable_now()-W<Z)}function de(){if(z=!1,le){var A=r.unstable_now();W=A;var R=!0;try{e:{p=!1,T&&(T=!1,H(B),B=-1),C=!0;var V=_;try{t:{for(ee(A),q=c(b);q!==null&&!(q.expirationTime>A&&oe());){var te=q.callback;if(typeof te=="function"){q.callback=null,_=q.priorityLevel;var v=te(q.expirationTime<=A);if(A=r.unstable_now(),typeof v=="function"){q.callback=v,ee(A),R=!0;break t}q===c(b)&&o(b),ee(A)}else o(b);q=c(b)}if(q!==null)R=!0;else{var O=c(g);O!==null&&K(U,O.startTime-A),R=!1}}break e}finally{q=null,_=V,C=!1}R=void 0}}finally{R?se():le=!1}}}var se;if(typeof J=="function")se=function(){J(de)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,he=ge.port2;ge.port1.onmessage=de,se=function(){he.postMessage(null)}}else se=function(){P(de,0)};function K(A,R){B=P(function(){A(r.unstable_now())},R)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(A){A.callback=null},r.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<A?Math.floor(1e3/A):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_next=function(A){switch(_){case 1:case 2:case 3:var R=3;break;default:R=_}var V=_;_=R;try{return A()}finally{_=V}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(A,R){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var V=_;_=A;try{return R()}finally{_=V}},r.unstable_scheduleCallback=function(A,R,V){var te=r.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,A){case 1:var v=-1;break;case 2:v=250;break;case 5:v=1073741823;break;case 4:v=1e4;break;default:v=5e3}return v=V+v,A={id:w++,callback:R,priorityLevel:A,startTime:V,expirationTime:v,sortIndex:-1},V>te?(A.sortIndex=V,u(g,A),c(b)===null&&A===c(g)&&(T?(H(B),B=-1):T=!0,K(U,V-te))):(A.sortIndex=v,u(b,A),p||C||(p=!0,le||(le=!0,se()))),A},r.unstable_shouldYield=oe,r.unstable_wrapCallback=function(A){var R=_;return function(){var V=_;_=R;try{return A.apply(this,arguments)}finally{_=V}}}}(ec)),ec}var oh;function i0(){return oh||(oh=1,Io.exports=n0()),Io.exports}var tc={exports:{}},bt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ch;function r0(){if(ch)return bt;ch=1;var r=oc();function u(b){var g="https://react.dev/errors/"+b;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+b+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var o={d:{f:c,r:function(){throw Error(u(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},f=Symbol.for("react.portal");function m(b,g,w){var q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:q==null?null:""+q,children:b,containerInfo:g,implementation:w}}var x=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function S(b,g){if(b==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,bt.createPortal=function(b,g){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(u(299));return m(b,g,null,w)},bt.flushSync=function(b){var g=x.T,w=o.p;try{if(x.T=null,o.p=2,b)return b()}finally{x.T=g,o.p=w,o.d.f()}},bt.preconnect=function(b,g){typeof b=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(b,g))},bt.prefetchDNS=function(b){typeof b=="string"&&o.d.D(b)},bt.preinit=function(b,g){if(typeof b=="string"&&g&&typeof g.as=="string"){var w=g.as,q=S(w,g.crossOrigin),_=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;w==="style"?o.d.S(b,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:q,integrity:_,fetchPriority:C}):w==="script"&&o.d.X(b,{crossOrigin:q,integrity:_,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},bt.preinitModule=function(b,g){if(typeof b=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var w=S(g.as,g.crossOrigin);o.d.M(b,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(b)},bt.preload=function(b,g){if(typeof b=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var w=g.as,q=S(w,g.crossOrigin);o.d.L(b,w,{crossOrigin:q,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},bt.preloadModule=function(b,g){if(typeof b=="string")if(g){var w=S(g.as,g.crossOrigin);o.d.m(b,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(b)},bt.requestFormReset=function(b){o.d.r(b)},bt.unstable_batchedUpdates=function(b,g){return b(g)},bt.useFormState=function(b,g,w){return x.H.useFormState(b,g,w)},bt.useFormStatus=function(){return x.H.useHostTransitionStatus()},bt.version="19.1.0",bt}var uh;function o0(){if(uh)return tc.exports;uh=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(u){console.error(u)}}return r(),tc.exports=r0(),tc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh;function c0(){if(dh)return rn;dh=1;var r=i0(),u=oc(),c=o0();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function x(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function S(e){if(m(e)!==e)throw Error(o(188))}function b(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,s=t;;){var n=a.return;if(n===null)break;var i=n.alternate;if(i===null){if(s=n.return,s!==null){a=s;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===a)return S(n),e;if(i===s)return S(n),t;i=i.sibling}throw Error(o(188))}if(a.return!==s.return)a=n,s=i;else{for(var d=!1,h=n.child;h;){if(h===a){d=!0,a=n,s=i;break}if(h===s){d=!0,s=n,a=i;break}h=h.sibling}if(!d){for(h=i.child;h;){if(h===a){d=!0,a=i,s=n;break}if(h===s){d=!0,s=i,a=n;break}h=h.sibling}if(!d)throw Error(o(189))}}if(a.alternate!==s)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,q=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),J=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=de&&e[de]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Symbol.for("react.client.reference");function he(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ge?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case p:return"Fragment";case z:return"Profiler";case T:return"StrictMode";case U:return"Suspense";case le:return"SuspenseList";case W:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case J:return(e.displayName||"Context")+".Provider";case H:return(e._context.displayName||"Context")+".Consumer";case ee:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return t=e.displayName||null,t!==null?t:he(e.type)||"Memo";case Z:t=e._payload,e=e._init;try{return he(e(t))}catch{}}return null}var K=Array.isArray,A=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},te=[],v=-1;function O(e){return{current:e}}function Q(e){0>v||(e.current=te[v],te[v]=null,v--)}function I(e,t){v++,te[v]=e.current,e.current=t}var ne=O(null),ve=O(null),G=O(null),xe=O(null);function ce(e,t){switch(I(G,t),I(ve,e),I(ne,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ef(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ef(t),e=Of(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(ne),I(ne,e)}function ye(){Q(ne),Q(ve),Q(G)}function je(e){e.memoizedState!==null&&I(xe,e);var t=ne.current,a=Of(t,e.type);t!==a&&(I(ve,e),I(ne,a))}function ke(e){ve.current===e&&(Q(ne),Q(ve)),xe.current===e&&(Q(xe),en._currentValue=V)}var $e=Object.prototype.hasOwnProperty,st=r.unstable_scheduleCallback,mt=r.unstable_cancelCallback,na=r.unstable_shouldYield,ia=r.unstable_requestPaint,yt=r.unstable_now,ol=r.unstable_getCurrentPriorityLevel,hn=r.unstable_ImmediatePriority,mn=r.unstable_UserBlockingPriority,gs=r.unstable_NormalPriority,Bi=r.unstable_LowPriority,_e=r.unstable_IdlePriority,Fe=r.log,Qt=r.unstable_setDisableYieldValue,Zt=null,lt=null;function zt(e){if(typeof Fe=="function"&&Qt(e),lt&&typeof lt.setStrictMode=="function")try{lt.setStrictMode(Zt,e)}catch{}}var xt=Math.clz32?Math.clz32:qi,pn=Math.log,ra=Math.LN2;function qi(e){return e>>>=0,e===0?32:31-(pn(e)/ra|0)|0}var gn=256,bn=4194304;function Ja(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xn(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var n=0,i=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var h=s&134217727;return h!==0?(s=h&~i,s!==0?n=Ja(s):(d&=h,d!==0?n=Ja(d):a||(a=h&~e,a!==0&&(n=Ja(a))))):(h=s&~i,h!==0?n=Ja(h):d!==0?n=Ja(d):a||(a=s&~e,a!==0&&(n=Ja(a)))),n===0?0:t!==0&&t!==n&&(t&i)===0&&(i=n&-n,a=t&-t,i>=a||i===32&&(a&4194048)!==0)?t:n}function cl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Vh(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hc(){var e=gn;return gn<<=1,(gn&4194048)===0&&(gn=256),e}function mc(){var e=bn;return bn<<=1,(bn&62914560)===0&&(bn=4194304),e}function Ui(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ul(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Xh(e,t,a,s,n,i){var d=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var h=e.entanglements,y=e.expirationTimes,E=e.hiddenUpdates;for(a=d&~a;0<a;){var L=31-xt(a),X=1<<L;h[L]=0,y[L]=-1;var D=E[L];if(D!==null)for(E[L]=null,L=0;L<D.length;L++){var k=D[L];k!==null&&(k.lane&=-536870913)}a&=~X}s!==0&&pc(e,s,0),i!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=i&~(d&~t))}function pc(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-xt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&4194090}function gc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-xt(a),n=1<<s;n&t|e[s]&t&&(e[s]|=t),a&=~n}}function Hi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Li(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function bc(){var e=R.p;return e!==0?e:(e=window.event,e===void 0?32:Wf(e.type))}function Qh(e,t){var a=R.p;try{return R.p=e,t()}finally{R.p=a}}var Ta=Math.random().toString(36).slice(2),pt="__reactFiber$"+Ta,wt="__reactProps$"+Ta,bs="__reactContainer$"+Ta,Yi="__reactEvents$"+Ta,Zh="__reactListeners$"+Ta,$h="__reactHandles$"+Ta,xc="__reactResources$"+Ta,dl="__reactMarker$"+Ta;function Gi(e){delete e[pt],delete e[wt],delete e[Yi],delete e[Zh],delete e[$h]}function xs(e){var t=e[pt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[bs]||a[pt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Bf(e);e!==null;){if(a=e[pt])return a;e=Bf(e)}return t}e=a,a=e.parentNode}return null}function vs(e){if(e=e[pt]||e[bs]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function fl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function ys(e){var t=e[xc];return t||(t=e[xc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function nt(e){e[dl]=!0}var vc=new Set,yc={};function Ka(e,t){ws(e,t),ws(e+"Capture",t)}function ws(e,t){for(yc[e]=t,e=0;e<t.length;e++)vc.add(t[e])}var Fh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wc={},Sc={};function Jh(e){return $e.call(Sc,e)?!0:$e.call(wc,e)?!1:Fh.test(e)?Sc[e]=!0:(wc[e]=!0,!1)}function vn(e,t,a){if(Jh(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function yn(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function oa(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}var Vi,Nc;function Ss(e){if(Vi===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Vi=t&&t[1]||"",Nc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vi+e+Nc}var Xi=!1;function Qi(e,t){if(!e||Xi)return"";Xi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(k){var D=k}Reflect.construct(e,[],X)}else{try{X.call()}catch(k){D=k}e.call(X.prototype)}}else{try{throw Error()}catch(k){D=k}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(k){if(k&&D&&typeof k.stack=="string")return[k.stack,D.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),d=i[0],h=i[1];if(d&&h){var y=d.split(`
`),E=h.split(`
`);for(n=s=0;s<y.length&&!y[s].includes("DetermineComponentFrameRoot");)s++;for(;n<E.length&&!E[n].includes("DetermineComponentFrameRoot");)n++;if(s===y.length||n===E.length)for(s=y.length-1,n=E.length-1;1<=s&&0<=n&&y[s]!==E[n];)n--;for(;1<=s&&0<=n;s--,n--)if(y[s]!==E[n]){if(s!==1||n!==1)do if(s--,n--,0>n||y[s]!==E[n]){var L=`
`+y[s].replace(" at new "," at ");return e.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",e.displayName)),L}while(1<=s&&0<=n);break}}}finally{Xi=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ss(a):""}function Kh(e){switch(e.tag){case 26:case 27:case 5:return Ss(e.type);case 16:return Ss("Lazy");case 13:return Ss("Suspense");case 19:return Ss("SuspenseList");case 0:case 15:return Qi(e.type,!1);case 11:return Qi(e.type.render,!1);case 1:return Qi(e.type,!0);case 31:return Ss("Activity");default:return""}}function Tc(e){try{var t="";do t+=Kh(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Bt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wh(e){var t=jc(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,i=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(d){s=""+d,i.call(this,d)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(d){s=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wn(e){e._valueTracker||(e._valueTracker=Wh(e))}function Ac(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=jc(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function Sn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ph=/[\n"\\]/g;function qt(e){return e.replace(Ph,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Zi(e,t,a,s,n,i,d,h){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),t!=null?d==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Bt(t)):e.value!==""+Bt(t)&&(e.value=""+Bt(t)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),t!=null?$i(e,d,Bt(t)):a!=null?$i(e,d,Bt(a)):s!=null&&e.removeAttribute("value"),n==null&&i!=null&&(e.defaultChecked=!!i),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.name=""+Bt(h):e.removeAttribute("name")}function Rc(e,t,a,s,n,i,d,h){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||a!=null){if(!(i!=="submit"&&i!=="reset"||t!=null))return;a=a!=null?""+Bt(a):"",t=t!=null?""+Bt(t):a,h||t===e.value||(e.value=t),e.defaultValue=t}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=h?e.checked:!!s,e.defaultChecked=!!s,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d)}function $i(e,t,a){t==="number"&&Sn(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ns(e,t,a,s){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&s&&(e[a].defaultSelected=!0)}else{for(a=""+Bt(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function _c(e,t,a){if(t!=null&&(t=""+Bt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Bt(a):""}function Mc(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(o(92));if(K(s)){if(1<s.length)throw Error(o(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=Bt(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s)}function Ts(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Ih=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cc(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||Ih.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ec(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&a[n]!==s&&Cc(e,n,s)}else for(var i in t)t.hasOwnProperty(i)&&Cc(e,i,t[i])}function Fi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var em=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nn(e){return tm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ji=null;function Ki(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var js=null,As=null;function Oc(e){var t=vs(e);if(t&&(e=t.stateNode)){var a=e[wt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Zi(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+qt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var n=s[wt]||null;if(!n)throw Error(o(90));Zi(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Ac(s)}break e;case"textarea":_c(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Ns(e,!!a.multiple,t,!1)}}}var Wi=!1;function Dc(e,t,a){if(Wi)return e(t,a);Wi=!0;try{var s=e(t);return s}finally{if(Wi=!1,(js!==null||As!==null)&&(oi(),js&&(t=js,e=As,As=js=null,Oc(t),e)))for(t=0;t<e.length;t++)Oc(e[t])}}function hl(e,t){var a=e.stateNode;if(a===null)return null;var s=a[wt]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(ca)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{Pi=!1}var ja=null,Ii=null,Tn=null;function kc(){if(Tn)return Tn;var e,t=Ii,a=t.length,s,n="value"in ja?ja.value:ja.textContent,i=n.length;for(e=0;e<a&&t[e]===n[e];e++);var d=a-e;for(s=1;s<=d&&t[a-s]===n[i-s];s++);return Tn=n.slice(e,1<s?1-s:void 0)}function jn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function An(){return!0}function zc(){return!1}function St(e){function t(a,s,n,i,d){this._reactName=a,this._targetInst=n,this.type=s,this.nativeEvent=i,this.target=d,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(a=e[h],this[h]=a?a(i):i[h]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?An:zc,this.isPropagationStopped=zc,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=An)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=An)},persist:function(){},isPersistent:An}),t}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rn=St(Wa),pl=w({},Wa,{view:0,detail:0}),am=St(pl),er,tr,gl,_n=w({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gl&&(gl&&e.type==="mousemove"?(er=e.screenX-gl.screenX,tr=e.screenY-gl.screenY):tr=er=0,gl=e),er)},movementY:function(e){return"movementY"in e?e.movementY:tr}}),Bc=St(_n),sm=w({},_n,{dataTransfer:0}),lm=St(sm),nm=w({},pl,{relatedTarget:0}),ar=St(nm),im=w({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),rm=St(im),om=w({},Wa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cm=St(om),um=w({},Wa,{data:0}),qc=St(um),dm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hm[e])?!!t[e]:!1}function sr(){return mm}var pm=w({},pl,{key:function(e){if(e.key){var t=dm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=jn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sr,charCode:function(e){return e.type==="keypress"?jn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gm=St(pm),bm=w({},_n,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=St(bm),xm=w({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sr}),vm=St(xm),ym=w({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),wm=St(ym),Sm=w({},_n,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nm=St(Sm),Tm=w({},Wa,{newState:0,oldState:0}),jm=St(Tm),Am=[9,13,27,32],lr=ca&&"CompositionEvent"in window,bl=null;ca&&"documentMode"in document&&(bl=document.documentMode);var Rm=ca&&"TextEvent"in window&&!bl,Hc=ca&&(!lr||bl&&8<bl&&11>=bl),Lc=" ",Yc=!1;function Gc(e,t){switch(e){case"keyup":return Am.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rs=!1;function _m(e,t){switch(e){case"compositionend":return Vc(t);case"keypress":return t.which!==32?null:(Yc=!0,Lc);case"textInput":return e=t.data,e===Lc&&Yc?null:e;default:return null}}function Mm(e,t){if(Rs)return e==="compositionend"||!lr&&Gc(e,t)?(e=kc(),Tn=Ii=ja=null,Rs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hc&&t.locale!=="ko"?null:t.data;default:return null}}var Cm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cm[e.type]:t==="textarea"}function Qc(e,t,a,s){js?As?As.push(s):As=[s]:js=s,t=mi(t,"onChange"),0<t.length&&(a=new Rn("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var xl=null,vl=null;function Em(e){Af(e,0)}function Mn(e){var t=fl(e);if(Ac(t))return e}function Zc(e,t){if(e==="change")return t}var $c=!1;if(ca){var nr;if(ca){var ir="oninput"in document;if(!ir){var Fc=document.createElement("div");Fc.setAttribute("oninput","return;"),ir=typeof Fc.oninput=="function"}nr=ir}else nr=!1;$c=nr&&(!document.documentMode||9<document.documentMode)}function Jc(){xl&&(xl.detachEvent("onpropertychange",Kc),vl=xl=null)}function Kc(e){if(e.propertyName==="value"&&Mn(vl)){var t=[];Qc(t,vl,e,Ki(e)),Dc(Em,t)}}function Om(e,t,a){e==="focusin"?(Jc(),xl=t,vl=a,xl.attachEvent("onpropertychange",Kc)):e==="focusout"&&Jc()}function Dm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mn(vl)}function km(e,t){if(e==="click")return Mn(t)}function zm(e,t){if(e==="input"||e==="change")return Mn(t)}function Bm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rt=typeof Object.is=="function"?Object.is:Bm;function yl(e,t){if(Rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var n=a[s];if(!$e.call(t,n)||!Rt(e[n],t[n]))return!1}return!0}function Wc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pc(e,t){var a=Wc(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Wc(a)}}function Ic(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ic(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Sn(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Sn(e.document)}return t}function rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var qm=ca&&"documentMode"in document&&11>=document.documentMode,_s=null,or=null,wl=null,cr=!1;function tu(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cr||_s==null||_s!==Sn(s)||(s=_s,"selectionStart"in s&&rr(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),wl&&yl(wl,s)||(wl=s,s=mi(or,"onSelect"),0<s.length&&(t=new Rn("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=_s)))}function Pa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ms={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionrun:Pa("Transition","TransitionRun"),transitionstart:Pa("Transition","TransitionStart"),transitioncancel:Pa("Transition","TransitionCancel"),transitionend:Pa("Transition","TransitionEnd")},ur={},au={};ca&&(au=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function Ia(e){if(ur[e])return ur[e];if(!Ms[e])return e;var t=Ms[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in au)return ur[e]=t[a];return e}var su=Ia("animationend"),lu=Ia("animationiteration"),nu=Ia("animationstart"),Um=Ia("transitionrun"),Hm=Ia("transitionstart"),Lm=Ia("transitioncancel"),iu=Ia("transitionend"),ru=new Map,dr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dr.push("scrollEnd");function $t(e,t){ru.set(e,t),Ka(t,[e])}var ou=new WeakMap;function Ut(e,t){if(typeof e=="object"&&e!==null){var a=ou.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Tc(t)},ou.set(e,t),t)}return{value:e,source:t,stack:Tc(t)}}var Ht=[],Cs=0,fr=0;function Cn(){for(var e=Cs,t=fr=Cs=0;t<e;){var a=Ht[t];Ht[t++]=null;var s=Ht[t];Ht[t++]=null;var n=Ht[t];Ht[t++]=null;var i=Ht[t];if(Ht[t++]=null,s!==null&&n!==null){var d=s.pending;d===null?n.next=n:(n.next=d.next,d.next=n),s.pending=n}i!==0&&cu(a,n,i)}}function En(e,t,a,s){Ht[Cs++]=e,Ht[Cs++]=t,Ht[Cs++]=a,Ht[Cs++]=s,fr|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function hr(e,t,a,s){return En(e,t,a,s),On(e)}function Es(e,t){return En(e,null,null,t),On(e)}function cu(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var n=!1,i=e.return;i!==null;)i.childLanes|=a,s=i.alternate,s!==null&&(s.childLanes|=a),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(n=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,n&&t!==null&&(n=31-xt(a),e=i.hiddenUpdates,s=e[n],s===null?e[n]=[t]:s.push(t),t.lane=a|536870912),i):null}function On(e){if(50<Zl)throw Zl=0,yo=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Os={};function Ym(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,a,s){return new Ym(e,t,a,s)}function mr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ua(e,t){var a=e.alternate;return a===null?(a=_t(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function uu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Dn(e,t,a,s,n,i){var d=0;if(s=e,typeof e=="function")mr(e)&&(d=1);else if(typeof e=="string")d=Vp(e,a,ne.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case W:return e=_t(31,a,t,n),e.elementType=W,e.lanes=i,e;case p:return es(a.children,n,i,t);case T:d=8,n|=24;break;case z:return e=_t(12,a,t,n|2),e.elementType=z,e.lanes=i,e;case U:return e=_t(13,a,t,n),e.elementType=U,e.lanes=i,e;case le:return e=_t(19,a,t,n),e.elementType=le,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:case J:d=10;break e;case H:d=9;break e;case ee:d=11;break e;case B:d=14;break e;case Z:d=16,s=null;break e}d=29,a=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=_t(d,a,t,n),t.elementType=e,t.type=s,t.lanes=i,t}function es(e,t,a,s){return e=_t(7,e,s,t),e.lanes=a,e}function pr(e,t,a){return e=_t(6,e,null,t),e.lanes=a,e}function gr(e,t,a){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ds=[],ks=0,kn=null,zn=0,Lt=[],Yt=0,ts=null,da=1,fa="";function as(e,t){Ds[ks++]=zn,Ds[ks++]=kn,kn=e,zn=t}function du(e,t,a){Lt[Yt++]=da,Lt[Yt++]=fa,Lt[Yt++]=ts,ts=e;var s=da;e=fa;var n=32-xt(s)-1;s&=~(1<<n),a+=1;var i=32-xt(t)+n;if(30<i){var d=n-n%5;i=(s&(1<<d)-1).toString(32),s>>=d,n-=d,da=1<<32-xt(t)+n|a<<n|s,fa=i+e}else da=1<<i|a<<n|s,fa=e}function br(e){e.return!==null&&(as(e,1),du(e,1,0))}function xr(e){for(;e===kn;)kn=Ds[--ks],Ds[ks]=null,zn=Ds[--ks],Ds[ks]=null;for(;e===ts;)ts=Lt[--Yt],Lt[Yt]=null,fa=Lt[--Yt],Lt[Yt]=null,da=Lt[--Yt],Lt[Yt]=null}var vt=null,Qe=null,Oe=!1,ss=null,Pt=!1,vr=Error(o(519));function ls(e){var t=Error(o(418,""));throw Tl(Ut(t,e)),vr}function fu(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[pt]=e,t[wt]=s,a){case"dialog":Re("cancel",t),Re("close",t);break;case"iframe":case"object":case"embed":Re("load",t);break;case"video":case"audio":for(a=0;a<Fl.length;a++)Re(Fl[a],t);break;case"source":Re("error",t);break;case"img":case"image":case"link":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"input":Re("invalid",t),Rc(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),wn(t);break;case"select":Re("invalid",t);break;case"textarea":Re("invalid",t),Mc(t,s.value,s.defaultValue,s.children),wn(t)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||Cf(t.textContent,a)?(s.popover!=null&&(Re("beforetoggle",t),Re("toggle",t)),s.onScroll!=null&&Re("scroll",t),s.onScrollEnd!=null&&Re("scrollend",t),s.onClick!=null&&(t.onclick=pi),t=!0):t=!1,t||ls(e)}function hu(e){for(vt=e.return;vt;)switch(vt.tag){case 5:case 13:Pt=!1;return;case 27:case 3:Pt=!0;return;default:vt=vt.return}}function Sl(e){if(e!==vt)return!1;if(!Oe)return hu(e),Oe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Bo(e.type,e.memoizedProps)),a=!a),a&&Qe&&ls(e),hu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Qe=Jt(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Qe=null}}else t===27?(t=Qe,Ya(e.type)?(e=Lo,Lo=null,Qe=e):Qe=t):Qe=vt?Jt(e.stateNode.nextSibling):null;return!0}function Nl(){Qe=vt=null,Oe=!1}function mu(){var e=ss;return e!==null&&(jt===null?jt=e:jt.push.apply(jt,e),ss=null),e}function Tl(e){ss===null?ss=[e]:ss.push(e)}var yr=O(null),ns=null,ha=null;function Aa(e,t,a){I(yr,t._currentValue),t._currentValue=a}function ma(e){e._currentValue=yr.current,Q(yr)}function wr(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Sr(e,t,a,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var i=n.dependencies;if(i!==null){var d=n.child;i=i.firstContext;e:for(;i!==null;){var h=i;i=n;for(var y=0;y<t.length;y++)if(h.context===t[y]){i.lanes|=a,h=i.alternate,h!==null&&(h.lanes|=a),wr(i.return,a,e),s||(d=null);break e}i=h.next}}else if(n.tag===18){if(d=n.return,d===null)throw Error(o(341));d.lanes|=a,i=d.alternate,i!==null&&(i.lanes|=a),wr(d,a,e),d=null}else d=n.child;if(d!==null)d.return=n;else for(d=n;d!==null;){if(d===e){d=null;break}if(n=d.sibling,n!==null){n.return=d.return,d=n;break}d=d.return}n=d}}function jl(e,t,a,s){e=null;for(var n=t,i=!1;n!==null;){if(!i){if((n.flags&524288)!==0)i=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var d=n.alternate;if(d===null)throw Error(o(387));if(d=d.memoizedProps,d!==null){var h=n.type;Rt(n.pendingProps.value,d.value)||(e!==null?e.push(h):e=[h])}}else if(n===xe.current){if(d=n.alternate,d===null)throw Error(o(387));d.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(en):e=[en])}n=n.return}e!==null&&Sr(t,e,a,s),t.flags|=262144}function Bn(e){for(e=e.firstContext;e!==null;){if(!Rt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function is(e){ns=e,ha=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function gt(e){return pu(ns,e)}function qn(e,t){return ns===null&&is(e),pu(e,t)}function pu(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ha===null){if(e===null)throw Error(o(308));ha=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ha=ha.next=t;return a}var Gm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Vm=r.unstable_scheduleCallback,Xm=r.unstable_NormalPriority,Ie={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nr(){return{controller:new Gm,data:new Map,refCount:0}}function Al(e){e.refCount--,e.refCount===0&&Vm(Xm,function(){e.controller.abort()})}var Rl=null,Tr=0,zs=0,Bs=null;function Qm(e,t){if(Rl===null){var a=Rl=[];Tr=0,zs=Ro(),Bs={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Tr++,t.then(gu,gu),t}function gu(){if(--Tr===0&&Rl!==null){Bs!==null&&(Bs.status="fulfilled");var e=Rl;Rl=null,zs=0,Bs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Zm(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var n=0;n<a.length;n++)(0,a[n])(t)},function(n){for(s.status="rejected",s.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),s}var bu=A.S;A.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Qm(e,t),bu!==null&&bu(e,t)};var rs=O(null);function jr(){var e=rs.current;return e!==null?e:Ge.pooledCache}function Un(e,t){t===null?I(rs,rs.current):I(rs,t.pool)}function xu(){var e=jr();return e===null?null:{parent:Ie._currentValue,pool:e}}var _l=Error(o(460)),vu=Error(o(474)),Hn=Error(o(542)),Ar={then:function(){}};function yu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ln(){}function wu(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Ln,Ln),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Nu(e),e;default:if(typeof t.status=="string")t.then(Ln,Ln);else{if(e=Ge,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=s}},function(s){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Nu(e),e}throw Ml=t,_l}}var Ml=null;function Su(){if(Ml===null)throw Error(o(459));var e=Ml;return Ml=null,e}function Nu(e){if(e===_l||e===Hn)throw Error(o(483))}var Ra=!1;function Rr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _r(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _a(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(ze&2)!==0){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=On(e),cu(e,null,a),t}return En(e,s,t,a),On(e)}function Cl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,gc(e,a)}}function Mr(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var n=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var d={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};i===null?n=i=d:i=i.next=d,a=a.next}while(a!==null);i===null?n=i=t:i=i.next=t}else n=i=t;a={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Cr=!1;function El(){if(Cr){var e=Bs;if(e!==null)throw e}}function Ol(e,t,a,s){Cr=!1;var n=e.updateQueue;Ra=!1;var i=n.firstBaseUpdate,d=n.lastBaseUpdate,h=n.shared.pending;if(h!==null){n.shared.pending=null;var y=h,E=y.next;y.next=null,d===null?i=E:d.next=E,d=y;var L=e.alternate;L!==null&&(L=L.updateQueue,h=L.lastBaseUpdate,h!==d&&(h===null?L.firstBaseUpdate=E:h.next=E,L.lastBaseUpdate=y))}if(i!==null){var X=n.baseState;d=0,L=E=y=null,h=i;do{var D=h.lane&-536870913,k=D!==h.lane;if(k?(Me&D)===D:(s&D)===D){D!==0&&D===zs&&(Cr=!0),L!==null&&(L=L.next={lane:0,tag:h.tag,payload:h.payload,callback:null,next:null});e:{var we=e,me=h;D=t;var He=a;switch(me.tag){case 1:if(we=me.payload,typeof we=="function"){X=we.call(He,X,D);break e}X=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=me.payload,D=typeof we=="function"?we.call(He,X,D):we,D==null)break e;X=w({},X,D);break e;case 2:Ra=!0}}D=h.callback,D!==null&&(e.flags|=64,k&&(e.flags|=8192),k=n.callbacks,k===null?n.callbacks=[D]:k.push(D))}else k={lane:D,tag:h.tag,payload:h.payload,callback:h.callback,next:null},L===null?(E=L=k,y=X):L=L.next=k,d|=D;if(h=h.next,h===null){if(h=n.shared.pending,h===null)break;k=h,h=k.next,k.next=null,n.lastBaseUpdate=k,n.shared.pending=null}}while(!0);L===null&&(y=X),n.baseState=y,n.firstBaseUpdate=E,n.lastBaseUpdate=L,i===null&&(n.shared.lanes=0),qa|=d,e.lanes=d,e.memoizedState=X}}function Tu(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function ju(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Tu(a[e],t)}var qs=O(null),Yn=O(0);function Au(e,t){e=wa,I(Yn,e),I(qs,t),wa=e|t.baseLanes}function Er(){I(Yn,wa),I(qs,qs.current)}function Or(){wa=Yn.current,Q(qs),Q(Yn)}var Ca=0,Ne=null,qe=null,We=null,Gn=!1,Us=!1,os=!1,Vn=0,Dl=0,Hs=null,$m=0;function Je(){throw Error(o(321))}function Dr(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Rt(e[a],t[a]))return!1;return!0}function kr(e,t,a,s,n,i){return Ca=i,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?cd:ud,os=!1,i=a(s,n),os=!1,Us&&(i=_u(t,a,s,n)),Ru(e),i}function Ru(e){A.H=Jn;var t=qe!==null&&qe.next!==null;if(Ca=0,We=qe=Ne=null,Gn=!1,Dl=0,Hs=null,t)throw Error(o(300));e===null||it||(e=e.dependencies,e!==null&&Bn(e)&&(it=!0))}function _u(e,t,a,s){Ne=e;var n=0;do{if(Us&&(Hs=null),Dl=0,Us=!1,25<=n)throw Error(o(301));if(n+=1,We=qe=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}A.H=ep,i=t(a,s)}while(Us);return i}function Fm(){var e=A.H,t=e.useState()[0];return t=typeof t.then=="function"?kl(t):t,e=e.useState()[0],(qe!==null?qe.memoizedState:null)!==e&&(Ne.flags|=1024),t}function zr(){var e=Vn!==0;return Vn=0,e}function Br(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function qr(e){if(Gn){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Gn=!1}Ca=0,We=qe=Ne=null,Us=!1,Dl=Vn=0,Hs=null}function Nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Ne.memoizedState=We=e:We=We.next=e,We}function Pe(){if(qe===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var t=We===null?Ne.memoizedState:We.next;if(t!==null)We=t,qe=e;else{if(e===null)throw Ne.alternate===null?Error(o(467)):Error(o(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},We===null?Ne.memoizedState=We=e:We=We.next=e}return We}function Ur(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(e){var t=Dl;return Dl+=1,Hs===null&&(Hs=[]),e=wu(Hs,e,t),t=Ne,(We===null?t.memoizedState:We.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?cd:ud),e}function Xn(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return kl(e);if(e.$$typeof===J)return gt(e)}throw Error(o(438,String(e)))}function Hr(e){var t=null,a=Ne.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=Ne.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Ur(),Ne.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=oe;return t.index++,a}function pa(e,t){return typeof t=="function"?t(e):t}function Qn(e){var t=Pe();return Lr(t,qe,e)}function Lr(e,t,a){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=a;var n=e.baseQueue,i=s.pending;if(i!==null){if(n!==null){var d=n.next;n.next=i.next,i.next=d}t.baseQueue=n=i,s.pending=null}if(i=e.baseState,n===null)e.memoizedState=i;else{t=n.next;var h=d=null,y=null,E=t,L=!1;do{var X=E.lane&-536870913;if(X!==E.lane?(Me&X)===X:(Ca&X)===X){var D=E.revertLane;if(D===0)y!==null&&(y=y.next={lane:0,revertLane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),X===zs&&(L=!0);else if((Ca&D)===D){E=E.next,D===zs&&(L=!0);continue}else X={lane:0,revertLane:E.revertLane,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},y===null?(h=y=X,d=i):y=y.next=X,Ne.lanes|=D,qa|=D;X=E.action,os&&a(i,X),i=E.hasEagerState?E.eagerState:a(i,X)}else D={lane:X,revertLane:E.revertLane,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},y===null?(h=y=D,d=i):y=y.next=D,Ne.lanes|=X,qa|=X;E=E.next}while(E!==null&&E!==t);if(y===null?d=i:y.next=h,!Rt(i,e.memoizedState)&&(it=!0,L&&(a=Bs,a!==null)))throw a;e.memoizedState=i,e.baseState=d,e.baseQueue=y,s.lastRenderedState=i}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Yr(e){var t=Pe(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var s=a.dispatch,n=a.pending,i=t.memoizedState;if(n!==null){a.pending=null;var d=n=n.next;do i=e(i,d.action),d=d.next;while(d!==n);Rt(i,t.memoizedState)||(it=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),a.lastRenderedState=i}return[i,s]}function Mu(e,t,a){var s=Ne,n=Pe(),i=Oe;if(i){if(a===void 0)throw Error(o(407));a=a()}else a=t();var d=!Rt((qe||n).memoizedState,a);d&&(n.memoizedState=a,it=!0),n=n.queue;var h=Ou.bind(null,s,n,e);if(zl(2048,8,h,[e]),n.getSnapshot!==t||d||We!==null&&We.memoizedState.tag&1){if(s.flags|=2048,Ls(9,Zn(),Eu.bind(null,s,n,a,t),null),Ge===null)throw Error(o(349));i||(Ca&124)!==0||Cu(s,t,a)}return a}function Cu(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Ne.updateQueue,t===null?(t=Ur(),Ne.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Eu(e,t,a,s){t.value=a,t.getSnapshot=s,Du(t)&&ku(e)}function Ou(e,t,a){return a(function(){Du(t)&&ku(e)})}function Du(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Rt(e,a)}catch{return!0}}function ku(e){var t=Es(e,2);t!==null&&Dt(t,e,2)}function Gr(e){var t=Nt();if(typeof e=="function"){var a=e;if(e=a(),os){zt(!0);try{a()}finally{zt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:e},t}function zu(e,t,a,s){return e.baseState=a,Lr(e,qe,typeof s=="function"?s:pa)}function Jm(e,t,a,s,n){if(Fn(e))throw Error(o(485));if(e=t.action,e!==null){var i={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){i.listeners.push(d)}};A.T!==null?a(!0):i.isTransition=!1,s(i),a=t.pending,a===null?(i.next=t.pending=i,Bu(t,i)):(i.next=a.next,t.pending=a.next=i)}}function Bu(e,t){var a=t.action,s=t.payload,n=e.state;if(t.isTransition){var i=A.T,d={};A.T=d;try{var h=a(n,s),y=A.S;y!==null&&y(d,h),qu(e,t,h)}catch(E){Vr(e,t,E)}finally{A.T=i}}else try{i=a(n,s),qu(e,t,i)}catch(E){Vr(e,t,E)}}function qu(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){Uu(e,t,s)},function(s){return Vr(e,t,s)}):Uu(e,t,a)}function Uu(e,t,a){t.status="fulfilled",t.value=a,Hu(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Bu(e,a)))}function Vr(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Hu(t),t=t.next;while(t!==s)}e.action=null}function Hu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Lu(e,t){return t}function Yu(e,t){if(Oe){var a=Ge.formState;if(a!==null){e:{var s=Ne;if(Oe){if(Qe){t:{for(var n=Qe,i=Pt;n.nodeType!==8;){if(!i){n=null;break t}if(n=Jt(n.nextSibling),n===null){n=null;break t}}i=n.data,n=i==="F!"||i==="F"?n:null}if(n){Qe=Jt(n.nextSibling),s=n.data==="F!";break e}}ls(s)}s=!1}s&&(t=a[0])}}return a=Nt(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lu,lastRenderedState:t},a.queue=s,a=id.bind(null,Ne,s),s.dispatch=a,s=Gr(!1),i=Fr.bind(null,Ne,!1,s.queue),s=Nt(),n={state:t,dispatch:null,action:e,pending:null},s.queue=n,a=Jm.bind(null,Ne,n,i,a),n.dispatch=a,s.memoizedState=e,[t,a,!1]}function Gu(e){var t=Pe();return Vu(t,qe,e)}function Vu(e,t,a){if(t=Lr(e,t,Lu)[0],e=Qn(pa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=kl(t)}catch(d){throw d===_l?Hn:d}else s=t;t=Pe();var n=t.queue,i=n.dispatch;return a!==t.memoizedState&&(Ne.flags|=2048,Ls(9,Zn(),Km.bind(null,n,a),null)),[s,i,e]}function Km(e,t){e.action=t}function Xu(e){var t=Pe(),a=qe;if(a!==null)return Vu(t,a,e);Pe(),t=t.memoizedState,a=Pe();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Ls(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=Ne.updateQueue,t===null&&(t=Ur(),Ne.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Zn(){return{destroy:void 0,resource:void 0}}function Qu(){return Pe().memoizedState}function $n(e,t,a,s){var n=Nt();s=s===void 0?null:s,Ne.flags|=e,n.memoizedState=Ls(1|t,Zn(),a,s)}function zl(e,t,a,s){var n=Pe();s=s===void 0?null:s;var i=n.memoizedState.inst;qe!==null&&s!==null&&Dr(s,qe.memoizedState.deps)?n.memoizedState=Ls(t,i,a,s):(Ne.flags|=e,n.memoizedState=Ls(1|t,i,a,s))}function Zu(e,t){$n(8390656,8,e,t)}function $u(e,t){zl(2048,8,e,t)}function Fu(e,t){return zl(4,2,e,t)}function Ju(e,t){return zl(4,4,e,t)}function Ku(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wu(e,t,a){a=a!=null?a.concat([e]):null,zl(4,4,Ku.bind(null,t,e),a)}function Xr(){}function Pu(e,t){var a=Pe();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&Dr(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Iu(e,t){var a=Pe();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&Dr(t,s[1]))return s[0];if(s=e(),os){zt(!0);try{e()}finally{zt(!1)}}return a.memoizedState=[s,t],s}function Qr(e,t,a){return a===void 0||(Ca&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=af(),Ne.lanes|=e,qa|=e,a)}function ed(e,t,a,s){return Rt(a,t)?a:qs.current!==null?(e=Qr(e,a,s),Rt(e,t)||(it=!0),e):(Ca&42)===0?(it=!0,e.memoizedState=a):(e=af(),Ne.lanes|=e,qa|=e,t)}function td(e,t,a,s,n){var i=R.p;R.p=i!==0&&8>i?i:8;var d=A.T,h={};A.T=h,Fr(e,!1,t,a);try{var y=n(),E=A.S;if(E!==null&&E(h,y),y!==null&&typeof y=="object"&&typeof y.then=="function"){var L=Zm(y,s);Bl(e,t,L,Ot(e))}else Bl(e,t,s,Ot(e))}catch(X){Bl(e,t,{then:function(){},status:"rejected",reason:X},Ot())}finally{R.p=i,A.T=d}}function Wm(){}function Zr(e,t,a,s){if(e.tag!==5)throw Error(o(476));var n=ad(e).queue;td(e,n,t,V,a===null?Wm:function(){return sd(e),a(s)})}function ad(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:V},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function sd(e){var t=ad(e).next.queue;Bl(e,t,{},Ot())}function $r(){return gt(en)}function ld(){return Pe().memoizedState}function nd(){return Pe().memoizedState}function Pm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Ot();e=_a(a);var s=Ma(t,e,a);s!==null&&(Dt(s,t,a),Cl(s,t,a)),t={cache:Nr()},e.payload=t;return}t=t.return}}function Im(e,t,a){var s=Ot();a={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Fn(e)?rd(t,a):(a=hr(e,t,a,s),a!==null&&(Dt(a,e,s),od(a,t,s)))}function id(e,t,a){var s=Ot();Bl(e,t,a,s)}function Bl(e,t,a,s){var n={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fn(e))rd(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var d=t.lastRenderedState,h=i(d,a);if(n.hasEagerState=!0,n.eagerState=h,Rt(h,d))return En(e,t,n,0),Ge===null&&Cn(),!1}catch{}finally{}if(a=hr(e,t,n,s),a!==null)return Dt(a,e,s),od(a,t,s),!0}return!1}function Fr(e,t,a,s){if(s={lane:2,revertLane:Ro(),action:s,hasEagerState:!1,eagerState:null,next:null},Fn(e)){if(t)throw Error(o(479))}else t=hr(e,a,s,2),t!==null&&Dt(t,e,2)}function Fn(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function rd(e,t){Us=Gn=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function od(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,gc(e,a)}}var Jn={readContext:gt,use:Xn,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je},cd={readContext:gt,use:Xn,useCallback:function(e,t){return Nt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Zu,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,$n(4194308,4,Ku.bind(null,t,e),a)},useLayoutEffect:function(e,t){return $n(4194308,4,e,t)},useInsertionEffect:function(e,t){$n(4,2,e,t)},useMemo:function(e,t){var a=Nt();t=t===void 0?null:t;var s=e();if(os){zt(!0);try{e()}finally{zt(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=Nt();if(a!==void 0){var n=a(t);if(os){zt(!0);try{a(t)}finally{zt(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=Im.bind(null,Ne,e),[s.memoizedState,e]},useRef:function(e){var t=Nt();return e={current:e},t.memoizedState=e},useState:function(e){e=Gr(e);var t=e.queue,a=id.bind(null,Ne,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Xr,useDeferredValue:function(e,t){var a=Nt();return Qr(a,e,t)},useTransition:function(){var e=Gr(!1);return e=td.bind(null,Ne,e.queue,!0,!1),Nt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=Ne,n=Nt();if(Oe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),Ge===null)throw Error(o(349));(Me&124)!==0||Cu(s,t,a)}n.memoizedState=a;var i={value:a,getSnapshot:t};return n.queue=i,Zu(Ou.bind(null,s,i,e),[e]),s.flags|=2048,Ls(9,Zn(),Eu.bind(null,s,i,a,t),null),a},useId:function(){var e=Nt(),t=Ge.identifierPrefix;if(Oe){var a=fa,s=da;a=(s&~(1<<32-xt(s)-1)).toString(32)+a,t="«"+t+"R"+a,a=Vn++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=$m++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:$r,useFormState:Yu,useActionState:Yu,useOptimistic:function(e){var t=Nt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Fr.bind(null,Ne,!0,a),a.dispatch=t,[e,t]},useMemoCache:Hr,useCacheRefresh:function(){return Nt().memoizedState=Pm.bind(null,Ne)}},ud={readContext:gt,use:Xn,useCallback:Pu,useContext:gt,useEffect:$u,useImperativeHandle:Wu,useInsertionEffect:Fu,useLayoutEffect:Ju,useMemo:Iu,useReducer:Qn,useRef:Qu,useState:function(){return Qn(pa)},useDebugValue:Xr,useDeferredValue:function(e,t){var a=Pe();return ed(a,qe.memoizedState,e,t)},useTransition:function(){var e=Qn(pa)[0],t=Pe().memoizedState;return[typeof e=="boolean"?e:kl(e),t]},useSyncExternalStore:Mu,useId:ld,useHostTransitionStatus:$r,useFormState:Gu,useActionState:Gu,useOptimistic:function(e,t){var a=Pe();return zu(a,qe,e,t)},useMemoCache:Hr,useCacheRefresh:nd},ep={readContext:gt,use:Xn,useCallback:Pu,useContext:gt,useEffect:$u,useImperativeHandle:Wu,useInsertionEffect:Fu,useLayoutEffect:Ju,useMemo:Iu,useReducer:Yr,useRef:Qu,useState:function(){return Yr(pa)},useDebugValue:Xr,useDeferredValue:function(e,t){var a=Pe();return qe===null?Qr(a,e,t):ed(a,qe.memoizedState,e,t)},useTransition:function(){var e=Yr(pa)[0],t=Pe().memoizedState;return[typeof e=="boolean"?e:kl(e),t]},useSyncExternalStore:Mu,useId:ld,useHostTransitionStatus:$r,useFormState:Xu,useActionState:Xu,useOptimistic:function(e,t){var a=Pe();return qe!==null?zu(a,qe,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Hr,useCacheRefresh:nd},Ys=null,ql=0;function Kn(e){var t=ql;return ql+=1,Ys===null&&(Ys=[]),wu(Ys,e,t)}function Ul(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Wn(e,t){throw t.$$typeof===q?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function dd(e){var t=e._init;return t(e._payload)}function fd(e){function t(j,N){if(e){var M=j.deletions;M===null?(j.deletions=[N],j.flags|=16):M.push(N)}}function a(j,N){if(!e)return null;for(;N!==null;)t(j,N),N=N.sibling;return null}function s(j){for(var N=new Map;j!==null;)j.key!==null?N.set(j.key,j):N.set(j.index,j),j=j.sibling;return N}function n(j,N){return j=ua(j,N),j.index=0,j.sibling=null,j}function i(j,N,M){return j.index=M,e?(M=j.alternate,M!==null?(M=M.index,M<N?(j.flags|=67108866,N):M):(j.flags|=67108866,N)):(j.flags|=1048576,N)}function d(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function h(j,N,M,Y){return N===null||N.tag!==6?(N=pr(M,j.mode,Y),N.return=j,N):(N=n(N,M),N.return=j,N)}function y(j,N,M,Y){var re=M.type;return re===p?L(j,N,M.props.children,Y,M.key):N!==null&&(N.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Z&&dd(re)===N.type)?(N=n(N,M.props),Ul(N,M),N.return=j,N):(N=Dn(M.type,M.key,M.props,null,j.mode,Y),Ul(N,M),N.return=j,N)}function E(j,N,M,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==M.containerInfo||N.stateNode.implementation!==M.implementation?(N=gr(M,j.mode,Y),N.return=j,N):(N=n(N,M.children||[]),N.return=j,N)}function L(j,N,M,Y,re){return N===null||N.tag!==7?(N=es(M,j.mode,Y,re),N.return=j,N):(N=n(N,M),N.return=j,N)}function X(j,N,M){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=pr(""+N,j.mode,M),N.return=j,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case _:return M=Dn(N.type,N.key,N.props,null,j.mode,M),Ul(M,N),M.return=j,M;case C:return N=gr(N,j.mode,M),N.return=j,N;case Z:var Y=N._init;return N=Y(N._payload),X(j,N,M)}if(K(N)||se(N))return N=es(N,j.mode,M,null),N.return=j,N;if(typeof N.then=="function")return X(j,Kn(N),M);if(N.$$typeof===J)return X(j,qn(j,N),M);Wn(j,N)}return null}function D(j,N,M,Y){var re=N!==null?N.key:null;if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return re!==null?null:h(j,N,""+M,Y);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case _:return M.key===re?y(j,N,M,Y):null;case C:return M.key===re?E(j,N,M,Y):null;case Z:return re=M._init,M=re(M._payload),D(j,N,M,Y)}if(K(M)||se(M))return re!==null?null:L(j,N,M,Y,null);if(typeof M.then=="function")return D(j,N,Kn(M),Y);if(M.$$typeof===J)return D(j,N,qn(j,M),Y);Wn(j,M)}return null}function k(j,N,M,Y,re){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return j=j.get(M)||null,h(N,j,""+Y,re);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case _:return j=j.get(Y.key===null?M:Y.key)||null,y(N,j,Y,re);case C:return j=j.get(Y.key===null?M:Y.key)||null,E(N,j,Y,re);case Z:var Te=Y._init;return Y=Te(Y._payload),k(j,N,M,Y,re)}if(K(Y)||se(Y))return j=j.get(M)||null,L(N,j,Y,re,null);if(typeof Y.then=="function")return k(j,N,M,Kn(Y),re);if(Y.$$typeof===J)return k(j,N,M,qn(N,Y),re);Wn(N,Y)}return null}function we(j,N,M,Y){for(var re=null,Te=null,ue=N,be=N=0,ot=null;ue!==null&&be<M.length;be++){ue.index>be?(ot=ue,ue=null):ot=ue.sibling;var Ee=D(j,ue,M[be],Y);if(Ee===null){ue===null&&(ue=ot);break}e&&ue&&Ee.alternate===null&&t(j,ue),N=i(Ee,N,be),Te===null?re=Ee:Te.sibling=Ee,Te=Ee,ue=ot}if(be===M.length)return a(j,ue),Oe&&as(j,be),re;if(ue===null){for(;be<M.length;be++)ue=X(j,M[be],Y),ue!==null&&(N=i(ue,N,be),Te===null?re=ue:Te.sibling=ue,Te=ue);return Oe&&as(j,be),re}for(ue=s(ue);be<M.length;be++)ot=k(ue,j,be,M[be],Y),ot!==null&&(e&&ot.alternate!==null&&ue.delete(ot.key===null?be:ot.key),N=i(ot,N,be),Te===null?re=ot:Te.sibling=ot,Te=ot);return e&&ue.forEach(function(Za){return t(j,Za)}),Oe&&as(j,be),re}function me(j,N,M,Y){if(M==null)throw Error(o(151));for(var re=null,Te=null,ue=N,be=N=0,ot=null,Ee=M.next();ue!==null&&!Ee.done;be++,Ee=M.next()){ue.index>be?(ot=ue,ue=null):ot=ue.sibling;var Za=D(j,ue,Ee.value,Y);if(Za===null){ue===null&&(ue=ot);break}e&&ue&&Za.alternate===null&&t(j,ue),N=i(Za,N,be),Te===null?re=Za:Te.sibling=Za,Te=Za,ue=ot}if(Ee.done)return a(j,ue),Oe&&as(j,be),re;if(ue===null){for(;!Ee.done;be++,Ee=M.next())Ee=X(j,Ee.value,Y),Ee!==null&&(N=i(Ee,N,be),Te===null?re=Ee:Te.sibling=Ee,Te=Ee);return Oe&&as(j,be),re}for(ue=s(ue);!Ee.done;be++,Ee=M.next())Ee=k(ue,j,be,Ee.value,Y),Ee!==null&&(e&&Ee.alternate!==null&&ue.delete(Ee.key===null?be:Ee.key),N=i(Ee,N,be),Te===null?re=Ee:Te.sibling=Ee,Te=Ee);return e&&ue.forEach(function(t0){return t(j,t0)}),Oe&&as(j,be),re}function He(j,N,M,Y){if(typeof M=="object"&&M!==null&&M.type===p&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case _:e:{for(var re=M.key;N!==null;){if(N.key===re){if(re=M.type,re===p){if(N.tag===7){a(j,N.sibling),Y=n(N,M.props.children),Y.return=j,j=Y;break e}}else if(N.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Z&&dd(re)===N.type){a(j,N.sibling),Y=n(N,M.props),Ul(Y,M),Y.return=j,j=Y;break e}a(j,N);break}else t(j,N);N=N.sibling}M.type===p?(Y=es(M.props.children,j.mode,Y,M.key),Y.return=j,j=Y):(Y=Dn(M.type,M.key,M.props,null,j.mode,Y),Ul(Y,M),Y.return=j,j=Y)}return d(j);case C:e:{for(re=M.key;N!==null;){if(N.key===re)if(N.tag===4&&N.stateNode.containerInfo===M.containerInfo&&N.stateNode.implementation===M.implementation){a(j,N.sibling),Y=n(N,M.children||[]),Y.return=j,j=Y;break e}else{a(j,N);break}else t(j,N);N=N.sibling}Y=gr(M,j.mode,Y),Y.return=j,j=Y}return d(j);case Z:return re=M._init,M=re(M._payload),He(j,N,M,Y)}if(K(M))return we(j,N,M,Y);if(se(M)){if(re=se(M),typeof re!="function")throw Error(o(150));return M=re.call(M),me(j,N,M,Y)}if(typeof M.then=="function")return He(j,N,Kn(M),Y);if(M.$$typeof===J)return He(j,N,qn(j,M),Y);Wn(j,M)}return typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint"?(M=""+M,N!==null&&N.tag===6?(a(j,N.sibling),Y=n(N,M),Y.return=j,j=Y):(a(j,N),Y=pr(M,j.mode,Y),Y.return=j,j=Y),d(j)):a(j,N)}return function(j,N,M,Y){try{ql=0;var re=He(j,N,M,Y);return Ys=null,re}catch(ue){if(ue===_l||ue===Hn)throw ue;var Te=_t(29,ue,null,j.mode);return Te.lanes=Y,Te.return=j,Te}finally{}}}var Gs=fd(!0),hd=fd(!1),Gt=O(null),It=null;function Ea(e){var t=e.alternate;I(et,et.current&1),I(Gt,e),It===null&&(t===null||qs.current!==null||t.memoizedState!==null)&&(It=e)}function md(e){if(e.tag===22){if(I(et,et.current),I(Gt,e),It===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(It=e)}}else Oa()}function Oa(){I(et,et.current),I(Gt,Gt.current)}function ga(e){Q(Gt),It===e&&(It=null),Q(et)}var et=O(0);function Pn(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Ho(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Jr(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Kr={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=Ot(),n=_a(s);n.payload=t,a!=null&&(n.callback=a),t=Ma(e,n,s),t!==null&&(Dt(t,e,s),Cl(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=Ot(),n=_a(s);n.tag=1,n.payload=t,a!=null&&(n.callback=a),t=Ma(e,n,s),t!==null&&(Dt(t,e,s),Cl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Ot(),s=_a(a);s.tag=2,t!=null&&(s.callback=t),t=Ma(e,s,a),t!==null&&(Dt(t,e,a),Cl(t,e,a))}};function pd(e,t,a,s,n,i,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,d):t.prototype&&t.prototype.isPureReactComponent?!yl(a,s)||!yl(n,i):!0}function gd(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&Kr.enqueueReplaceState(t,t.state,null)}function cs(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var n in e)a[n]===void 0&&(a[n]=e[n])}return a}var In=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function bd(e){In(e)}function xd(e){console.error(e)}function vd(e){In(e)}function ei(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function yd(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Wr(e,t,a){return a=_a(a),a.tag=3,a.payload={element:null},a.callback=function(){ei(e,t)},a}function wd(e){return e=_a(e),e.tag=3,e}function Sd(e,t,a,s){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var i=s.value;e.payload=function(){return n(i)},e.callback=function(){yd(t,a,s)}}var d=a.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){yd(t,a,s),typeof n!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var h=s.stack;this.componentDidCatch(s.value,{componentStack:h!==null?h:""})})}function tp(e,t,a,s,n){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&jl(t,a,n,!0),a=Gt.current,a!==null){switch(a.tag){case 13:return It===null?So():a.alternate===null&&Ze===0&&(Ze=3),a.flags&=-257,a.flags|=65536,a.lanes=n,s===Ar?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),To(e,s,n)),!1;case 22:return a.flags|=65536,s===Ar?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),To(e,s,n)),!1}throw Error(o(435,a.tag))}return To(e,s,n),So(),!1}if(Oe)return t=Gt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==vr&&(e=Error(o(422),{cause:s}),Tl(Ut(e,a)))):(s!==vr&&(t=Error(o(423),{cause:s}),Tl(Ut(t,a))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=Ut(s,a),n=Wr(e.stateNode,s,n),Mr(e,n),Ze!==4&&(Ze=2)),!1;var i=Error(o(520),{cause:s});if(i=Ut(i,a),Ql===null?Ql=[i]:Ql.push(i),Ze!==4&&(Ze=2),t===null)return!0;s=Ut(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,e=Wr(a.stateNode,s,e),Mr(a,e),!1;case 1:if(t=a.type,i=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Ua===null||!Ua.has(i))))return a.flags|=65536,n&=-n,a.lanes|=n,n=wd(n),Sd(n,e,a,s),Mr(a,n),!1}a=a.return}while(a!==null);return!1}var Nd=Error(o(461)),it=!1;function ut(e,t,a,s){t.child=e===null?hd(t,null,a,s):Gs(t,e.child,a,s)}function Td(e,t,a,s,n){a=a.render;var i=t.ref;if("ref"in s){var d={};for(var h in s)h!=="ref"&&(d[h]=s[h])}else d=s;return is(t),s=kr(e,t,a,d,i,n),h=zr(),e!==null&&!it?(Br(e,t,n),ba(e,t,n)):(Oe&&h&&br(t),t.flags|=1,ut(e,t,s,n),t.child)}function jd(e,t,a,s,n){if(e===null){var i=a.type;return typeof i=="function"&&!mr(i)&&i.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=i,Ad(e,t,i,s,n)):(e=Dn(a.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!no(e,n)){var d=i.memoizedProps;if(a=a.compare,a=a!==null?a:yl,a(d,s)&&e.ref===t.ref)return ba(e,t,n)}return t.flags|=1,e=ua(i,s),e.ref=t.ref,e.return=t,t.child=e}function Ad(e,t,a,s,n){if(e!==null){var i=e.memoizedProps;if(yl(i,s)&&e.ref===t.ref)if(it=!1,t.pendingProps=s=i,no(e,n))(e.flags&131072)!==0&&(it=!0);else return t.lanes=e.lanes,ba(e,t,n)}return Pr(e,t,a,s,n)}function Rd(e,t,a){var s=t.pendingProps,n=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((t.flags&128)!==0){if(s=i!==null?i.baseLanes|a:a,e!==null){for(n=t.child=e.child,i=0;n!==null;)i=i|n.lanes|n.childLanes,n=n.sibling;t.childLanes=i&~s}else t.childLanes=0,t.child=null;return _d(e,t,s,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Un(t,i!==null?i.cachePool:null),i!==null?Au(t,i):Er(),md(t);else return t.lanes=t.childLanes=536870912,_d(e,t,i!==null?i.baseLanes|a:a,a)}else i!==null?(Un(t,i.cachePool),Au(t,i),Oa(),t.memoizedState=null):(e!==null&&Un(t,null),Er(),Oa());return ut(e,t,n,a),t.child}function _d(e,t,a,s){var n=jr();return n=n===null?null:{parent:Ie._currentValue,pool:n},t.memoizedState={baseLanes:a,cachePool:n},e!==null&&Un(t,null),Er(),md(t),e!==null&&jl(e,t,s,!0),null}function ti(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Pr(e,t,a,s,n){return is(t),a=kr(e,t,a,s,void 0,n),s=zr(),e!==null&&!it?(Br(e,t,n),ba(e,t,n)):(Oe&&s&&br(t),t.flags|=1,ut(e,t,a,n),t.child)}function Md(e,t,a,s,n,i){return is(t),t.updateQueue=null,a=_u(t,s,a,n),Ru(e),s=zr(),e!==null&&!it?(Br(e,t,i),ba(e,t,i)):(Oe&&s&&br(t),t.flags|=1,ut(e,t,a,i),t.child)}function Cd(e,t,a,s,n){if(is(t),t.stateNode===null){var i=Os,d=a.contextType;typeof d=="object"&&d!==null&&(i=gt(d)),i=new a(s,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Kr,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=s,i.state=t.memoizedState,i.refs={},Rr(t),d=a.contextType,i.context=typeof d=="object"&&d!==null?gt(d):Os,i.state=t.memoizedState,d=a.getDerivedStateFromProps,typeof d=="function"&&(Jr(t,a,d,s),i.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(d=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),d!==i.state&&Kr.enqueueReplaceState(i,i.state,null),Ol(t,s,i,n),El(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){i=t.stateNode;var h=t.memoizedProps,y=cs(a,h);i.props=y;var E=i.context,L=a.contextType;d=Os,typeof L=="object"&&L!==null&&(d=gt(L));var X=a.getDerivedStateFromProps;L=typeof X=="function"||typeof i.getSnapshotBeforeUpdate=="function",h=t.pendingProps!==h,L||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(h||E!==d)&&gd(t,i,s,d),Ra=!1;var D=t.memoizedState;i.state=D,Ol(t,s,i,n),El(),E=t.memoizedState,h||D!==E||Ra?(typeof X=="function"&&(Jr(t,a,X,s),E=t.memoizedState),(y=Ra||pd(t,a,y,s,D,E,d))?(L||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=E),i.props=s,i.state=E,i.context=d,s=y):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,_r(e,t),d=t.memoizedProps,L=cs(a,d),i.props=L,X=t.pendingProps,D=i.context,E=a.contextType,y=Os,typeof E=="object"&&E!==null&&(y=gt(E)),h=a.getDerivedStateFromProps,(E=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(d!==X||D!==y)&&gd(t,i,s,y),Ra=!1,D=t.memoizedState,i.state=D,Ol(t,s,i,n),El();var k=t.memoizedState;d!==X||D!==k||Ra||e!==null&&e.dependencies!==null&&Bn(e.dependencies)?(typeof h=="function"&&(Jr(t,a,h,s),k=t.memoizedState),(L=Ra||pd(t,a,L,s,D,k,y)||e!==null&&e.dependencies!==null&&Bn(e.dependencies))?(E||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,k,y),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,k,y)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||d===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=k),i.props=s,i.state=k,i.context=y,s=L):(typeof i.componentDidUpdate!="function"||d===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),s=!1)}return i=s,ti(e,t),s=(t.flags&128)!==0,i||s?(i=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&s?(t.child=Gs(t,e.child,null,n),t.child=Gs(t,null,a,n)):ut(e,t,a,n),t.memoizedState=i.state,e=t.child):e=ba(e,t,n),e}function Ed(e,t,a,s){return Nl(),t.flags|=256,ut(e,t,a,s),t.child}var Ir={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eo(e){return{baseLanes:e,cachePool:xu()}}function to(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Vt),e}function Od(e,t,a){var s=t.pendingProps,n=!1,i=(t.flags&128)!==0,d;if((d=i)||(d=e!==null&&e.memoizedState===null?!1:(et.current&2)!==0),d&&(n=!0,t.flags&=-129),d=(t.flags&32)!==0,t.flags&=-33,e===null){if(Oe){if(n?Ea(t):Oa(),Oe){var h=Qe,y;if(y=h){e:{for(y=h,h=Pt;y.nodeType!==8;){if(!h){h=null;break e}if(y=Jt(y.nextSibling),y===null){h=null;break e}}h=y}h!==null?(t.memoizedState={dehydrated:h,treeContext:ts!==null?{id:da,overflow:fa}:null,retryLane:536870912,hydrationErrors:null},y=_t(18,null,null,0),y.stateNode=h,y.return=t,t.child=y,vt=t,Qe=null,y=!0):y=!1}y||ls(t)}if(h=t.memoizedState,h!==null&&(h=h.dehydrated,h!==null))return Ho(h)?t.lanes=32:t.lanes=536870912,null;ga(t)}return h=s.children,s=s.fallback,n?(Oa(),n=t.mode,h=ai({mode:"hidden",children:h},n),s=es(s,n,a,null),h.return=t,s.return=t,h.sibling=s,t.child=h,n=t.child,n.memoizedState=eo(a),n.childLanes=to(e,d,a),t.memoizedState=Ir,s):(Ea(t),ao(t,h))}if(y=e.memoizedState,y!==null&&(h=y.dehydrated,h!==null)){if(i)t.flags&256?(Ea(t),t.flags&=-257,t=so(e,t,a)):t.memoizedState!==null?(Oa(),t.child=e.child,t.flags|=128,t=null):(Oa(),n=s.fallback,h=t.mode,s=ai({mode:"visible",children:s.children},h),n=es(n,h,a,null),n.flags|=2,s.return=t,n.return=t,s.sibling=n,t.child=s,Gs(t,e.child,null,a),s=t.child,s.memoizedState=eo(a),s.childLanes=to(e,d,a),t.memoizedState=Ir,t=n);else if(Ea(t),Ho(h)){if(d=h.nextSibling&&h.nextSibling.dataset,d)var E=d.dgst;d=E,s=Error(o(419)),s.stack="",s.digest=d,Tl({value:s,source:null,stack:null}),t=so(e,t,a)}else if(it||jl(e,t,a,!1),d=(a&e.childLanes)!==0,it||d){if(d=Ge,d!==null&&(s=a&-a,s=(s&42)!==0?1:Hi(s),s=(s&(d.suspendedLanes|a))!==0?0:s,s!==0&&s!==y.retryLane))throw y.retryLane=s,Es(e,s),Dt(d,e,s),Nd;h.data==="$?"||So(),t=so(e,t,a)}else h.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=y.treeContext,Qe=Jt(h.nextSibling),vt=t,Oe=!0,ss=null,Pt=!1,e!==null&&(Lt[Yt++]=da,Lt[Yt++]=fa,Lt[Yt++]=ts,da=e.id,fa=e.overflow,ts=t),t=ao(t,s.children),t.flags|=4096);return t}return n?(Oa(),n=s.fallback,h=t.mode,y=e.child,E=y.sibling,s=ua(y,{mode:"hidden",children:s.children}),s.subtreeFlags=y.subtreeFlags&65011712,E!==null?n=ua(E,n):(n=es(n,h,a,null),n.flags|=2),n.return=t,s.return=t,s.sibling=n,t.child=s,s=n,n=t.child,h=e.child.memoizedState,h===null?h=eo(a):(y=h.cachePool,y!==null?(E=Ie._currentValue,y=y.parent!==E?{parent:E,pool:E}:y):y=xu(),h={baseLanes:h.baseLanes|a,cachePool:y}),n.memoizedState=h,n.childLanes=to(e,d,a),t.memoizedState=Ir,s):(Ea(t),a=e.child,e=a.sibling,a=ua(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(d=t.deletions,d===null?(t.deletions=[e],t.flags|=16):d.push(e)),t.child=a,t.memoizedState=null,a)}function ao(e,t){return t=ai({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ai(e,t){return e=_t(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function so(e,t,a){return Gs(t,e.child,null,a),e=ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dd(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),wr(e.return,t,a)}function lo(e,t,a,s,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=a,i.tailMode=n)}function kd(e,t,a){var s=t.pendingProps,n=s.revealOrder,i=s.tail;if(ut(e,t,s.children,a),s=et.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dd(e,a,t);else if(e.tag===19)Dd(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(I(et,s),n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&Pn(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),lo(t,!1,n,a,i);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Pn(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}lo(t,!0,a,null,i);break;case"together":lo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ba(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),qa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(jl(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=ua(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ua(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function no(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Bn(e)))}function ap(e,t,a){switch(t.tag){case 3:ce(t,t.stateNode.containerInfo),Aa(t,Ie,e.memoizedState.cache),Nl();break;case 27:case 5:je(t);break;case 4:ce(t,t.stateNode.containerInfo);break;case 10:Aa(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Ea(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Od(e,t,a):(Ea(t),e=ba(e,t,a),e!==null?e.sibling:null);Ea(t);break;case 19:var n=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(jl(e,t,a,!1),s=(a&t.childLanes)!==0),n){if(s)return kd(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),I(et,et.current),s)break;return null;case 22:case 23:return t.lanes=0,Rd(e,t,a);case 24:Aa(t,Ie,e.memoizedState.cache)}return ba(e,t,a)}function zd(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)it=!0;else{if(!no(e,a)&&(t.flags&128)===0)return it=!1,ap(e,t,a);it=(e.flags&131072)!==0}else it=!1,Oe&&(t.flags&1048576)!==0&&du(t,zn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,n=s._init;if(s=n(s._payload),t.type=s,typeof s=="function")mr(s)?(e=cs(s,e),t.tag=1,t=Cd(null,t,s,e,a)):(t.tag=0,t=Pr(null,t,s,e,a));else{if(s!=null){if(n=s.$$typeof,n===ee){t.tag=11,t=Td(null,t,s,e,a);break e}else if(n===B){t.tag=14,t=jd(null,t,s,e,a);break e}}throw t=he(s)||s,Error(o(306,t,""))}}return t;case 0:return Pr(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,n=cs(s,t.pendingProps),Cd(e,t,s,n,a);case 3:e:{if(ce(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var i=t.memoizedState;n=i.element,_r(e,t),Ol(t,s,null,a);var d=t.memoizedState;if(s=d.cache,Aa(t,Ie,s),s!==i.cache&&Sr(t,[Ie],a,!0),El(),s=d.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:d.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=Ed(e,t,s,a);break e}else if(s!==n){n=Ut(Error(o(424)),t),Tl(n),t=Ed(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Qe=Jt(e.firstChild),vt=t,Oe=!0,ss=null,Pt=!0,a=hd(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Nl(),s===n){t=ba(e,t,a);break e}ut(e,t,s,a)}t=t.child}return t;case 26:return ti(e,t),e===null?(a=Lf(t.type,null,t.pendingProps,null))?t.memoizedState=a:Oe||(a=t.type,e=t.pendingProps,s=gi(G.current).createElement(a),s[pt]=t,s[wt]=e,ft(s,a,e),nt(s),t.stateNode=s):t.memoizedState=Lf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return je(t),e===null&&Oe&&(s=t.stateNode=qf(t.type,t.pendingProps,G.current),vt=t,Pt=!0,n=Qe,Ya(t.type)?(Lo=n,Qe=Jt(s.firstChild)):Qe=n),ut(e,t,t.pendingProps.children,a),ti(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Oe&&((n=s=Qe)&&(s=Cp(s,t.type,t.pendingProps,Pt),s!==null?(t.stateNode=s,vt=t,Qe=Jt(s.firstChild),Pt=!1,n=!0):n=!1),n||ls(t)),je(t),n=t.type,i=t.pendingProps,d=e!==null?e.memoizedProps:null,s=i.children,Bo(n,i)?s=null:d!==null&&Bo(n,d)&&(t.flags|=32),t.memoizedState!==null&&(n=kr(e,t,Fm,null,null,a),en._currentValue=n),ti(e,t),ut(e,t,s,a),t.child;case 6:return e===null&&Oe&&((e=a=Qe)&&(a=Ep(a,t.pendingProps,Pt),a!==null?(t.stateNode=a,vt=t,Qe=null,e=!0):e=!1),e||ls(t)),null;case 13:return Od(e,t,a);case 4:return ce(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Gs(t,null,s,a):ut(e,t,s,a),t.child;case 11:return Td(e,t,t.type,t.pendingProps,a);case 7:return ut(e,t,t.pendingProps,a),t.child;case 8:return ut(e,t,t.pendingProps.children,a),t.child;case 12:return ut(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,Aa(t,t.type,s.value),ut(e,t,s.children,a),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,is(t),n=gt(n),s=s(n),t.flags|=1,ut(e,t,s,a),t.child;case 14:return jd(e,t,t.type,t.pendingProps,a);case 15:return Ad(e,t,t.type,t.pendingProps,a);case 19:return kd(e,t,a);case 31:return s=t.pendingProps,a=t.mode,s={mode:s.mode,children:s.children},e===null?(a=ai(s,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=ua(e.child,s),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return Rd(e,t,a);case 24:return is(t),s=gt(Ie),e===null?(n=jr(),n===null&&(n=Ge,i=Nr(),n.pooledCache=i,i.refCount++,i!==null&&(n.pooledCacheLanes|=a),n=i),t.memoizedState={parent:s,cache:n},Rr(t),Aa(t,Ie,n)):((e.lanes&a)!==0&&(_r(e,t),Ol(t,null,null,a),El()),n=e.memoizedState,i=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),Aa(t,Ie,s)):(s=i.cache,Aa(t,Ie,s),s!==n.cache&&Sr(t,[Ie],a,!0))),ut(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function xa(e){e.flags|=4}function Bd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Qf(t)){if(t=Gt.current,t!==null&&((Me&4194048)===Me?It!==null:(Me&62914560)!==Me&&(Me&536870912)===0||t!==It))throw Ml=Ar,vu;e.flags|=8192}}function si(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?mc():536870912,e.lanes|=t,Zs|=t)}function Hl(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function sp(e,t,a){var s=t.pendingProps;switch(xr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return Xe(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ma(Ie),ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Sl(t)?xa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,mu())),Xe(t),null;case 26:return a=t.memoizedState,e===null?(xa(t),a!==null?(Xe(t),Bd(t,a)):(Xe(t),t.flags&=-16777217)):a?a!==e.memoizedState?(xa(t),Xe(t),Bd(t,a)):(Xe(t),t.flags&=-16777217):(e.memoizedProps!==s&&xa(t),Xe(t),t.flags&=-16777217),null;case 27:ke(t),a=G.current;var n=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&xa(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return Xe(t),null}e=ne.current,Sl(t)?fu(t):(e=qf(n,s,a),t.stateNode=e,xa(t))}return Xe(t),null;case 5:if(ke(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&xa(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return Xe(t),null}if(e=ne.current,Sl(t))fu(t);else{switch(n=gi(G.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?n.createElement("select",{is:s.is}):n.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?n.createElement(a,{is:s.is}):n.createElement(a)}}e[pt]=t,e[wt]=s;e:for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(ft(e,a,s),a){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&xa(t)}}return Xe(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&xa(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=G.current,Sl(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,n=vt,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[pt]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||Cf(e.nodeValue,a)),e||ls(t)}else e=gi(e).createTextNode(s),e[pt]=t,t.stateNode=e}return Xe(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=Sl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(o(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));n[pt]=t}else Nl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),n=!1}else n=mu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(ga(t),t):(ga(t),null)}if(ga(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=s!==null,e=e!==null&&e.memoizedState!==null,a){s=t.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool);var i=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==n&&(s.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),si(t,t.updateQueue),Xe(t),null;case 4:return ye(),e===null&&Eo(t.stateNode.containerInfo),Xe(t),null;case 10:return ma(t.type),Xe(t),null;case 19:if(Q(et),n=t.memoizedState,n===null)return Xe(t),null;if(s=(t.flags&128)!==0,i=n.rendering,i===null)if(s)Hl(n,!1);else{if(Ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Pn(e),i!==null){for(t.flags|=128,Hl(n,!1),e=i.updateQueue,t.updateQueue=e,si(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)uu(a,e),a=a.sibling;return I(et,et.current&1|2),t.child}e=e.sibling}n.tail!==null&&yt()>ii&&(t.flags|=128,s=!0,Hl(n,!1),t.lanes=4194304)}else{if(!s)if(e=Pn(i),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,si(t,e),Hl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!i.alternate&&!Oe)return Xe(t),null}else 2*yt()-n.renderingStartTime>ii&&a!==536870912&&(t.flags|=128,s=!0,Hl(n,!1),t.lanes=4194304);n.isBackwards?(i.sibling=t.child,t.child=i):(e=n.last,e!==null?e.sibling=i:t.child=i,n.last=i)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=yt(),t.sibling=null,e=et.current,I(et,s?e&1|2:e&1),t):(Xe(t),null);case 22:case 23:return ga(t),Or(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),a=t.updateQueue,a!==null&&si(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&Q(rs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ma(Ie),Xe(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function lp(e,t){switch(xr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ma(Ie),ye(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ke(t),null;case 13:if(ga(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Nl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Q(et),null;case 4:return ye(),null;case 10:return ma(t.type),null;case 22:case 23:return ga(t),Or(),e!==null&&Q(rs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ma(Ie),null;case 25:return null;default:return null}}function qd(e,t){switch(xr(t),t.tag){case 3:ma(Ie),ye();break;case 26:case 27:case 5:ke(t);break;case 4:ye();break;case 13:ga(t);break;case 19:Q(et);break;case 10:ma(t.type);break;case 22:case 23:ga(t),Or(),e!==null&&Q(rs);break;case 24:ma(Ie)}}function Ll(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var n=s.next;a=n;do{if((a.tag&e)===e){s=void 0;var i=a.create,d=a.inst;s=i(),d.destroy=s}a=a.next}while(a!==n)}}catch(h){Le(t,t.return,h)}}function Da(e,t,a){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var i=n.next;s=i;do{if((s.tag&e)===e){var d=s.inst,h=d.destroy;if(h!==void 0){d.destroy=void 0,n=t;var y=a,E=h;try{E()}catch(L){Le(n,y,L)}}}s=s.next}while(s!==i)}}catch(L){Le(t,t.return,L)}}function Ud(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{ju(t,a)}catch(s){Le(e,e.return,s)}}}function Hd(e,t,a){a.props=cs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Le(e,t,s)}}function Yl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(n){Le(e,t,n)}}function ea(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(n){Le(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){Le(e,t,n)}else a.current=null}function Ld(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(n){Le(e,e.return,n)}}function io(e,t,a){try{var s=e.stateNode;jp(s,e.type,a,t),s[wt]=t}catch(n){Le(e,e.return,n)}}function Yd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ya(e.type)||e.tag===4}function ro(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ya(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oo(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=pi));else if(s!==4&&(s===27&&Ya(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(oo(e,t,a),e=e.sibling;e!==null;)oo(e,t,a),e=e.sibling}function li(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&Ya(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(li(e,t,a),e=e.sibling;e!==null;)li(e,t,a),e=e.sibling}function Gd(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ft(t,s,a),t[pt]=e,t[wt]=a}catch(i){Le(e,e.return,i)}}var va=!1,Ke=!1,co=!1,Vd=typeof WeakSet=="function"?WeakSet:Set,rt=null;function np(e,t){if(e=e.containerInfo,ko=Si,e=eu(e),rr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var n=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break e}var d=0,h=-1,y=-1,E=0,L=0,X=e,D=null;t:for(;;){for(var k;X!==a||n!==0&&X.nodeType!==3||(h=d+n),X!==i||s!==0&&X.nodeType!==3||(y=d+s),X.nodeType===3&&(d+=X.nodeValue.length),(k=X.firstChild)!==null;)D=X,X=k;for(;;){if(X===e)break t;if(D===a&&++E===n&&(h=d),D===i&&++L===s&&(y=d),(k=X.nextSibling)!==null)break;X=D,D=X.parentNode}X=k}a=h===-1||y===-1?null:{start:h,end:y}}else a=null}a=a||{start:0,end:0}}else a=null;for(zo={focusedElem:e,selectionRange:a},Si=!1,rt=t;rt!==null;)if(t=rt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,rt=e;else for(;rt!==null;){switch(t=rt,i=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,a=t,n=i.memoizedProps,i=i.memoizedState,s=a.stateNode;try{var we=cs(a.type,n,a.elementType===a.type);e=s.getSnapshotBeforeUpdate(we,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(me){Le(a,a.return,me)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Uo(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Uo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,rt=e;break}rt=t.return}}function Xd(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:ka(e,a),s&4&&Ll(5,a);break;case 1:if(ka(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(d){Le(a,a.return,d)}else{var n=cs(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(d){Le(a,a.return,d)}}s&64&&Ud(a),s&512&&Yl(a,a.return);break;case 3:if(ka(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{ju(e,t)}catch(d){Le(a,a.return,d)}}break;case 27:t===null&&s&4&&Gd(a);case 26:case 5:ka(e,a),t===null&&s&4&&Ld(a),s&512&&Yl(a,a.return);break;case 12:ka(e,a);break;case 13:ka(e,a),s&4&&$d(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=mp.bind(null,a),Op(e,a))));break;case 22:if(s=a.memoizedState!==null||va,!s){t=t!==null&&t.memoizedState!==null||Ke,n=va;var i=Ke;va=s,(Ke=t)&&!i?za(e,a,(a.subtreeFlags&8772)!==0):ka(e,a),va=n,Ke=i}break;case 30:break;default:ka(e,a)}}function Qd(e){var t=e.alternate;t!==null&&(e.alternate=null,Qd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Gi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ve=null,Tt=!1;function ya(e,t,a){for(a=a.child;a!==null;)Zd(e,t,a),a=a.sibling}function Zd(e,t,a){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(Zt,a)}catch{}switch(a.tag){case 26:Ke||ea(a,t),ya(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ke||ea(a,t);var s=Ve,n=Tt;Ya(a.type)&&(Ve=a.stateNode,Tt=!1),ya(e,t,a),Kl(a.stateNode),Ve=s,Tt=n;break;case 5:Ke||ea(a,t);case 6:if(s=Ve,n=Tt,Ve=null,ya(e,t,a),Ve=s,Tt=n,Ve!==null)if(Tt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(a.stateNode)}catch(i){Le(a,t,i)}else try{Ve.removeChild(a.stateNode)}catch(i){Le(a,t,i)}break;case 18:Ve!==null&&(Tt?(e=Ve,zf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ln(e)):zf(Ve,a.stateNode));break;case 4:s=Ve,n=Tt,Ve=a.stateNode.containerInfo,Tt=!0,ya(e,t,a),Ve=s,Tt=n;break;case 0:case 11:case 14:case 15:Ke||Da(2,a,t),Ke||Da(4,a,t),ya(e,t,a);break;case 1:Ke||(ea(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&Hd(a,t,s)),ya(e,t,a);break;case 21:ya(e,t,a);break;case 22:Ke=(s=Ke)||a.memoizedState!==null,ya(e,t,a),Ke=s;break;default:ya(e,t,a)}}function $d(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ln(e)}catch(a){Le(t,t.return,a)}}function ip(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Vd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Vd),t;default:throw Error(o(435,e.tag))}}function uo(e,t){var a=ip(e);t.forEach(function(s){var n=pp.bind(null,e,s);a.has(s)||(a.add(s),s.then(n,n))})}function Mt(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var n=a[s],i=e,d=t,h=d;e:for(;h!==null;){switch(h.tag){case 27:if(Ya(h.type)){Ve=h.stateNode,Tt=!1;break e}break;case 5:Ve=h.stateNode,Tt=!1;break e;case 3:case 4:Ve=h.stateNode.containerInfo,Tt=!0;break e}h=h.return}if(Ve===null)throw Error(o(160));Zd(i,d,n),Ve=null,Tt=!1,i=n.alternate,i!==null&&(i.return=null),n.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Fd(t,e),t=t.sibling}var Ft=null;function Fd(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Mt(t,e),Ct(e),s&4&&(Da(3,e,e.return),Ll(3,e),Da(5,e,e.return));break;case 1:Mt(t,e),Ct(e),s&512&&(Ke||a===null||ea(a,a.return)),s&64&&va&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var n=Ft;if(Mt(t,e),Ct(e),s&512&&(Ke||a===null||ea(a,a.return)),s&4){var i=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":i=n.getElementsByTagName("title")[0],(!i||i[dl]||i[pt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=n.createElement(s),n.head.insertBefore(i,n.querySelector("head > title"))),ft(i,s,a),i[pt]=e,nt(i),s=i;break e;case"link":var d=Vf("link","href",n).get(s+(a.href||""));if(d){for(var h=0;h<d.length;h++)if(i=d[h],i.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&i.getAttribute("rel")===(a.rel==null?null:a.rel)&&i.getAttribute("title")===(a.title==null?null:a.title)&&i.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){d.splice(h,1);break t}}i=n.createElement(s),ft(i,s,a),n.head.appendChild(i);break;case"meta":if(d=Vf("meta","content",n).get(s+(a.content||""))){for(h=0;h<d.length;h++)if(i=d[h],i.getAttribute("content")===(a.content==null?null:""+a.content)&&i.getAttribute("name")===(a.name==null?null:a.name)&&i.getAttribute("property")===(a.property==null?null:a.property)&&i.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&i.getAttribute("charset")===(a.charSet==null?null:a.charSet)){d.splice(h,1);break t}}i=n.createElement(s),ft(i,s,a),n.head.appendChild(i);break;default:throw Error(o(468,s))}i[pt]=e,nt(i),s=i}e.stateNode=s}else Xf(n,e.type,e.stateNode);else e.stateNode=Gf(n,s,e.memoizedProps);else i!==s?(i===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):i.count--,s===null?Xf(n,e.type,e.stateNode):Gf(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&io(e,e.memoizedProps,a.memoizedProps)}break;case 27:Mt(t,e),Ct(e),s&512&&(Ke||a===null||ea(a,a.return)),a!==null&&s&4&&io(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Mt(t,e),Ct(e),s&512&&(Ke||a===null||ea(a,a.return)),e.flags&32){n=e.stateNode;try{Ts(n,"")}catch(k){Le(e,e.return,k)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,io(e,n,a!==null?a.memoizedProps:n)),s&1024&&(co=!0);break;case 6:if(Mt(t,e),Ct(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(k){Le(e,e.return,k)}}break;case 3:if(vi=null,n=Ft,Ft=bi(t.containerInfo),Mt(t,e),Ft=n,Ct(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{ln(t.containerInfo)}catch(k){Le(e,e.return,k)}co&&(co=!1,Jd(e));break;case 4:s=Ft,Ft=bi(e.stateNode.containerInfo),Mt(t,e),Ct(e),Ft=s;break;case 12:Mt(t,e),Ct(e);break;case 13:Mt(t,e),Ct(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(bo=yt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,uo(e,s)));break;case 22:n=e.memoizedState!==null;var y=a!==null&&a.memoizedState!==null,E=va,L=Ke;if(va=E||n,Ke=L||y,Mt(t,e),Ke=L,va=E,Ct(e),s&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(a===null||y||va||Ke||us(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){y=a=t;try{if(i=y.stateNode,n)d=i.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{h=y.stateNode;var X=y.memoizedProps.style,D=X!=null&&X.hasOwnProperty("display")?X.display:null;h.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(k){Le(y,y.return,k)}}}else if(t.tag===6){if(a===null){y=t;try{y.stateNode.nodeValue=n?"":y.memoizedProps}catch(k){Le(y,y.return,k)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,uo(e,a))));break;case 19:Mt(t,e),Ct(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,uo(e,s)));break;case 30:break;case 21:break;default:Mt(t,e),Ct(e)}}function Ct(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(Yd(s)){a=s;break}s=s.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var n=a.stateNode,i=ro(e);li(e,i,n);break;case 5:var d=a.stateNode;a.flags&32&&(Ts(d,""),a.flags&=-33);var h=ro(e);li(e,h,d);break;case 3:case 4:var y=a.stateNode.containerInfo,E=ro(e);oo(e,E,y);break;default:throw Error(o(161))}}catch(L){Le(e,e.return,L)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Jd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ka(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Xd(e,t.alternate,t),t=t.sibling}function us(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Da(4,t,t.return),us(t);break;case 1:ea(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Hd(t,t.return,a),us(t);break;case 27:Kl(t.stateNode);case 26:case 5:ea(t,t.return),us(t);break;case 22:t.memoizedState===null&&us(t);break;case 30:us(t);break;default:us(t)}e=e.sibling}}function za(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,n=e,i=t,d=i.flags;switch(i.tag){case 0:case 11:case 15:za(n,i,a),Ll(4,i);break;case 1:if(za(n,i,a),s=i,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(E){Le(s,s.return,E)}if(s=i,n=s.updateQueue,n!==null){var h=s.stateNode;try{var y=n.shared.hiddenCallbacks;if(y!==null)for(n.shared.hiddenCallbacks=null,n=0;n<y.length;n++)Tu(y[n],h)}catch(E){Le(s,s.return,E)}}a&&d&64&&Ud(i),Yl(i,i.return);break;case 27:Gd(i);case 26:case 5:za(n,i,a),a&&s===null&&d&4&&Ld(i),Yl(i,i.return);break;case 12:za(n,i,a);break;case 13:za(n,i,a),a&&d&4&&$d(n,i);break;case 22:i.memoizedState===null&&za(n,i,a),Yl(i,i.return);break;case 30:break;default:za(n,i,a)}t=t.sibling}}function fo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Al(a))}function ho(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Al(e))}function ta(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Kd(e,t,a,s),t=t.sibling}function Kd(e,t,a,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:ta(e,t,a,s),n&2048&&Ll(9,t);break;case 1:ta(e,t,a,s);break;case 3:ta(e,t,a,s),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Al(e)));break;case 12:if(n&2048){ta(e,t,a,s),e=t.stateNode;try{var i=t.memoizedProps,d=i.id,h=i.onPostCommit;typeof h=="function"&&h(d,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(y){Le(t,t.return,y)}}else ta(e,t,a,s);break;case 13:ta(e,t,a,s);break;case 23:break;case 22:i=t.stateNode,d=t.alternate,t.memoizedState!==null?i._visibility&2?ta(e,t,a,s):Gl(e,t):i._visibility&2?ta(e,t,a,s):(i._visibility|=2,Vs(e,t,a,s,(t.subtreeFlags&10256)!==0)),n&2048&&fo(d,t);break;case 24:ta(e,t,a,s),n&2048&&ho(t.alternate,t);break;default:ta(e,t,a,s)}}function Vs(e,t,a,s,n){for(n=n&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var i=e,d=t,h=a,y=s,E=d.flags;switch(d.tag){case 0:case 11:case 15:Vs(i,d,h,y,n),Ll(8,d);break;case 23:break;case 22:var L=d.stateNode;d.memoizedState!==null?L._visibility&2?Vs(i,d,h,y,n):Gl(i,d):(L._visibility|=2,Vs(i,d,h,y,n)),n&&E&2048&&fo(d.alternate,d);break;case 24:Vs(i,d,h,y,n),n&&E&2048&&ho(d.alternate,d);break;default:Vs(i,d,h,y,n)}t=t.sibling}}function Gl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,n=s.flags;switch(s.tag){case 22:Gl(a,s),n&2048&&fo(s.alternate,s);break;case 24:Gl(a,s),n&2048&&ho(s.alternate,s);break;default:Gl(a,s)}t=t.sibling}}var Vl=8192;function Xs(e){if(e.subtreeFlags&Vl)for(e=e.child;e!==null;)Wd(e),e=e.sibling}function Wd(e){switch(e.tag){case 26:Xs(e),e.flags&Vl&&e.memoizedState!==null&&Qp(Ft,e.memoizedState,e.memoizedProps);break;case 5:Xs(e);break;case 3:case 4:var t=Ft;Ft=bi(e.stateNode.containerInfo),Xs(e),Ft=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Vl,Vl=16777216,Xs(e),Vl=t):Xs(e));break;default:Xs(e)}}function Pd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Xl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];rt=s,ef(s,e)}Pd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Id(e),e=e.sibling}function Id(e){switch(e.tag){case 0:case 11:case 15:Xl(e),e.flags&2048&&Da(9,e,e.return);break;case 3:Xl(e);break;case 12:Xl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ni(e)):Xl(e);break;default:Xl(e)}}function ni(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];rt=s,ef(s,e)}Pd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Da(8,t,t.return),ni(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,ni(t));break;default:ni(t)}e=e.sibling}}function ef(e,t){for(;rt!==null;){var a=rt;switch(a.tag){case 0:case 11:case 15:Da(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Al(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,rt=s;else e:for(a=e;rt!==null;){s=rt;var n=s.sibling,i=s.return;if(Qd(s),s===a){rt=null;break e}if(n!==null){n.return=i,rt=n;break e}rt=i}}}var rp={getCacheForType:function(e){var t=gt(Ie),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},op=typeof WeakMap=="function"?WeakMap:Map,ze=0,Ge=null,Ae=null,Me=0,Be=0,Et=null,Ba=!1,Qs=!1,mo=!1,wa=0,Ze=0,qa=0,ds=0,po=0,Vt=0,Zs=0,Ql=null,jt=null,go=!1,bo=0,ii=1/0,ri=null,Ua=null,dt=0,Ha=null,$s=null,Fs=0,xo=0,vo=null,tf=null,Zl=0,yo=null;function Ot(){if((ze&2)!==0&&Me!==0)return Me&-Me;if(A.T!==null){var e=zs;return e!==0?e:Ro()}return bc()}function af(){Vt===0&&(Vt=(Me&536870912)===0||Oe?hc():536870912);var e=Gt.current;return e!==null&&(e.flags|=32),Vt}function Dt(e,t,a){(e===Ge&&(Be===2||Be===9)||e.cancelPendingCommit!==null)&&(Js(e,0),La(e,Me,Vt,!1)),ul(e,a),((ze&2)===0||e!==Ge)&&(e===Ge&&((ze&2)===0&&(ds|=a),Ze===4&&La(e,Me,Vt,!1)),aa(e))}function sf(e,t,a){if((ze&6)!==0)throw Error(o(327));var s=!a&&(t&124)===0&&(t&e.expiredLanes)===0||cl(e,t),n=s?dp(e,t):No(e,t,!0),i=s;do{if(n===0){Qs&&!s&&La(e,t,0,!1);break}else{if(a=e.current.alternate,i&&!cp(a)){n=No(e,t,!1),i=!1;continue}if(n===2){if(i=t,e.errorRecoveryDisabledLanes&i)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){t=d;e:{var h=e;n=Ql;var y=h.current.memoizedState.isDehydrated;if(y&&(Js(h,d).flags|=256),d=No(h,d,!1),d!==2){if(mo&&!y){h.errorRecoveryDisabledLanes|=i,ds|=i,n=4;break e}i=jt,jt=n,i!==null&&(jt===null?jt=i:jt.push.apply(jt,i))}n=d}if(i=!1,n!==2)continue}}if(n===1){Js(e,0),La(e,t,0,!0);break}e:{switch(s=e,i=n,i){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:La(s,t,Vt,!Ba);break e;case 2:jt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(n=bo+300-yt(),10<n)){if(La(s,t,Vt,!Ba),xn(s,0,!0)!==0)break e;s.timeoutHandle=Df(lf.bind(null,s,a,jt,ri,go,t,Vt,ds,Zs,Ba,i,2,-0,0),n);break e}lf(s,a,jt,ri,go,t,Vt,ds,Zs,Ba,i,0,-0,0)}}break}while(!0);aa(e)}function lf(e,t,a,s,n,i,d,h,y,E,L,X,D,k){if(e.timeoutHandle=-1,X=t.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(Il={stylesheets:null,count:0,unsuspend:Xp},Wd(t),X=Zp(),X!==null)){e.cancelPendingCommit=X(ff.bind(null,e,t,i,a,s,n,d,h,y,L,1,D,k)),La(e,i,d,!E);return}ff(e,t,i,a,s,n,d,h,y)}function cp(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var n=a[s],i=n.getSnapshot;n=n.value;try{if(!Rt(i(),n))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t,a,s){t&=~po,t&=~ds,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var i=31-xt(n),d=1<<i;s[i]=-1,n&=~d}a!==0&&pc(e,a,t)}function oi(){return(ze&6)===0?($l(0),!1):!0}function wo(){if(Ae!==null){if(Be===0)var e=Ae.return;else e=Ae,ha=ns=null,qr(e),Ys=null,ql=0,e=Ae;for(;e!==null;)qd(e.alternate,e),e=e.return;Ae=null}}function Js(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Rp(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),wo(),Ge=e,Ae=a=ua(e.current,null),Me=t,Be=0,Et=null,Ba=!1,Qs=cl(e,t),mo=!1,Zs=Vt=po=ds=qa=Ze=0,jt=Ql=null,go=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var n=31-xt(s),i=1<<n;t|=e[n],s&=~i}return wa=t,Cn(),a}function nf(e,t){Ne=null,A.H=Jn,t===_l||t===Hn?(t=Su(),Be=3):t===vu?(t=Su(),Be=4):Be=t===Nd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Et=t,Ae===null&&(Ze=1,ei(e,Ut(t,e.current)))}function rf(){var e=A.H;return A.H=Jn,e===null?Jn:e}function of(){var e=A.A;return A.A=rp,e}function So(){Ze=4,Ba||(Me&4194048)!==Me&&Gt.current!==null||(Qs=!0),(qa&134217727)===0&&(ds&134217727)===0||Ge===null||La(Ge,Me,Vt,!1)}function No(e,t,a){var s=ze;ze|=2;var n=rf(),i=of();(Ge!==e||Me!==t)&&(ri=null,Js(e,t)),t=!1;var d=Ze;e:do try{if(Be!==0&&Ae!==null){var h=Ae,y=Et;switch(Be){case 8:wo(),d=6;break e;case 3:case 2:case 9:case 6:Gt.current===null&&(t=!0);var E=Be;if(Be=0,Et=null,Ks(e,h,y,E),a&&Qs){d=0;break e}break;default:E=Be,Be=0,Et=null,Ks(e,h,y,E)}}up(),d=Ze;break}catch(L){nf(e,L)}while(!0);return t&&e.shellSuspendCounter++,ha=ns=null,ze=s,A.H=n,A.A=i,Ae===null&&(Ge=null,Me=0,Cn()),d}function up(){for(;Ae!==null;)cf(Ae)}function dp(e,t){var a=ze;ze|=2;var s=rf(),n=of();Ge!==e||Me!==t?(ri=null,ii=yt()+500,Js(e,t)):Qs=cl(e,t);e:do try{if(Be!==0&&Ae!==null){t=Ae;var i=Et;t:switch(Be){case 1:Be=0,Et=null,Ks(e,t,i,1);break;case 2:case 9:if(yu(i)){Be=0,Et=null,uf(t);break}t=function(){Be!==2&&Be!==9||Ge!==e||(Be=7),aa(e)},i.then(t,t);break e;case 3:Be=7;break e;case 4:Be=5;break e;case 7:yu(i)?(Be=0,Et=null,uf(t)):(Be=0,Et=null,Ks(e,t,i,7));break;case 5:var d=null;switch(Ae.tag){case 26:d=Ae.memoizedState;case 5:case 27:var h=Ae;if(!d||Qf(d)){Be=0,Et=null;var y=h.sibling;if(y!==null)Ae=y;else{var E=h.return;E!==null?(Ae=E,ci(E)):Ae=null}break t}}Be=0,Et=null,Ks(e,t,i,5);break;case 6:Be=0,Et=null,Ks(e,t,i,6);break;case 8:wo(),Ze=6;break e;default:throw Error(o(462))}}fp();break}catch(L){nf(e,L)}while(!0);return ha=ns=null,A.H=s,A.A=n,ze=a,Ae!==null?0:(Ge=null,Me=0,Cn(),Ze)}function fp(){for(;Ae!==null&&!na();)cf(Ae)}function cf(e){var t=zd(e.alternate,e,wa);e.memoizedProps=e.pendingProps,t===null?ci(e):Ae=t}function uf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Md(a,t,t.pendingProps,t.type,void 0,Me);break;case 11:t=Md(a,t,t.pendingProps,t.type.render,t.ref,Me);break;case 5:qr(t);default:qd(a,t),t=Ae=uu(t,wa),t=zd(a,t,wa)}e.memoizedProps=e.pendingProps,t===null?ci(e):Ae=t}function Ks(e,t,a,s){ha=ns=null,qr(t),Ys=null,ql=0;var n=t.return;try{if(tp(e,n,t,a,Me)){Ze=1,ei(e,Ut(a,e.current)),Ae=null;return}}catch(i){if(n!==null)throw Ae=n,i;Ze=1,ei(e,Ut(a,e.current)),Ae=null;return}t.flags&32768?(Oe||s===1?e=!0:Qs||(Me&536870912)!==0?e=!1:(Ba=e=!0,(s===2||s===9||s===3||s===6)&&(s=Gt.current,s!==null&&s.tag===13&&(s.flags|=16384))),df(t,e)):ci(t)}function ci(e){var t=e;do{if((t.flags&32768)!==0){df(t,Ba);return}e=t.return;var a=sp(t.alternate,t,wa);if(a!==null){Ae=a;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);Ze===0&&(Ze=5)}function df(e,t){do{var a=lp(e.alternate,e);if(a!==null){a.flags&=32767,Ae=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ae=e;return}Ae=e=a}while(e!==null);Ze=6,Ae=null}function ff(e,t,a,s,n,i,d,h,y){e.cancelPendingCommit=null;do ui();while(dt!==0);if((ze&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,i|=fr,Xh(e,a,i,d,h,y),e===Ge&&(Ae=Ge=null,Me=0),$s=t,Ha=e,Fs=a,xo=i,vo=n,tf=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,gp(gs,function(){return bf(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=A.T,A.T=null,n=R.p,R.p=2,d=ze,ze|=4;try{np(e,t,a)}finally{ze=d,R.p=n,A.T=s}}dt=1,hf(),mf(),pf()}}function hf(){if(dt===1){dt=0;var e=Ha,t=$s,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=A.T,A.T=null;var s=R.p;R.p=2;var n=ze;ze|=4;try{Fd(t,e);var i=zo,d=eu(e.containerInfo),h=i.focusedElem,y=i.selectionRange;if(d!==h&&h&&h.ownerDocument&&Ic(h.ownerDocument.documentElement,h)){if(y!==null&&rr(h)){var E=y.start,L=y.end;if(L===void 0&&(L=E),"selectionStart"in h)h.selectionStart=E,h.selectionEnd=Math.min(L,h.value.length);else{var X=h.ownerDocument||document,D=X&&X.defaultView||window;if(D.getSelection){var k=D.getSelection(),we=h.textContent.length,me=Math.min(y.start,we),He=y.end===void 0?me:Math.min(y.end,we);!k.extend&&me>He&&(d=He,He=me,me=d);var j=Pc(h,me),N=Pc(h,He);if(j&&N&&(k.rangeCount!==1||k.anchorNode!==j.node||k.anchorOffset!==j.offset||k.focusNode!==N.node||k.focusOffset!==N.offset)){var M=X.createRange();M.setStart(j.node,j.offset),k.removeAllRanges(),me>He?(k.addRange(M),k.extend(N.node,N.offset)):(M.setEnd(N.node,N.offset),k.addRange(M))}}}}for(X=[],k=h;k=k.parentNode;)k.nodeType===1&&X.push({element:k,left:k.scrollLeft,top:k.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<X.length;h++){var Y=X[h];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Si=!!ko,zo=ko=null}finally{ze=n,R.p=s,A.T=a}}e.current=t,dt=2}}function mf(){if(dt===2){dt=0;var e=Ha,t=$s,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=A.T,A.T=null;var s=R.p;R.p=2;var n=ze;ze|=4;try{Xd(e,t.alternate,t)}finally{ze=n,R.p=s,A.T=a}}dt=3}}function pf(){if(dt===4||dt===3){dt=0,ia();var e=Ha,t=$s,a=Fs,s=tf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?dt=5:(dt=0,$s=Ha=null,gf(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Ua=null),Li(a),t=t.stateNode,lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(Zt,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=A.T,n=R.p,R.p=2,A.T=null;try{for(var i=e.onRecoverableError,d=0;d<s.length;d++){var h=s[d];i(h.value,{componentStack:h.stack})}}finally{A.T=t,R.p=n}}(Fs&3)!==0&&ui(),aa(e),n=e.pendingLanes,(a&4194090)!==0&&(n&42)!==0?e===yo?Zl++:(Zl=0,yo=e):Zl=0,$l(0)}}function gf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Al(t)))}function ui(e){return hf(),mf(),pf(),bf()}function bf(){if(dt!==5)return!1;var e=Ha,t=xo;xo=0;var a=Li(Fs),s=A.T,n=R.p;try{R.p=32>a?32:a,A.T=null,a=vo,vo=null;var i=Ha,d=Fs;if(dt=0,$s=Ha=null,Fs=0,(ze&6)!==0)throw Error(o(331));var h=ze;if(ze|=4,Id(i.current),Kd(i,i.current,d,a),ze=h,$l(0,!1),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(Zt,i)}catch{}return!0}finally{R.p=n,A.T=s,gf(e,t)}}function xf(e,t,a){t=Ut(a,t),t=Wr(e.stateNode,t,2),e=Ma(e,t,2),e!==null&&(ul(e,2),aa(e))}function Le(e,t,a){if(e.tag===3)xf(e,e,a);else for(;t!==null;){if(t.tag===3){xf(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ua===null||!Ua.has(s))){e=Ut(a,e),a=wd(2),s=Ma(t,a,2),s!==null&&(Sd(a,s,t,e),ul(s,2),aa(s));break}}t=t.return}}function To(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new op;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(a)||(mo=!0,n.add(a),e=hp.bind(null,e,t,a),t.then(e,e))}function hp(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ge===e&&(Me&a)===a&&(Ze===4||Ze===3&&(Me&62914560)===Me&&300>yt()-bo?(ze&2)===0&&Js(e,0):po|=a,Zs===Me&&(Zs=0)),aa(e)}function vf(e,t){t===0&&(t=mc()),e=Es(e,t),e!==null&&(ul(e,t),aa(e))}function mp(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),vf(e,a)}function pp(e,t){var a=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),vf(e,a)}function gp(e,t){return st(e,t)}var di=null,Ws=null,jo=!1,fi=!1,Ao=!1,fs=0;function aa(e){e!==Ws&&e.next===null&&(Ws===null?di=Ws=e:Ws=Ws.next=e),fi=!0,jo||(jo=!0,xp())}function $l(e,t){if(!Ao&&fi){Ao=!0;do for(var a=!1,s=di;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var i=0;else{var d=s.suspendedLanes,h=s.pingedLanes;i=(1<<31-xt(42|e)+1)-1,i&=n&~(d&~h),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(a=!0,Nf(s,i))}else i=Me,i=xn(s,s===Ge?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(i&3)===0||cl(s,i)||(a=!0,Nf(s,i));s=s.next}while(a);Ao=!1}}function bp(){yf()}function yf(){fi=jo=!1;var e=0;fs!==0&&(Ap()&&(e=fs),fs=0);for(var t=yt(),a=null,s=di;s!==null;){var n=s.next,i=wf(s,t);i===0?(s.next=null,a===null?di=n:a.next=n,n===null&&(Ws=a)):(a=s,(e!==0||(i&3)!==0)&&(fi=!0)),s=n}$l(e)}function wf(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var d=31-xt(i),h=1<<d,y=n[d];y===-1?((h&a)===0||(h&s)!==0)&&(n[d]=Vh(h,t)):y<=t&&(e.expiredLanes|=h),i&=~h}if(t=Ge,a=Me,a=xn(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(Be===2||Be===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&mt(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||cl(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&mt(s),Li(a)){case 2:case 8:a=mn;break;case 32:a=gs;break;case 268435456:a=_e;break;default:a=gs}return s=Sf.bind(null,e),a=st(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&mt(s),e.callbackPriority=2,e.callbackNode=null,2}function Sf(e,t){if(dt!==0&&dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ui()&&e.callbackNode!==a)return null;var s=Me;return s=xn(e,e===Ge?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(sf(e,s,t),wf(e,yt()),e.callbackNode!=null&&e.callbackNode===a?Sf.bind(null,e):null)}function Nf(e,t){if(ui())return null;sf(e,t,!0)}function xp(){_p(function(){(ze&6)!==0?st(hn,bp):yf()})}function Ro(){return fs===0&&(fs=hc()),fs}function Tf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Nn(""+e)}function jf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function vp(e,t,a,s,n){if(t==="submit"&&a&&a.stateNode===n){var i=Tf((n[wt]||null).action),d=s.submitter;d&&(t=(t=d[wt]||null)?Tf(t.formAction):d.getAttribute("formAction"),t!==null&&(i=t,d=null));var h=new Rn("action","action",null,s,n);e.push({event:h,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(fs!==0){var y=d?jf(n,d):new FormData(n);Zr(a,{pending:!0,data:y,method:n.method,action:i},null,y)}}else typeof i=="function"&&(h.preventDefault(),y=d?jf(n,d):new FormData(n),Zr(a,{pending:!0,data:y,method:n.method,action:i},i,y))},currentTarget:n}]})}}for(var _o=0;_o<dr.length;_o++){var Mo=dr[_o],yp=Mo.toLowerCase(),wp=Mo[0].toUpperCase()+Mo.slice(1);$t(yp,"on"+wp)}$t(su,"onAnimationEnd"),$t(lu,"onAnimationIteration"),$t(nu,"onAnimationStart"),$t("dblclick","onDoubleClick"),$t("focusin","onFocus"),$t("focusout","onBlur"),$t(Um,"onTransitionRun"),$t(Hm,"onTransitionStart"),$t(Lm,"onTransitionCancel"),$t(iu,"onTransitionEnd"),ws("onMouseEnter",["mouseout","mouseover"]),ws("onMouseLeave",["mouseout","mouseover"]),ws("onPointerEnter",["pointerout","pointerover"]),ws("onPointerLeave",["pointerout","pointerover"]),Ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ka("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function Af(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],n=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var d=s.length-1;0<=d;d--){var h=s[d],y=h.instance,E=h.currentTarget;if(h=h.listener,y!==i&&n.isPropagationStopped())break e;i=h,n.currentTarget=E;try{i(n)}catch(L){In(L)}n.currentTarget=null,i=y}else for(d=0;d<s.length;d++){if(h=s[d],y=h.instance,E=h.currentTarget,h=h.listener,y!==i&&n.isPropagationStopped())break e;i=h,n.currentTarget=E;try{i(n)}catch(L){In(L)}n.currentTarget=null,i=y}}}}function Re(e,t){var a=t[Yi];a===void 0&&(a=t[Yi]=new Set);var s=e+"__bubble";a.has(s)||(Rf(t,e,2,!1),a.add(s))}function Co(e,t,a){var s=0;t&&(s|=4),Rf(a,e,s,t)}var hi="_reactListening"+Math.random().toString(36).slice(2);function Eo(e){if(!e[hi]){e[hi]=!0,vc.forEach(function(a){a!=="selectionchange"&&(Sp.has(a)||Co(a,!1,e),Co(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hi]||(t[hi]=!0,Co("selectionchange",!1,t))}}function Rf(e,t,a,s){switch(Wf(t)){case 2:var n=Jp;break;case 8:n=Kp;break;default:n=Qo}a=n.bind(null,t,a,e),n=void 0,!Pi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function Oo(e,t,a,s,n){var i=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var d=s.tag;if(d===3||d===4){var h=s.stateNode.containerInfo;if(h===n)break;if(d===4)for(d=s.return;d!==null;){var y=d.tag;if((y===3||y===4)&&d.stateNode.containerInfo===n)return;d=d.return}for(;h!==null;){if(d=xs(h),d===null)return;if(y=d.tag,y===5||y===6||y===26||y===27){s=i=d;continue e}h=h.parentNode}}s=s.return}Dc(function(){var E=i,L=Ki(a),X=[];e:{var D=ru.get(e);if(D!==void 0){var k=Rn,we=e;switch(e){case"keypress":if(jn(a)===0)break e;case"keydown":case"keyup":k=gm;break;case"focusin":we="focus",k=ar;break;case"focusout":we="blur",k=ar;break;case"beforeblur":case"afterblur":k=ar;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=vm;break;case su:case lu:case nu:k=rm;break;case iu:k=wm;break;case"scroll":case"scrollend":k=am;break;case"wheel":k=Nm;break;case"copy":case"cut":case"paste":k=cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Uc;break;case"toggle":case"beforetoggle":k=jm}var me=(t&4)!==0,He=!me&&(e==="scroll"||e==="scrollend"),j=me?D!==null?D+"Capture":null:D;me=[];for(var N=E,M;N!==null;){var Y=N;if(M=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||M===null||j===null||(Y=hl(N,j),Y!=null&&me.push(Jl(N,Y,M))),He)break;N=N.return}0<me.length&&(D=new k(D,we,null,a,L),X.push({event:D,listeners:me}))}}if((t&7)===0){e:{if(D=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",D&&a!==Ji&&(we=a.relatedTarget||a.fromElement)&&(xs(we)||we[bs]))break e;if((k||D)&&(D=L.window===L?L:(D=L.ownerDocument)?D.defaultView||D.parentWindow:window,k?(we=a.relatedTarget||a.toElement,k=E,we=we?xs(we):null,we!==null&&(He=m(we),me=we.tag,we!==He||me!==5&&me!==27&&me!==6)&&(we=null)):(k=null,we=E),k!==we)){if(me=Bc,Y="onMouseLeave",j="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(me=Uc,Y="onPointerLeave",j="onPointerEnter",N="pointer"),He=k==null?D:fl(k),M=we==null?D:fl(we),D=new me(Y,N+"leave",k,a,L),D.target=He,D.relatedTarget=M,Y=null,xs(L)===E&&(me=new me(j,N+"enter",we,a,L),me.target=M,me.relatedTarget=He,Y=me),He=Y,k&&we)t:{for(me=k,j=we,N=0,M=me;M;M=Ps(M))N++;for(M=0,Y=j;Y;Y=Ps(Y))M++;for(;0<N-M;)me=Ps(me),N--;for(;0<M-N;)j=Ps(j),M--;for(;N--;){if(me===j||j!==null&&me===j.alternate)break t;me=Ps(me),j=Ps(j)}me=null}else me=null;k!==null&&_f(X,D,k,me,!1),we!==null&&He!==null&&_f(X,He,we,me,!0)}}e:{if(D=E?fl(E):window,k=D.nodeName&&D.nodeName.toLowerCase(),k==="select"||k==="input"&&D.type==="file")var re=Zc;else if(Xc(D))if($c)re=zm;else{re=Dm;var Te=Om}else k=D.nodeName,!k||k.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?E&&Fi(E.elementType)&&(re=Zc):re=km;if(re&&(re=re(e,E))){Qc(X,re,a,L);break e}Te&&Te(e,D,E),e==="focusout"&&E&&D.type==="number"&&E.memoizedProps.value!=null&&$i(D,"number",D.value)}switch(Te=E?fl(E):window,e){case"focusin":(Xc(Te)||Te.contentEditable==="true")&&(_s=Te,or=E,wl=null);break;case"focusout":wl=or=_s=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,tu(X,a,L);break;case"selectionchange":if(qm)break;case"keydown":case"keyup":tu(X,a,L)}var ue;if(lr)e:{switch(e){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Rs?Gc(e,a)&&(be="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(Hc&&a.locale!=="ko"&&(Rs||be!=="onCompositionStart"?be==="onCompositionEnd"&&Rs&&(ue=kc()):(ja=L,Ii="value"in ja?ja.value:ja.textContent,Rs=!0)),Te=mi(E,be),0<Te.length&&(be=new qc(be,e,null,a,L),X.push({event:be,listeners:Te}),ue?be.data=ue:(ue=Vc(a),ue!==null&&(be.data=ue)))),(ue=Rm?_m(e,a):Mm(e,a))&&(be=mi(E,"onBeforeInput"),0<be.length&&(Te=new qc("onBeforeInput","beforeinput",null,a,L),X.push({event:Te,listeners:be}),Te.data=ue)),vp(X,e,E,a,L)}Af(X,t)})}function Jl(e,t,a){return{instance:e,listener:t,currentTarget:a}}function mi(e,t){for(var a=t+"Capture",s=[];e!==null;){var n=e,i=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||i===null||(n=hl(e,a),n!=null&&s.unshift(Jl(e,n,i)),n=hl(e,t),n!=null&&s.push(Jl(e,n,i))),e.tag===3)return s;e=e.return}return[]}function Ps(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function _f(e,t,a,s,n){for(var i=t._reactName,d=[];a!==null&&a!==s;){var h=a,y=h.alternate,E=h.stateNode;if(h=h.tag,y!==null&&y===s)break;h!==5&&h!==26&&h!==27||E===null||(y=E,n?(E=hl(a,i),E!=null&&d.unshift(Jl(a,E,y))):n||(E=hl(a,i),E!=null&&d.push(Jl(a,E,y)))),a=a.return}d.length!==0&&e.push({event:t,listeners:d})}var Np=/\r\n?/g,Tp=/\u0000|\uFFFD/g;function Mf(e){return(typeof e=="string"?e:""+e).replace(Np,`
`).replace(Tp,"")}function Cf(e,t){return t=Mf(t),Mf(e)===t}function pi(){}function Ue(e,t,a,s,n,i){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Ts(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Ts(e,""+s);break;case"className":yn(e,"class",s);break;case"tabIndex":yn(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":yn(e,a,s);break;case"style":Ec(e,s,i);break;case"data":if(t!=="object"){yn(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Nn(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(a==="formAction"?(t!=="input"&&Ue(e,t,"name",n.name,n,null),Ue(e,t,"formEncType",n.formEncType,n,null),Ue(e,t,"formMethod",n.formMethod,n,null),Ue(e,t,"formTarget",n.formTarget,n,null)):(Ue(e,t,"encType",n.encType,n,null),Ue(e,t,"method",n.method,n,null),Ue(e,t,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Nn(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=pi);break;case"onScroll":s!=null&&Re("scroll",e);break;case"onScrollEnd":s!=null&&Re("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Nn(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":Re("beforetoggle",e),Re("toggle",e),vn(e,"popover",s);break;case"xlinkActuate":oa(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":oa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":oa(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":oa(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":oa(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":oa(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":oa(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":oa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":oa(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":vn(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=em.get(a)||a,vn(e,a,s))}}function Do(e,t,a,s,n,i){switch(a){case"style":Ec(e,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof s=="string"?Ts(e,s):(typeof s=="number"||typeof s=="bigint")&&Ts(e,""+s);break;case"onScroll":s!=null&&Re("scroll",e);break;case"onScrollEnd":s!=null&&Re("scrollend",e);break;case"onClick":s!=null&&(e.onclick=pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),i=e[wt]||null,i=i!=null?i[a]:null,typeof i=="function"&&e.removeEventListener(t,i,n),typeof s=="function")){typeof i!="function"&&i!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,n);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):vn(e,a,s)}}}function ft(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",e),Re("load",e);var s=!1,n=!1,i;for(i in a)if(a.hasOwnProperty(i)){var d=a[i];if(d!=null)switch(i){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ue(e,t,i,d,a,null)}}n&&Ue(e,t,"srcSet",a.srcSet,a,null),s&&Ue(e,t,"src",a.src,a,null);return;case"input":Re("invalid",e);var h=i=d=n=null,y=null,E=null;for(s in a)if(a.hasOwnProperty(s)){var L=a[s];if(L!=null)switch(s){case"name":n=L;break;case"type":d=L;break;case"checked":y=L;break;case"defaultChecked":E=L;break;case"value":i=L;break;case"defaultValue":h=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(137,t));break;default:Ue(e,t,s,L,a,null)}}Rc(e,i,h,y,E,d,n,!1),wn(e);return;case"select":Re("invalid",e),s=d=i=null;for(n in a)if(a.hasOwnProperty(n)&&(h=a[n],h!=null))switch(n){case"value":i=h;break;case"defaultValue":d=h;break;case"multiple":s=h;default:Ue(e,t,n,h,a,null)}t=i,a=d,e.multiple=!!s,t!=null?Ns(e,!!s,t,!1):a!=null&&Ns(e,!!s,a,!0);return;case"textarea":Re("invalid",e),i=n=s=null;for(d in a)if(a.hasOwnProperty(d)&&(h=a[d],h!=null))switch(d){case"value":s=h;break;case"defaultValue":n=h;break;case"children":i=h;break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(o(91));break;default:Ue(e,t,d,h,a,null)}Mc(e,s,n,i),wn(e);return;case"option":for(y in a)if(a.hasOwnProperty(y)&&(s=a[y],s!=null))switch(y){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ue(e,t,y,s,a,null)}return;case"dialog":Re("beforetoggle",e),Re("toggle",e),Re("cancel",e),Re("close",e);break;case"iframe":case"object":Re("load",e);break;case"video":case"audio":for(s=0;s<Fl.length;s++)Re(Fl[s],e);break;case"image":Re("error",e),Re("load",e);break;case"details":Re("toggle",e);break;case"embed":case"source":case"link":Re("error",e),Re("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(E in a)if(a.hasOwnProperty(E)&&(s=a[E],s!=null))switch(E){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ue(e,t,E,s,a,null)}return;default:if(Fi(t)){for(L in a)a.hasOwnProperty(L)&&(s=a[L],s!==void 0&&Do(e,t,L,s,a,void 0));return}}for(h in a)a.hasOwnProperty(h)&&(s=a[h],s!=null&&Ue(e,t,h,s,a,null))}function jp(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,i=null,d=null,h=null,y=null,E=null,L=null;for(k in a){var X=a[k];if(a.hasOwnProperty(k)&&X!=null)switch(k){case"checked":break;case"value":break;case"defaultValue":y=X;default:s.hasOwnProperty(k)||Ue(e,t,k,null,s,X)}}for(var D in s){var k=s[D];if(X=a[D],s.hasOwnProperty(D)&&(k!=null||X!=null))switch(D){case"type":i=k;break;case"name":n=k;break;case"checked":E=k;break;case"defaultChecked":L=k;break;case"value":d=k;break;case"defaultValue":h=k;break;case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(137,t));break;default:k!==X&&Ue(e,t,D,k,s,X)}}Zi(e,d,h,y,E,L,i,n);return;case"select":k=d=h=D=null;for(i in a)if(y=a[i],a.hasOwnProperty(i)&&y!=null)switch(i){case"value":break;case"multiple":k=y;default:s.hasOwnProperty(i)||Ue(e,t,i,null,s,y)}for(n in s)if(i=s[n],y=a[n],s.hasOwnProperty(n)&&(i!=null||y!=null))switch(n){case"value":D=i;break;case"defaultValue":h=i;break;case"multiple":d=i;default:i!==y&&Ue(e,t,n,i,s,y)}t=h,a=d,s=k,D!=null?Ns(e,!!a,D,!1):!!s!=!!a&&(t!=null?Ns(e,!!a,t,!0):Ns(e,!!a,a?[]:"",!1));return;case"textarea":k=D=null;for(h in a)if(n=a[h],a.hasOwnProperty(h)&&n!=null&&!s.hasOwnProperty(h))switch(h){case"value":break;case"children":break;default:Ue(e,t,h,null,s,n)}for(d in s)if(n=s[d],i=a[d],s.hasOwnProperty(d)&&(n!=null||i!=null))switch(d){case"value":D=n;break;case"defaultValue":k=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(o(91));break;default:n!==i&&Ue(e,t,d,n,s,i)}_c(e,D,k);return;case"option":for(var we in a)if(D=a[we],a.hasOwnProperty(we)&&D!=null&&!s.hasOwnProperty(we))switch(we){case"selected":e.selected=!1;break;default:Ue(e,t,we,null,s,D)}for(y in s)if(D=s[y],k=a[y],s.hasOwnProperty(y)&&D!==k&&(D!=null||k!=null))switch(y){case"selected":e.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:Ue(e,t,y,D,s,k)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in a)D=a[me],a.hasOwnProperty(me)&&D!=null&&!s.hasOwnProperty(me)&&Ue(e,t,me,null,s,D);for(E in s)if(D=s[E],k=a[E],s.hasOwnProperty(E)&&D!==k&&(D!=null||k!=null))switch(E){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(o(137,t));break;default:Ue(e,t,E,D,s,k)}return;default:if(Fi(t)){for(var He in a)D=a[He],a.hasOwnProperty(He)&&D!==void 0&&!s.hasOwnProperty(He)&&Do(e,t,He,void 0,s,D);for(L in s)D=s[L],k=a[L],!s.hasOwnProperty(L)||D===k||D===void 0&&k===void 0||Do(e,t,L,D,s,k);return}}for(var j in a)D=a[j],a.hasOwnProperty(j)&&D!=null&&!s.hasOwnProperty(j)&&Ue(e,t,j,null,s,D);for(X in s)D=s[X],k=a[X],!s.hasOwnProperty(X)||D===k||D==null&&k==null||Ue(e,t,X,D,s,k)}var ko=null,zo=null;function gi(e){return e.nodeType===9?e:e.ownerDocument}function Ef(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Of(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Bo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qo=null;function Ap(){var e=window.event;return e&&e.type==="popstate"?e===qo?!1:(qo=e,!0):(qo=null,!1)}var Df=typeof setTimeout=="function"?setTimeout:void 0,Rp=typeof clearTimeout=="function"?clearTimeout:void 0,kf=typeof Promise=="function"?Promise:void 0,_p=typeof queueMicrotask=="function"?queueMicrotask:typeof kf<"u"?function(e){return kf.resolve(null).then(e).catch(Mp)}:Df;function Mp(e){setTimeout(function(){throw e})}function Ya(e){return e==="head"}function zf(e,t){var a=t,s=0,n=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(0<s&&8>s){a=s;var d=e.ownerDocument;if(a&1&&Kl(d.documentElement),a&2&&Kl(d.body),a&4)for(a=d.head,Kl(a),d=a.firstChild;d;){var h=d.nextSibling,y=d.nodeName;d[dl]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=h}}if(n===0){e.removeChild(i),ln(t);return}n--}else a==="$"||a==="$?"||a==="$!"?n++:s=a.charCodeAt(0)-48;else s=0;a=i}while(a);ln(t)}function Uo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Uo(a),Gi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Cp(e,t,a,s){for(;e.nodeType===1;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[dl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Jt(e.nextSibling),e===null)break}return null}function Ep(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Jt(e.nextSibling),e===null))return null;return e}function Ho(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Op(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Jt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Lo=null;function Bf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function qf(e,t,a){switch(t=gi(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Kl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Gi(e)}var Xt=new Map,Uf=new Set;function bi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Sa=R.d;R.d={f:Dp,r:kp,D:zp,C:Bp,L:qp,m:Up,X:Lp,S:Hp,M:Yp};function Dp(){var e=Sa.f(),t=oi();return e||t}function kp(e){var t=vs(e);t!==null&&t.tag===5&&t.type==="form"?sd(t):Sa.r(e)}var Is=typeof document>"u"?null:document;function Hf(e,t,a){var s=Is;if(s&&typeof t=="string"&&t){var n=qt(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),Uf.has(n)||(Uf.add(n),e={rel:e,crossOrigin:a,href:t},s.querySelector(n)===null&&(t=s.createElement("link"),ft(t,"link",e),nt(t),s.head.appendChild(t)))}}function zp(e){Sa.D(e),Hf("dns-prefetch",e,null)}function Bp(e,t){Sa.C(e,t),Hf("preconnect",e,t)}function qp(e,t,a){Sa.L(e,t,a);var s=Is;if(s&&e&&t){var n='link[rel="preload"][as="'+qt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+qt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+qt(a.imageSizes)+'"]')):n+='[href="'+qt(e)+'"]';var i=n;switch(t){case"style":i=el(e);break;case"script":i=tl(e)}Xt.has(i)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Xt.set(i,e),s.querySelector(n)!==null||t==="style"&&s.querySelector(Wl(i))||t==="script"&&s.querySelector(Pl(i))||(t=s.createElement("link"),ft(t,"link",e),nt(t),s.head.appendChild(t)))}}function Up(e,t){Sa.m(e,t);var a=Is;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+qt(s)+'"][href="'+qt(e)+'"]',i=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=tl(e)}if(!Xt.has(i)&&(e=w({rel:"modulepreload",href:e},t),Xt.set(i,e),a.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pl(i)))return}s=a.createElement("link"),ft(s,"link",e),nt(s),a.head.appendChild(s)}}}function Hp(e,t,a){Sa.S(e,t,a);var s=Is;if(s&&e){var n=ys(s).hoistableStyles,i=el(e);t=t||"default";var d=n.get(i);if(!d){var h={loading:0,preload:null};if(d=s.querySelector(Wl(i)))h.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Xt.get(i))&&Yo(e,a);var y=d=s.createElement("link");nt(y),ft(y,"link",e),y._p=new Promise(function(E,L){y.onload=E,y.onerror=L}),y.addEventListener("load",function(){h.loading|=1}),y.addEventListener("error",function(){h.loading|=2}),h.loading|=4,xi(d,t,s)}d={type:"stylesheet",instance:d,count:1,state:h},n.set(i,d)}}}function Lp(e,t){Sa.X(e,t);var a=Is;if(a&&e){var s=ys(a).hoistableScripts,n=tl(e),i=s.get(n);i||(i=a.querySelector(Pl(n)),i||(e=w({src:e,async:!0},t),(t=Xt.get(n))&&Go(e,t),i=a.createElement("script"),nt(i),ft(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(n,i))}}function Yp(e,t){Sa.M(e,t);var a=Is;if(a&&e){var s=ys(a).hoistableScripts,n=tl(e),i=s.get(n);i||(i=a.querySelector(Pl(n)),i||(e=w({src:e,async:!0,type:"module"},t),(t=Xt.get(n))&&Go(e,t),i=a.createElement("script"),nt(i),ft(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(n,i))}}function Lf(e,t,a,s){var n=(n=G.current)?bi(n):null;if(!n)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=el(a.href),a=ys(n).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=el(a.href);var i=ys(n).hoistableStyles,d=i.get(e);if(d||(n=n.ownerDocument||n,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,d),(i=n.querySelector(Wl(e)))&&!i._p&&(d.instance=i,d.state.loading=5),Xt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xt.set(e,a),i||Gp(n,e,a,d.state))),t&&s===null)throw Error(o(528,""));return d}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=tl(a),a=ys(n).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function el(e){return'href="'+qt(e)+'"'}function Wl(e){return'link[rel="stylesheet"]['+e+"]"}function Yf(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Gp(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),ft(t,"link",a),nt(t),e.head.appendChild(t))}function tl(e){return'[src="'+qt(e)+'"]'}function Pl(e){return"script[async]"+e}function Gf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+qt(a.href)+'"]');if(s)return t.instance=s,nt(s),s;var n=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),nt(s),ft(s,"style",n),xi(s,a.precedence,e),t.instance=s;case"stylesheet":n=el(a.href);var i=e.querySelector(Wl(n));if(i)return t.state.loading|=4,t.instance=i,nt(i),i;s=Yf(a),(n=Xt.get(n))&&Yo(s,n),i=(e.ownerDocument||e).createElement("link"),nt(i);var d=i;return d._p=new Promise(function(h,y){d.onload=h,d.onerror=y}),ft(i,"link",s),t.state.loading|=4,xi(i,a.precedence,e),t.instance=i;case"script":return i=tl(a.src),(n=e.querySelector(Pl(i)))?(t.instance=n,nt(n),n):(s=a,(n=Xt.get(i))&&(s=w({},a),Go(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),nt(n),ft(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,xi(s,a.precedence,e));return t.instance}function xi(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,i=n,d=0;d<s.length;d++){var h=s[d];if(h.dataset.precedence===t)i=h;else if(i!==n)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Yo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Go(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var vi=null;function Vf(e,t,a){if(vi===null){var s=new Map,n=vi=new Map;n.set(a,s)}else n=vi,s=n.get(a),s||(s=new Map,n.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var i=a[n];if(!(i[dl]||i[pt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var d=i.getAttribute(t)||"";d=e+d;var h=s.get(d);h?h.push(i):s.set(d,[i])}}return s}function Xf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Vp(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Qf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Il=null;function Xp(){}function Qp(e,t,a){if(Il===null)throw Error(o(475));var s=Il;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var n=el(a.href),i=e.querySelector(Wl(n));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=yi.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=i,nt(i);return}i=e.ownerDocument||e,a=Yf(a),(n=Xt.get(n))&&Yo(a,n),i=i.createElement("link"),nt(i);var d=i;d._p=new Promise(function(h,y){d.onload=h,d.onerror=y}),ft(i,"link",a),t.instance=i}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(s.count++,t=yi.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function Zp(){if(Il===null)throw Error(o(475));var e=Il;return e.stylesheets&&e.count===0&&Vo(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Vo(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function yi(){if(this.count--,this.count===0){if(this.stylesheets)Vo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wi=null;function Vo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wi=new Map,t.forEach($p,e),wi=null,yi.call(e))}function $p(e,t){if(!(t.state.loading&4)){var a=wi.get(e);if(a)var s=a.get(null);else{a=new Map,wi.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<n.length;i++){var d=n[i];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(a.set(d.dataset.precedence,d),s=d)}s&&a.set(null,s)}n=t.instance,d=n.getAttribute("data-precedence"),i=a.get(d)||s,i===s&&a.set(null,n),a.set(d,n),this.count++,s=yi.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),i?i.parentNode.insertBefore(n,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var en={$$typeof:J,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function Fp(e,t,a,s,n,i,d,h){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.hiddenUpdates=Ui(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=i,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=h,this.incompleteTransitions=new Map}function Zf(e,t,a,s,n,i,d,h,y,E,L,X){return e=new Fp(e,t,a,d,h,y,E,X),t=1,i===!0&&(t|=24),i=_t(3,null,null,t),e.current=i,i.stateNode=e,t=Nr(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:s,isDehydrated:a,cache:t},Rr(i),e}function $f(e){return e?(e=Os,e):Os}function Ff(e,t,a,s,n,i){n=$f(n),s.context===null?s.context=n:s.pendingContext=n,s=_a(t),s.payload={element:a},i=i===void 0?null:i,i!==null&&(s.callback=i),a=Ma(e,s,t),a!==null&&(Dt(a,e,t),Cl(a,e,t))}function Jf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Xo(e,t){Jf(e,t),(e=e.alternate)&&Jf(e,t)}function Kf(e){if(e.tag===13){var t=Es(e,67108864);t!==null&&Dt(t,e,67108864),Xo(e,67108864)}}var Si=!0;function Jp(e,t,a,s){var n=A.T;A.T=null;var i=R.p;try{R.p=2,Qo(e,t,a,s)}finally{R.p=i,A.T=n}}function Kp(e,t,a,s){var n=A.T;A.T=null;var i=R.p;try{R.p=8,Qo(e,t,a,s)}finally{R.p=i,A.T=n}}function Qo(e,t,a,s){if(Si){var n=Zo(s);if(n===null)Oo(e,t,s,Ni,a),Pf(e,s);else if(Pp(n,e,t,a,s))s.stopPropagation();else if(Pf(e,s),t&4&&-1<Wp.indexOf(e)){for(;n!==null;){var i=vs(n);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var d=Ja(i.pendingLanes);if(d!==0){var h=i;for(h.pendingLanes|=2,h.entangledLanes|=2;d;){var y=1<<31-xt(d);h.entanglements[1]|=y,d&=~y}aa(i),(ze&6)===0&&(ii=yt()+500,$l(0))}}break;case 13:h=Es(i,2),h!==null&&Dt(h,i,2),oi(),Xo(i,2)}if(i=Zo(s),i===null&&Oo(e,t,s,Ni,a),i===n)break;n=i}n!==null&&s.stopPropagation()}else Oo(e,t,s,null,a)}}function Zo(e){return e=Ki(e),$o(e)}var Ni=null;function $o(e){if(Ni=null,e=xs(e),e!==null){var t=m(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=x(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ni=e,null}function Wf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ol()){case hn:return 2;case mn:return 8;case gs:case Bi:return 32;case _e:return 268435456;default:return 32}default:return 32}}var Fo=!1,Ga=null,Va=null,Xa=null,tn=new Map,an=new Map,Qa=[],Wp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pf(e,t){switch(e){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":tn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":an.delete(t.pointerId)}}function sn(e,t,a,s,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:i,targetContainers:[n]},t!==null&&(t=vs(t),t!==null&&Kf(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Pp(e,t,a,s,n){switch(t){case"focusin":return Ga=sn(Ga,e,t,a,s,n),!0;case"dragenter":return Va=sn(Va,e,t,a,s,n),!0;case"mouseover":return Xa=sn(Xa,e,t,a,s,n),!0;case"pointerover":var i=n.pointerId;return tn.set(i,sn(tn.get(i)||null,e,t,a,s,n)),!0;case"gotpointercapture":return i=n.pointerId,an.set(i,sn(an.get(i)||null,e,t,a,s,n)),!0}return!1}function If(e){var t=xs(e.target);if(t!==null){var a=m(t);if(a!==null){if(t=a.tag,t===13){if(t=x(a),t!==null){e.blockedOn=t,Qh(e.priority,function(){if(a.tag===13){var s=Ot();s=Hi(s);var n=Es(a,s);n!==null&&Dt(n,a,s),Xo(a,s)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ti(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Zo(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Ji=s,a.target.dispatchEvent(s),Ji=null}else return t=vs(a),t!==null&&Kf(t),e.blockedOn=a,!1;t.shift()}return!0}function eh(e,t,a){Ti(e)&&a.delete(t)}function Ip(){Fo=!1,Ga!==null&&Ti(Ga)&&(Ga=null),Va!==null&&Ti(Va)&&(Va=null),Xa!==null&&Ti(Xa)&&(Xa=null),tn.forEach(eh),an.forEach(eh)}function ji(e,t){e.blockedOn===t&&(e.blockedOn=null,Fo||(Fo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ip)))}var Ai=null;function th(e){Ai!==e&&(Ai=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ai===e&&(Ai=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],n=e[t+2];if(typeof s!="function"){if($o(s||a)===null)continue;break}var i=vs(a);i!==null&&(e.splice(t,3),t-=3,Zr(i,{pending:!0,data:n,method:a.method,action:s},s,n))}}))}function ln(e){function t(y){return ji(y,e)}Ga!==null&&ji(Ga,e),Va!==null&&ji(Va,e),Xa!==null&&ji(Xa,e),tn.forEach(t),an.forEach(t);for(var a=0;a<Qa.length;a++){var s=Qa[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Qa.length&&(a=Qa[0],a.blockedOn===null);)If(a),a.blockedOn===null&&Qa.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var n=a[s],i=a[s+1],d=n[wt]||null;if(typeof i=="function")d||th(a);else if(d){var h=null;if(i&&i.hasAttribute("formAction")){if(n=i,d=i[wt]||null)h=d.formAction;else if($o(n)!==null)continue}else h=d.action;typeof h=="function"?a[s+1]=h:(a.splice(s,3),s-=3),th(a)}}}function Jo(e){this._internalRoot=e}Ri.prototype.render=Jo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,s=Ot();Ff(a,s,e,t,null,null)},Ri.prototype.unmount=Jo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ff(e.current,2,null,e,null,null),oi(),t[bs]=null}};function Ri(e){this._internalRoot=e}Ri.prototype.unstable_scheduleHydration=function(e){if(e){var t=bc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Qa.length&&t!==0&&t<Qa[a].priority;a++);Qa.splice(a,0,e),a===0&&If(e)}};var ah=u.version;if(ah!=="19.1.0")throw Error(o(527,ah,"19.1.0"));R.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=b(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var e0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_i.isDisabled&&_i.supportsFiber)try{Zt=_i.inject(e0),lt=_i}catch{}}return rn.createRoot=function(e,t){if(!f(e))throw Error(o(299));var a=!1,s="",n=bd,i=xd,d=vd,h=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(d=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(h=t.unstable_transitionCallbacks)),t=Zf(e,1,!1,null,null,a,s,n,i,d,h,null),e[bs]=t.current,Eo(e),new Jo(t)},rn.hydrateRoot=function(e,t,a){if(!f(e))throw Error(o(299));var s=!1,n="",i=bd,d=xd,h=vd,y=null,E=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(h=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(y=a.unstable_transitionCallbacks),a.formState!==void 0&&(E=a.formState)),t=Zf(e,1,!0,t,a??null,s,n,i,d,h,y,E),t.context=$f(null),a=t.current,s=Ot(),s=Hi(s),n=_a(s),n.callback=null,Ma(a,n,s),a=s,t.current.lanes=a,ul(t,a),aa(t),e[bs]=t.current,Eo(e),new Ri(t)},rn.version="19.1.0",rn}var fh;function u0(){if(fh)return Po.exports;fh=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(u){console.error(u)}}return r(),Po.exports=c0(),Po.exports}var d0=u0();const f0=Eh(d0);var tt=(r=>(r.Move="Move",r.Attack="Attack",r.Scavenge="Scavenge",r.Trade="Trade",r.Return="Return",r.Scout="Scout",r.BuildOutpost="Build Outpost",r))(tt||{}),pe=(r=>(r.PassiveFoodGeneration="PASSIVE_FOOD_GENERATION",r.PassiveScrapGeneration="PASSIVE_SCRAP_GENERATION",r.ScavengeYieldBonus="SCAVENGE_YIELD_BONUS",r.CombatBonusAttack="COMBAT_BONUS_ATTACK",r.CombatBonusDefense="COMBAT_BONUS_DEFENSE",r.MovementSpeedBonus="MOVEMENT_SPEED_BONUS",r))(pe||{}),Oh=(r=>(r.Wanderer="Wanderer",r))(Oh||{}),De=(r=>(r.War="War",r.Neutral="Neutral",r.Alliance="Alliance",r))(De||{}),ie=(r=>(r.Move="Move",r.Scout="Scout",r.Scavenge="Scavenge",r.Recruit="Recruit",r.Attack="Attack",r.Rest="Rest",r.Explore="Explore",r.StartResearch="Start Research",r.BuildWeapons="Build Weapons",r.BuildOutpost="Build Outpost",r.SupplyOutpost="Supply Outpost",r.Trade="Trade",r.Defend="Defend",r.SetRations="Set Rations",r.Return="Return",r.Upkeep="Upkeep",r.Technology="Technology",r.RespondToTrade="Respond to Trade",r))(ie||{}),ae=(r=>(r.Plains="Plains",r.Desert="Desert",r.Mountains="Mountains",r.Forest="Forest",r.Ruins="Ruins",r.Wasteland="Wasteland",r.Water="Water",r.Radiation="Radiation",r.Crater="Crater",r.Swamp="Swamp",r))(ae||{}),F=(r=>(r.Scrapyard="Scrapyard",r.FoodSource="Food Source",r.WeaponsCache="WeaponsCache",r.ResearchLab="Research Lab",r.Settlement="Settlement",r.Outpost="Outpost",r.Ruins="Ruins POI",r.BanditCamp="Bandit Camp",r.Mine="Mine",r.Vault="Vault",r.Battlefield="Battlefield",r.Factory="Factory",r.Crater="Crater POI",r.Radiation="Radiation Zone",r))(F||{});const Ei=25,Wt=1,Dh={food:100,scrap:20,morale:50},h0={troops:20,weapons:10},sa={skull:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM9 9a1 1 0 011-1h4a1 1 0 110 2h-4a1 1 0 01-1-1zm-1 5a1 1 0 011-1h6a1 1 0 110 2H9a1 1 0 01-1-1zm-2-1a1 1 0 011-1h1a1 1 0 110 2H7a1 1 0 01-1-1zm10-1a1 1 0 011-1h1a1 1 0 110 2h-1a1 1 0 01-1-1zm-5-3a1 1 0 011-1h2a1 1 0 110 2h-2a1 1 0 01-1-1zM9 16.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm6 0c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"}),wolf:l.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm-2-9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm4 0c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-.01 4.5c-1.39 0-2.6-1.04-3.13-2.5h6.27c-.53 1.46-1.74 2.5-3.14 2.5z"}),raven:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-4-8.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5S6.5 13.83 6.5 13 7.17 11.5 8 11.5zm8 0c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zM12 15c-2.33 0-4.31-1.46-5.11-3.5h10.22C16.31 13.54 14.33 15 12 15z"}),gear:l.jsx("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69-.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12-.64l2 3.46c.12.22.39.3.61.22l2.49 1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61.22l2-3.46c.12-.22-.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"}),biohazard:l.jsx("path",{d:"M12.83,11.17,14,12.34V14a1,1,0,0,1-2,0V12.66l-1.17-1.17a3,3,0,0,1-1.66,0L8,12.66V14a1,1,0,0,1-2,0V12.34L7.17,11.17a3,3,0,0,1,0-4.34L6,5.66V4A1,1,0,0,1,8,4V5.34l1.17,1.17a3,3,0,0,1,1.66,0L12,5.34V4a1,1,0,0,1,2,0V5.66l1.17,1.17a3,3,0,0,1,0,4.34M12,2a10,10,0,1,0,10,10A10,10,0,0,0,12,2Zm0,5a1,1,0,1,0,1,1A1,1,0,0,0,12,7Z"}),spider:l.jsx("path",{d:"M19,10a1,1,0,0,0-1,1,5,5,0,0,1-4,4.9V12h2a1,1,0,0,0,0-2H14V7h2a1,1,0,0,0,0-2H14V2a1,1,0,0,0-2,0V5H10V2a1,1,0,0,0-2,0V5H6a1,1,0,0,0,0,2H8v3H6a1,1,0,0,0,0,2H8v4.9A5,5,0,0,1,4,11a1,1,0,0,0-2,0,7,7,0,0,0,6,6.9V22a1,1,0,0,0,2,0V17.9a7,7,0,0,0,6-6.9,1,1,0,0,0-1-1Z"}),serpent:l.jsx("path",{d:"M18.36,8.76a1,1,0,0,0-1.41,0L13,12.71V5a1,1,0,0,0-2,0v7.71L7.05,8.76a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.41l5.66,5.66a1,1,0,0,0,1.41,0l5.66-5.66A1,1,0,0,0,18.36,8.76Z"}),claw:l.jsx("path",{d:"M20,17.18V5a3,3,0,0,0-3-3H7A3,3,0,0,0,4,5V17.18a3,3,0,0,0,1.24,2.45l.18.13,6,4.3a.49.49,0,0,0,.56,0l6-4.3.18-.13A3,3,0,0,0,20,17.18ZM8,10a1,1,0,1,1,1,1A1,1,0,0,1,8,10Zm4,0a1,1,0,1,1,1,1A1,1,0,0,1,12,10Zm4,0a1,1,0,1,1,1,1A1,1,0,0,1,16,10Z"})},il=["#F56565","#4299E1","#48BB78","#ED8936","#9F7AEA","#ECC94B","#38B2AC","#ED64A6","#A0AEC0","#667EEA","#F687B3","#D69E2E","#319795","#6B46C1","#C53030","#059669"],fn={[F.Scrapyard]:"S",[F.FoodSource]:"F",[F.WeaponsCache]:"W",[F.ResearchLab]:"R",[F.Settlement]:"H",[F.Outpost]:"O",[F.Ruins]:"X",[F.BanditCamp]:"B",[F.Mine]:"M",[F.Vault]:"V",[F.Battlefield]:"!",[F.Factory]:"C",[F.Crater]:"◎",[F.Radiation]:"☣"},la={[F.Scrapyard]:{bg:"fill-slate-500",text:"text-white"},[F.FoodSource]:{bg:"fill-green-600",text:"text-white"},[F.WeaponsCache]:{bg:"fill-red-600",text:"text-white"},[F.ResearchLab]:{bg:"fill-blue-500",text:"text-white"},[F.Settlement]:{bg:"fill-amber-400",text:"text-black"},[F.Outpost]:{bg:"fill-yellow-700",text:"text-white"},[F.Ruins]:{bg:"fill-purple-600",text:"text-white"},[F.BanditCamp]:{bg:"fill-red-500",text:"text-white"},[F.Mine]:{bg:"fill-orange-800",text:"text-white"},[F.Vault]:{bg:"fill-yellow-400",text:"text-black"},[F.Battlefield]:{bg:"fill-red-800",text:"text-white"},[F.Factory]:{bg:"fill-gray-600",text:"text-white"},[F.Crater]:{bg:"fill-stone-700",text:"text-white"},[F.Radiation]:{bg:"fill-lime-400",text:"text-black"}},Oi={[F.FoodSource]:"Common",[F.Scrapyard]:"Common",[F.Ruins]:"Common",[F.Outpost]:"Uncommon",[F.WeaponsCache]:"Uncommon",[F.BanditCamp]:"Uncommon",[F.Settlement]:"Rare",[F.ResearchLab]:"Rare",[F.Mine]:"Rare",[F.Factory]:"Rare",[F.Battlefield]:"Rare",[F.Vault]:"Very Rare",[F.Crater]:"Rare",[F.Radiation]:"Very Rare"},al=["What was your first pet's name?","What city were you born in?","What is your mother's maiden name?","What was the model of your first car?","What is the name of your favorite childhood friend?"],m0=({stats:r,setStats:u,remainingPoints:c})=>{const o=(f,m)=>{u(x=>{const S=Object.keys(x).reduce((w,q)=>w+x[q],0);if(m>0&&S>=Ei||m<0&&x[f]<=Wt)return x;const b={...x,[f]:x[f]+m};return Object.keys(b).reduce((w,q)=>w+b[q],0)>Ei?x:b})};return l.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h4",{className:"text-md font-semibold text-slate-300",children:"Allocate Attribute Points"}),l.jsxs("div",{className:"text-lg font-bold text-amber-400",children:[c," ",l.jsx("span",{className:"text-sm font-normal text-slate-400",children:"Points Left"})]})]}),l.jsx("div",{className:"space-y-3",children:Object.keys(r).map(f=>{const m=f;return l.jsxs("div",{className:"flex items-center justify-between bg-slate-900/50 p-2 rounded-md",children:[l.jsx("span",{className:"capitalize font-medium text-slate-300",children:m}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("button",{type:"button",onClick:()=>o(m,-1),disabled:r[m]<=Wt,className:"w-8 h-8 rounded-full bg-slate-600 hover:bg-slate-500 disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:"-"}),l.jsx("span",{className:"w-8 text-center font-bold text-xl text-white",children:r[m]}),l.jsx("button",{type:"button",onClick:()=>o(m,1),disabled:c<=0,className:"w-8 h-8 rounded-full bg-slate-600 hover:bg-slate-500 disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:"+"})]})]},m)})})]})},p0=({selectedIcon:r,onSelect:u})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Choose Your Tribe's Icon"}),l.jsx("div",{className:"flex justify-center items-center flex-wrap gap-4 p-3 bg-slate-700/50 rounded-lg",children:Object.entries(sa).map(([c,o])=>l.jsx("button",{type:"button",onClick:()=>u(c),className:`w-16 h-16 flex items-center justify-center rounded-full transition-all duration-200 ${r===c?"bg-amber-600 text-white ring-2 ring-offset-2 ring-offset-slate-800 ring-amber-500":"bg-slate-600 text-slate-300 hover:bg-slate-500"}`,children:l.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 fill-current",children:o})},c))})]}),Ce=({children:r,className:u="",title:c,titleClassName:o="",actions:f})=>l.jsxs("div",{className:`bg-neutral-900/70 border border-neutral-700 rounded-lg shadow-lg overflow-hidden flex flex-col ${u}`,children:[c&&l.jsxs("div",{className:`p-4 border-b border-neutral-700 flex justify-between items-center ${o}`,children:[l.jsx("h3",{className:"text-lg font-bold text-amber-400 tracking-wider",children:c}),f&&l.jsx("div",{children:f})]}),l.jsx("div",{className:"p-4 flex-grow",children:r})]}),fe=({children:r,variant:u="primary",className:c,...o})=>{const f="px-4 py-2 font-bold rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",m={primary:"bg-amber-600 hover:bg-amber-700 text-white focus:ring-amber-500",secondary:"bg-slate-600 hover:bg-slate-700 text-slate-100 focus:ring-slate-500"};return l.jsx("button",{className:`${f} ${m[u]} ${c}`,...o,children:r})},g0=({selectedColor:r,onSelect:u})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Choose Your Tribe's Color"}),l.jsx("div",{className:"flex justify-center items-center flex-wrap gap-2 p-3 bg-slate-700/50 rounded-lg",children:il.map(c=>l.jsx("button",{type:"button",onClick:()=>u(c),className:`w-10 h-10 rounded-full transition-all duration-200 ${r===c?"ring-2 ring-offset-2 ring-offset-slate-800 ring-amber-400":""}`,style:{backgroundColor:c}},c))})]}),b0=({onTribeCreate:r,user:u})=>{const[c,o]=$.useState(u.username),[f,m]=$.useState(""),[x,S]=$.useState(Object.keys(sa)[0]||"skull"),[b,g]=$.useState(il[0]),[w,q]=$.useState({charisma:Wt,intelligence:Wt,leadership:Wt,strength:Wt}),_=$.useMemo(()=>Object.values(w).reduce((T,z)=>T+z,0),[w]),C=Ei-_,p=T=>{if(T.preventDefault(),C!==0||!c||!f){alert("Please fill out all fields and allocate all stat points.");return}r({playerName:c,tribeName:f,icon:x,color:b,stats:w})};return l.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-900",children:l.jsx(Ce,{title:"Found a New Tribe",className:"max-w-2xl w-full",children:l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs("p",{className:"text-slate-400 text-center",children:["The old world is gone, ",u.username,". Lead your survivors to a new dawn."]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"playerName",className:"block text-sm font-medium text-slate-300 mb-1",children:"Your Name"}),l.jsx("input",{type:"text",id:"playerName",value:c,onChange:T=>o(T.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200 focus:ring-amber-500 focus:border-amber-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"tribeName",className:"block text-sm font-medium text-slate-300 mb-1",children:"Tribe Name"}),l.jsx("input",{type:"text",id:"tribeName",value:f,onChange:T=>m(T.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200 focus:ring-amber-500 focus:border-amber-500",required:!0})]})]}),l.jsx(p0,{selectedIcon:x,onSelect:S}),l.jsx(g0,{selectedColor:b,onSelect:g}),l.jsx(m0,{stats:w,setStats:q,remainingPoints:C}),l.jsx(fe,{type:"submit",disabled:C!==0||!c||!f,className:"w-full",children:"Begin Survival"})]})})})},hh=({currentUser:r,playerTribe:u,onLogout:c,onNavigateToAdmin:o,onNavigateToLeaderboard:f,onOpenHelp:m,onOpenCodex:x,turn:S,gamePhase:b})=>{const g={planning:"Action Planning",processing:"Processing...",results:"Turn Results",observing:"Observing",waiting:"Waiting for Admin"},w=()=>{switch(b){case"processing":case"waiting":return"text-yellow-400 animate-pulse";default:return"text-amber-400"}};return l.jsxs("header",{className:"bg-slate-800 p-4 rounded-lg shadow-lg flex flex-col sm:flex-row justify-between items-center border-b-4 border-amber-600",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[u&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-12 h-12 bg-slate-700 rounded-full flex items-center justify-center",children:l.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 fill-current text-amber-400",children:sa[u.icon]})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white tracking-wide",children:u.tribeName}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Led by ",u.playerName]})]})]}),!u&&l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white tracking-wide",children:"Observer"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["User: ",r.username]})]})]}),l.jsxs("div",{className:"text-center sm:text-right mt-4 sm:mt-0 flex items-center space-x-4",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-slate-300",children:["Turn ",S]}),l.jsx("p",{className:`text-sm ${w()}`,children:g[b]})]}),f&&l.jsxs(fe,{onClick:f,variant:"secondary",className:"flex items-center space-x-2",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),l.jsx("span",{children:"Leaderboard"})]}),l.jsxs(fe,{onClick:x,variant:"secondary",className:"flex items-center space-x-2",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),l.jsx("span",{children:"Codex"})]}),l.jsxs(fe,{onClick:m,variant:"secondary",className:"flex items-center space-x-2",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 .863-.37 1.64-.945 2.201a3.978 3.978 0 01-2.122 1.015M12 18v.01M12 21a9 9 0 110-18 9 9 0 010 18z"})}),l.jsx("span",{children:"Help"})]}),r.role==="admin"&&l.jsx(fe,{onClick:o,variant:"secondary",children:"Admin Panel"}),l.jsx(fe,{onClick:c,children:"Logout"})]})]})},x0=({globalResources:r,garrisons:u,rationLevel:c})=>{const o=Object.values(u).reduce((b,g)=>b+g.troops,0),f=Object.values(u).reduce((b,g)=>b+g.weapons,0),m={Hard:"Hard (0.5x)",Normal:"Normal (1.0x)",Generous:"Generous (1.5x)"},x={troops:o,food:r.food,weapons:f,scrap:r.scrap,morale:r.morale,rations:m[c]||"Normal (1.0x)"},S={troops:"👥",food:"🍞",weapons:"⚔️",scrap:"⚙️",morale:"😊",rations:"⚖️"};return l.jsx(Ce,{title:"Resources",children:l.jsx("ul",{className:"space-y-2",children:Object.entries(x).map(([b,g])=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-900/50 p-2 rounded-md",children:[l.jsxs("span",{className:"flex items-center font-medium capitalize text-slate-300",children:[l.jsx("span",{className:"mr-3 text-lg",children:S[b]}),b]}),l.jsx("span",{className:"font-bold text-lg text-white",children:g})]},b))})})},v0=({stats:r})=>l.jsx(Ce,{title:"Tribe Attributes",children:l.jsx("ul",{className:"space-y-2",children:Object.entries(r).map(([u,c])=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-900/50 p-2 rounded-md",children:[l.jsx("span",{className:"font-medium capitalize text-slate-300",children:u}),l.jsx("span",{className:"font-bold text-lg text-white",children:c})]},u))})}),ct={[ie.Move]:{name:"Move",description:"Relocate troops, chiefs, and equipment between garrisons.",icon:At.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"}),fields:[{name:"start_location",label:"Move From",type:"garrison_select"},{name:"finish_location",label:"Destination",type:"targetLocation"},{name:"troops",label:"Troops",type:"number",defaultValue:1,max:"troops"},{name:"weapons",label:"Weapons",type:"number",defaultValue:0,max:"weapons"},{name:"chiefsToMove",label:"Chiefs",type:"chief_select"},{name:"info",label:"Info",type:"info",info:"Attrition: 2% per hex + terrain mods."}]},[ie.Scout]:{name:"Scout",description:"Gather intelligence on distant locations. Risk and reward depend on distance and scout party strength.",icon:At.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}),fields:[{name:"start_location",label:"Start",type:"garrison_select"},{name:"target_location",label:"Target",type:"targetLocation"},{name:"troops",label:"Scouts",type:"number",defaultValue:1,max:"troops"},{name:"weapons",label:"Weapons",type:"number",defaultValue:0,max:"weapons"},{name:"chiefsToMove",label:"Chief Scout(s)",type:"chief_select"},{name:"info",label:"Info",type:"info",info:"Reveals an area. Risk of casualties increases with distance. Chiefs with high Intelligence improve results and reduce risk."}]},[ie.Scavenge]:{name:"Scavenge",description:"Gather specific resources. The wasteland is dangerous; send protection.",icon:At.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-2.25-1.313M21 7.5v2.25m0-2.25l-2.25 1.313M3 7.5l2.25-1.313M3 7.5l2.25 1.313M3 7.5v2.25m9 3l2.25-1.313M12 12.75l-2.25 1.313M12 12.75V15m0-2.25l2.25 1.313M9 15l2.25-1.313M15 15l-2.25-1.313M15 15V12.75m-3-7.5V3m3 4.5V3m-3 0h3"}),fields:[{name:"start_location",label:"Operate From",type:"garrison_select"},{name:"target_location",label:"Target Hex",type:"targetLocation"},{name:"resource_type",label:"Resource",type:"select",options:["Food","Scrap","Weapons"]},{name:"troops",label:"Scavengers",type:"number",defaultValue:5,max:"troops"},{name:"weapons",label:"Weapons",type:"number",defaultValue:0,max:"weapons"},{name:"chiefsToMove",label:"Chief(s) to lead",type:"chief_select"},{name:"info",label:"Info",type:"info",info:"Yields affected by terrain and POIs. Random events can occur. Weapons and Chiefs can improve survival and success."}]},[ie.Recruit]:{name:"Recruit",description:"Convert food into new troops for your tribe.",icon:At.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-3.742 2.72a9.094 9.094 0 01-3.742-.479 3 3 0 01-4.682-2.72m3.742 2.72c.283 0 .567.022.85.065m-2.148-.065a9.094 9.094 0 01-1.592-.479 3 3 0 01-2.54-1.921M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),fields:[{name:"start_location",label:"Location",type:"garrison_select"},{name:"food_offered",label:"Food Offered (Global)",type:"number",defaultValue:10,max:"food"},{name:"info",label:"Info",type:"info",info:"Base rate: 0.3 recruits per food. Charisma improves results."}]},[ie.SetRations]:{name:"Set Rations",description:"Adjust food rations. Affects morale and consumption rate. Persists until changed.",icon:At.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"}),fields:[{name:"ration_level",label:"Ration Level",type:"select",options:["Hard","Normal","Generous"],defaultValue:"Normal"},{name:"info",label:"Info",type:"info",info:"Hard: 0.5x food/troop, -2 morale/turn. Normal: 1x food/troop. Generous: 1.5x food/troop, +2 morale/turn (if not starving)."}]},[ie.Rest]:{name:"Rest",description:"Restore troop morale and combat effectiveness.",icon:At.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}),fields:[{name:"start_location",label:"Location",type:"garrison_select"},{name:"troops",label:"Resting Troops",type:"number",defaultValue:1,max:"troops"},{name:"info",label:"Info",type:"info",info:"Recovers 15-25 morale, affected by leadership."}]},[ie.BuildWeapons]:{name:"Build Weapons",description:"Convert scrap into valuable weapons.",icon:At.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 3H12v2.25L13.5 6v12H6V6L7.5 5.25V3H6m13.5 0h-1.5v2.25L21 6v12h-7.5V6L15 5.25V3z"}),fields:[{name:"start_location",label:"Location",type:"garrison_select"},{name:"scrap",label:"Scrap Used (Global)",type:"number",defaultValue:5,max:"scrap"},{name:"info",label:"Info",type:"info",info:"Base rate: 0.4 weapons per scrap. Intelligence improves yield."}]},[ie.Defend]:{name:"Defend",description:"Prepare defensive positions for an impending attack.",icon:At.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286z"}),fields:[{name:"start_location",label:"Location",type:"garrison_select"},{name:"troops",label:"Defenders",type:"number",defaultValue:1,max:"troops"},{name:"info",label:"Info",type:"info",info:"Provides a +30% defense bonus when attacked."}]},[ie.Attack]:{name:"Attack",description:"Assault an enemy position to capture it.",icon:At.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5"}),fields:[{name:"start_location",label:"Staging Area",type:"garrison_select"},{name:"target_location",label:"Target",type:"targetLocation"},{name:"troops",label:"Assault Force",type:"number",defaultValue:1,max:"troops"},{name:"weapons",label:"Weapons",type:"number",defaultValue:0,max:"weapons"},{name:"chiefsToMove",label:"Chiefs",type:"chief_select"},{name:"info",label:"Info",type:"info",info:"Strength and terrain are key factors. High risk of casualties."}]},[ie.BuildOutpost]:{name:"Build Outpost",description:"Establish a new garrison in an unoccupied hex. Extends your tribe's reach.",icon:At.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}),fields:[{name:"start_location",label:"Build From",type:"garrison_select"},{name:"target_location",label:"Target Hex",type:"targetLocation"},{name:"troops",label:"Builders",type:"number",defaultValue:5,max:"troops"},{name:"info",label:"Info",type:"info",info:"Costs 25 Scrap. Requires at least 5 builders. The builders will garrison the new outpost."}]},[ie.Trade]:{name:"Trade",description:"Dispatch a guarded caravan to trade resources with another tribe.",icon:At.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"}),fields:[{name:"start_location",label:"From",type:"garrison_select"},{name:"target_location_and_tribe",label:"To",type:"select"},{name:"troops",label:"Guards",type:"number",max:"troops"},{name:"weapons",label:"Guard Weapons",type:"number",max:"weapons"},{name:"chiefsToMove",label:"Guard Chiefs",type:"chief_select"},{name:"offer_food",label:"Food",type:"number",max:"food"},{name:"offer_scrap",label:"Scrap",type:"number",max:"scrap"},{name:"offer_weapons",label:"Weapons",type:"number",max:"weapons"},{name:"request_food",label:"Food",type:"number"},{name:"request_scrap",label:"Scrap",type:"number"},{name:"request_weapons",label:"Weapons",type:"number"}]}},y0=({actions:r,maxActions:u,onOpenModal:c,onDeleteAction:o,onFinalize:f,phase:m})=>{const x=m==="planning",S=b=>{const{actionType:g,actionData:w}=b,q=ct[g];return q?`${q.fields.map(C=>C.type==="info"||!w[C.name]?null:`${C.label}: ${w[C.name]}`).filter(Boolean).join(", ")}`:"Unknown Action"};return l.jsx(Ce,{title:`Turn Actions (${r.length}/${u})`,children:l.jsxs("div",{className:"space-y-3",children:[r.length>0?l.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:r.map(b=>l.jsxs("li",{className:"text-sm p-2 bg-slate-900/50 rounded-md flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-bold text-amber-400",children:b.actionType}),l.jsx("p",{className:"text-slate-300 text-xs",children:S(b)})]}),x&&l.jsx("button",{onClick:()=>o(b.id),className:"text-red-500 opacity-0 group-hover:opacity-100 transition-opacity font-bold text-lg","aria-label":`Delete action ${b.actionType}`,children:"×"})]},b.id))}):l.jsx("p",{className:"text-center text-slate-400 italic py-4",children:x?"No actions planned.":"Processing..."}),l.jsxs("div",{className:"flex space-x-2 pt-2 border-t border-slate-700",children:[l.jsx(fe,{variant:"secondary",className:"flex-1",onClick:c,disabled:!x||r.length>=u,children:"Add Action"}),l.jsx(fe,{className:"flex-1",onClick:f,disabled:!x||r.length===0,children:"Finalize Actions"})]})]})})};function mh(r,u){return{q:r,r:u,s:-r-u}}function w0(r,u){return(Math.abs(r.q-u.q)+Math.abs(r.r-u.r)+Math.abs(r.s-u.s))/2}function rc(r,u,c,o){const f=mh(r,u),m=mh(c,o);return w0(f,m)}const ht=(r,u)=>`${String(50+r).padStart(3,"0")}.${String(50+u).padStart(3,"0")}`,Ye=r=>{const[u,c]=r.split(".");return{q:parseInt(u)-50,r:parseInt(c)-50}};function ms(r,u){const c=[];for(let o=-u;o<=u;o++)for(let f=-u;f<=u;f++)if(o+f>=-u&&o+f<=u){const m=r.q+o,x=r.r+f;rc(r.q,r.r,m,x)<=u&&c.push(ht(m,x))}return c}function kh(r,u,c){const o=Math.sqrt(3)*c,f=2*c,m=o*(r+u/2),x=f*3/4*u;return{x:m,y:x}}const Na=5,S0={[ae.Plains]:1/Na,[ae.Wasteland]:1/Na,[ae.Forest]:1.5/Na,[ae.Desert]:1.5/Na,[ae.Ruins]:1.2/Na,[ae.Swamp]:2/Na,[ae.Mountains]:2.5/Na,[ae.Crater]:1.8/Na,[ae.Radiation]:1/Na,[ae.Water]:1/0},N0=[{q:1,r:0},{q:-1,r:0},{q:0,r:1},{q:0,r:-1},{q:1,r:-1},{q:-1,r:1}];function $a(r,u,c){const o=new Map(c.map(w=>[ht(w.q,w.r),w])),f=ht(r.q,r.r),m=ht(u.q,u.r),x=new Set([f]),S=new Map,b=new Map;b.set(f,0);const g=new Map;for(g.set(f,rc(r.q,r.r,u.q,u.r));x.size>0;){let w="",q=1/0;for(const C of x)(g.get(C)??1/0)<q&&(q=g.get(C),w=C);if(w===m){const C=[];let p=w;for(;p;)C.unshift(p),p=S.get(p);return{path:C,cost:Math.ceil(b.get(m)??0)}}x.delete(w);const _=Ye(w);for(const C of N0){const p={q:_.q+C.q,r:_.r+C.r},T=ht(p.q,p.r),z=o.get(T);if(!z)continue;const P=S0[z.terrain]??1/0;if(P===1/0)continue;const H=(b.get(w)??1/0)+P;H<(b.get(T)??1/0)&&(S.set(T,w),b.set(T,H),g.set(T,H+rc(p.q,p.r,u.q,u.r)),x.has(T)||x.add(T))}}return null}const T0=r=>{const{hexData:u,size:c,tribesOnHex:o,playerTribe:f,isInPlayerInfluence:m,isFogged:x,isSelectable:S,startOrder:b,onClick:g,onMouseDown:w,onMouseOver:q,onMouseEnter:_,onMouseLeave:C,isPoliticalMode:p,politicalData:T}=r,{q:z,r:P,terrain:H,poi:J}=u,ee=Math.sqrt(3)*c,U=2*c,le=ee*(z+P/2),B=U*3/4*P,Z=[[0,-c],[ee/2,-c/2],[ee/2,c/2],[0,c],[-ee/2,c/2],[-ee/2,-c/2]].map(he=>`${he[0]},${he[1]}`).join(" "),W=()=>{if(!o||o.length===0)return null;const he=ht(z,P),K=te=>{if(!f)return"bg-slate-600/80";if(te.id===f.id)return"bg-green-700/80";const v=f.diplomacy[te.id]?.status;return v===De.Alliance?"bg-blue-800/80":v===De.War?"bg-red-800/80":"bg-yellow-800/80"};if(o.length===1){const te=o[0],v=te.garrisons[he],O=v?.troops??0,Q=v?.chiefs?.length??0,I=sa[te.icon]||sa.skull;return l.jsxs("g",{className:"pointer-events-none transform-gpu transition-transform group-hover:-translate-y-1 duration-200",children:[l.jsx("svg",{x:-c*.5,y:-c*.5,width:c,height:c,viewBox:"0 0 24 24",className:"fill-current",style:{color:te.color,filter:"drop-shadow(0 1px 1px rgba(0,0,0,0.7))"},children:I}),O>0&&l.jsxs("g",{transform:`translate(0, ${c*.5})`,children:[l.jsx("rect",{x:-c*.4,y:"0",width:c*.8,height:c*.4,rx:"2",className:`${K(te)} stroke-black/50`,strokeWidth:"0.5"}),l.jsx("text",{x:"0",y:c*.2,dy:".05em",textAnchor:"middle",className:"font-bold fill-white",fontSize:c*.3,children:O})]}),Q>0&&l.jsx("text",{x:"0",y:-c*.45,textAnchor:"middle",className:"font-bold fill-yellow-300",fontSize:c*.8,style:{filter:"drop-shadow(0 0 2px black)"},children:"★"})]})}const A=c*.8,V=-(o.length*A-(o.length-1)*(A/2))/2;return l.jsx("g",{className:"pointer-events-none",children:o.map((te,v)=>{const O=sa[te.icon]||sa.skull,Q=V+v*(A/1.8);return l.jsx("g",{transform:`translate(${Q}, 0)`,children:l.jsx("svg",{x:-A/2,y:-A/2,width:A,height:A,viewBox:"0 0 24 24",className:"fill-current",style:{color:te.color,filter:"drop-shadow(0 1px 1px rgba(0,0,0,0.7))"},children:O})},te.id)})})},oe=()=>p?T?T.color:H===ae.Water?"#1f2937":"#4b5563":`url(#texture-${H})`,de=c*.4,se=[[0,-de],[de,0],[0,de],[-de,0]].map(he=>he.join(",")).join(" "),ge=["group",S?"cursor-pointer":"",x&&!p?"pointer-events-none":""].filter(Boolean).join(" ");return l.jsxs("g",{transform:`translate(${le}, ${B})`,onClick:g,onMouseDown:w,onMouseOver:q,onMouseEnter:_,onMouseLeave:C,className:ge,children:[p&&T&&l.jsx("title",{children:`${T.tribeName}'s Territory`}),l.jsx("polygon",{points:Z,fill:oe(),className:"transition-colors duration-100 stroke-black/50 group-hover:stroke-amber-400",strokeWidth:S?1.2:.5}),!p&&m&&u.terrain!=="Water"&&l.jsx("polygon",{points:Z,className:"fill-green-400/10 stroke-green-400/30 pointer-events-none",strokeWidth:"0.5"}),!p&&J&&!x&&l.jsxs("g",{className:"pointer-events-none",style:J.rarity==="Very Rare"?{filter:"url(#poi-glow)"}:{},children:[l.jsx("polygon",{points:se,className:`${la[J.type].bg} stroke-black/50 stroke-1`}),l.jsx("text",{x:"0",y:"0",dy:".3em",textAnchor:"middle",className:`font-bold ${la[J.type].text}`,style:{fontSize:`${c*.4}px`},children:fn[J.type]})]}),!p&&!x&&W(),!p&&b!==null&&!x&&l.jsxs("g",{className:"pointer-events-none",children:[l.jsx("path",{d:`M ${-c*.6} ${c*.5} L 0 ${-c*.5} L ${c*.6} ${c*.5} Z`,className:"fill-amber-200 stroke-slate-800",strokeWidth:"0.7"}),l.jsx("path",{d:`M 0 ${-c*.5} L 0 ${c*.5}`,className:"stroke-slate-800",strokeWidth:"0.7"})]}),!p&&x&&l.jsx("polygon",{points:Z,fill:"url(#fog-pattern)"})]})},j0=()=>l.jsxs(l.Fragment,{children:[l.jsxs("pattern",{id:`texture-${ae.Plains}`,patternUnits:"userSpaceOnUse",width:"20",height:"20",children:[l.jsx("rect",{width:"20",height:"20",fill:"#B4AF8C"}),l.jsx("path",{d:"M 0 5 C 5 10, 15 0, 20 5 M 0 15 C 5 20, 15 10, 20 15",stroke:"#6b6853",strokeWidth:"0.5"})]}),l.jsxs("pattern",{id:`texture-${ae.Forest}`,patternUnits:"userSpaceOnUse",width:"20",height:"20",children:[l.jsx("rect",{width:"20",height:"20",fill:"#648246"}),l.jsx("circle",{cx:"5",cy:"5",r:"3",fill:"#4b6134"}),l.jsx("circle",{cx:"15",cy:"15",r:"4",fill:"#4b6134"}),l.jsx("circle",{cx:"10",cy:"8",r:"2",fill:"#3a4a28"})]}),l.jsxs("pattern",{id:`texture-${ae.Desert}`,patternUnits:"userSpaceOnUse",width:"20",height:"20",children:[l.jsx("rect",{width:"20",height:"20",fill:"#D2BE96"}),l.jsx("path",{d:"M -5 5 C 5 0, 15 10, 25 5",stroke:"#a48e6c",strokeWidth:"1.5",fill:"none"}),l.jsx("path",{d:"M -5 15 C 5 10, 15 20, 25 15",stroke:"#a48e6c",strokeWidth:"1.5",fill:"none"})]}),l.jsxs("pattern",{id:`texture-${ae.Mountains}`,patternUnits:"userSpaceOnUse",width:"30",height:"30",children:[l.jsx("rect",{width:"30",height:"30",fill:"#786E64"}),l.jsx("path",{d:"M -5 15 L 15 0 L 20 10 L 35 5",stroke:"#4a433d",strokeWidth:"3",fill:"none"}),l.jsx("path",{d:"M -5 25 L 10 10 L 18 15 L 35 15",stroke:"#3b3531",strokeWidth:"2",fill:"none"})]}),l.jsxs("pattern",{id:`texture-${ae.Ruins}`,patternUnits:"userSpaceOnUse",width:"16",height:"16",children:[l.jsx("rect",{width:"16",height:"16",fill:"#96826E"}),l.jsx("path",{d:"M 0 0 H 16 M 0 8 H 16 M 0 16 H 16 M 0 0 V 16 M 8 0 V 16 M 16 0 V 16",stroke:"#5f5145",strokeWidth:"0.5"})]}),l.jsxs("pattern",{id:`texture-${ae.Wasteland}`,patternUnits:"userSpaceOnUse",width:"25",height:"25",children:[l.jsx("rect",{width:"25",height:"25",fill:"#A08C78"}),l.jsx("path",{d:"M 0 25 L 25 0 M 10 25 L 25 10 M 0 10 L 10 0",stroke:"#6c5a4b",strokeWidth:"1"})]}),l.jsxs("pattern",{id:`texture-${ae.Water}`,patternUnits:"userSpaceOnUse",width:"20",height:"20",children:[l.jsx("rect",{width:"20",height:"20",fill:"#508CBE"}),l.jsx("path",{d:"M 0 5 C 5 0, 15 10, 20 5",stroke:"#36668d",strokeWidth:"1.5",fill:"none"}),l.jsx("path",{d:"M 0 15 C 5 10, 15 20, 20 15",stroke:"#2d5472",strokeWidth:"1.5",fill:"none"})]}),l.jsxs("pattern",{id:`texture-${ae.Radiation}`,patternUnits:"userSpaceOnUse",width:"20",height:"20",children:[l.jsx("rect",{width:"20",height:"20",fill:"#78B450"}),l.jsx("circle",{cx:"10",cy:"10",r:"8",fill:"transparent",stroke:"#bef264",strokeWidth:"1.5"}),l.jsx("circle",{cx:"10",cy:"10",r:"4",fill:"#a3e635"})]}),l.jsxs("pattern",{id:`texture-${ae.Crater}`,patternUnits:"userSpaceOnUse",width:"40",height:"40",children:[l.jsx("rect",{width:"40",height:"40",fill:"#5A5046"}),l.jsx("circle",{cx:"20",cy:"20",r:"15",stroke:"#3b3531",fill:"none",strokeWidth:"1"}),l.jsx("circle",{cx:"20",cy:"20",r:"10",stroke:"#292524",fill:"none",strokeWidth:"2"})]}),l.jsxs("pattern",{id:`texture-${ae.Swamp}`,patternUnits:"userSpaceOnUse",width:"30",height:"30",children:[l.jsx("rect",{width:"30",height:"30",fill:"#6E965A"}),l.jsx("path",{d:"M 0 10 C 10 5, 20 15, 30 10",stroke:"#4c663d",strokeWidth:"3",fill:"none"}),l.jsx("path",{d:"M 0 25 C 10 20, 20 30, 30 25",stroke:"#3f5133",strokeWidth:"3",fill:"none"})]}),l.jsxs("pattern",{id:"fog-pattern",patternUnits:"userSpaceOnUse",width:"10",height:"10",children:[l.jsx("rect",{width:"10",height:"10",fill:"black"}),l.jsx("path",{d:"M -1 1 L 2 4 M 0 10 L 10 0 M 8 11 L 11 8",stroke:"#1a1a1a",strokeWidth:"0.5"})]})]}),ph=40,gh=.5,bh=5,A0=2,on=12,R0=({journey:r,isPlayer:u,hexSize:c})=>{const{q:o,r:f}=Ye(r.currentLocation),{x:m,y:x}=kh(o,f,c);let S=u?"text-green-400":"text-red-500",b=u?"fill-green-900/70":"fill-red-900/70",g=u?"stroke-green-400":"stroke-red-500",w=l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"});return l.jsxs("g",{transform:`translate(${m}, ${x})`,children:[l.jsx("circle",{cx:"0",cy:"0",r:c*.45,className:b,stroke:g,strokeWidth:"0.5"}),l.jsx("svg",{x:-c*.25,y:-c*.25,width:c*.5,height:c*.5,viewBox:"0 0 24 24",className:`fill-current ${S}`,children:w})]})},Di=r=>{const{mapData:u,playerTribe:c,allTribes:o,journeys:f,startingLocations:m,selectionMode:x,onHexSelect:S,paintMode:b=!1,onHexPaintStart:g,onHexPaint:w,onHexPaintEnd:q,homeBaseLocation:_,territoryData:C}=r,p=$.useRef(null),T=$.useRef(null),z=$.useRef(null),[P,H]=$.useState({x:0,y:0,zoom:1}),J=$.useRef(P),[ee,U]=$.useState(!1),[le,B]=$.useState({x:0,y:0}),[Z,W]=$.useState(null),oe=!!C,de=on*Math.sqrt(3)*(ph+2),se=on*2*(ph+2);$.useEffect(()=>{J.current=P},[P]);const ge=$.useCallback(()=>{if(_&&p.current){const{q:G,r:xe}=Ye(_),{x:ce,y:ye}=kh(G,xe,on),je=3,ke=(de/2-ce)*je,$e=(se/2-ye)*je;H({x:ke,y:$e,zoom:je})}},[_,de,se]),{exploredSet:he,influenceSet:K,visibleTribesByLocation:A}=$.useMemo(()=>{if(oe)return{exploredSet:new Set,influenceSet:new Set,visibleTribesByLocation:new Map};const G=new Set(c?.exploredHexes||[]),xe=new Set,ce=new Map;if(c){const ye=o.filter(ke=>c.diplomacy[ke.id]?.status===De.Alliance);[c,...ye].forEach(ke=>{Object.keys(ke.garrisons||{}).forEach($e=>{const{q:st,r:mt}=Ye($e);ms({q:st,r:mt},A0).forEach(ia=>xe.add(ia))})})}return o.forEach(ye=>{ye.garrisons&&Object.keys(ye.garrisons).forEach(je=>{if(ye.garrisons[je].troops>0||(ye.garrisons[je].chiefs?.length||0)>0){const ke=c&&(ye.id===c.id||c.diplomacy[ye.id]?.status===De.Alliance);(!c||ke||xe.has(je))&&(ce.has(je)||ce.set(je,[]),ce.get(je).push(ye))}})}),{exploredSet:G,influenceSet:xe,visibleTribesByLocation:ce}},[c,o,oe]);At.useEffect(()=>{const G=setTimeout(()=>{ge()},100);return()=>clearTimeout(G)},[_,ge]);const R=G=>{if(G.preventDefault(),!p.current)return;const{clientX:xe,clientY:ce,deltaY:ye}=G,{left:je,top:ke}=p.current.getBoundingClientRect(),$e=xe-je,st=ce-ke,mt=1.1,na=ye<0?P.zoom*mt:P.zoom/mt,ia=Math.min(Math.max(na,gh),bh),yt=$e-($e-P.x)*(ia/P.zoom),ol=st-(st-P.y)*(ia/P.zoom);H({x:yt,y:ol,zoom:ia})},V=G=>{x||b||G.button!==0||(G.preventDefault(),U(!0),B({x:G.clientX,y:G.clientY}))},te=G=>{if(!ee||!z.current)return;G.preventDefault();const xe=G.clientX-le.x,ce=G.clientY-le.y,ye=J.current.x+xe,je=J.current.y+ce;z.current.setAttribute("transform",`translate(${ye}, ${je}) scale(${J.current.zoom})`)},v=G=>{if(ee){U(!1);const xe=G.clientX-le.x,ce=G.clientY-le.y;H({x:J.current.x+xe,y:J.current.y+ce,zoom:J.current.zoom})}b&&q&&q()},O=G=>{if(G==="reset"){H({x:0,y:0,zoom:1});return}const xe=1.5,ce=G==="in"?P.zoom*xe:P.zoom/xe,ye=Math.min(Math.max(ce,gh),bh);if(p.current){const{width:je,height:ke}=p.current.getBoundingClientRect(),$e=je/2,st=ke/2,mt=$e-($e-P.x)*(ye/P.zoom),na=st-(st-P.y)*(ye/P.zoom);H({x:mt,y:na,zoom:ye})}},Q=(G,xe,ce)=>{if(!(ee||b||x)&&T.current){const ye=T.current.getBoundingClientRect(),je=ht(G,xe);let ke=`Hex: ${je}`;const $e=C?.get(je);if(oe)$e?ke=$e.tribeName:u.find(mt=>ht(mt.q,mt.r)===je)?.terrain===ae.Water?ke="Impassable Water":ke="Unclaimed Land";else if(!he.has(je)&&c)return;W({content:ke,x:ce.clientX-ye.left,y:ce.clientY-ye.top})}},I=()=>{W(null)},ne=["bg-black rounded-md overflow-hidden relative",ee?"cursor-grabbing":!x&&!b?"cursor-grab":"",b?"cursor-crosshair":"",x?"border-2 border-amber-400 ring-4 ring-amber-400/50":""].join(" "),ve=$.useMemo(()=>oe||!c?[]:f.filter(G=>G.ownerTribeId===c.id||K.has(G.currentLocation)),[f,c,K,oe]);return l.jsxs("div",{className:"bg-neutral-900/70 border border-neutral-700 rounded-lg shadow-lg p-4 relative overflow-hidden h-full flex flex-col",children:[l.jsx("svg",{width:"0",height:"0",style:{position:"absolute"},children:l.jsx("defs",{children:l.jsx(j0,{})})}),l.jsx("h3",{className:"text-lg font-bold text-amber-400 tracking-wider mb-4 flex-shrink-0",children:oe?"Territory Map":"Wasteland Map"}),l.jsxs("div",{ref:T,className:ne,style:{flexGrow:1},children:[x&&l.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-20 bg-slate-900/80 text-amber-400 px-3 py-1 rounded-md border border-slate-600 font-bold animate-pulse",children:"SELECT A TARGET HEX"}),Z&&l.jsx("div",{className:"absolute z-30 p-2 text-sm font-bold bg-slate-900/80 text-amber-400 rounded-md pointer-events-none",style:{top:`${Z.y+15}px`,left:`${Z.x+15}px`},children:Z.content}),l.jsxs("div",{className:"absolute top-2 right-2 z-20 flex flex-col space-y-1",children:[l.jsx("button",{onClick:()=>O("in"),className:"w-8 h-8 bg-slate-800/80 text-white rounded-md font-bold text-lg hover:bg-slate-700",children:"+"}),l.jsx("button",{onClick:()=>O("out"),className:"w-8 h-8 bg-slate-800/80 text-white rounded-md font-bold text-lg hover:bg-slate-700",children:"-"}),l.jsx("button",{onClick:()=>O("reset"),className:"w-8 h-8 bg-slate-800/80 text-white rounded-md font-bold text-xs hover:bg-slate-700",children:"RST"}),!oe&&_&&l.jsx("button",{onClick:ge,title:"Center on Home Base",className:"w-8 h-8 bg-slate-800/80 text-white rounded-md font-bold text-lg hover:bg-slate-700",children:"🎯"})]}),l.jsx("svg",{ref:p,viewBox:`${-de/2} ${-se/2} ${de} ${se}`,className:"w-full h-full",onWheel:R,onMouseDown:V,onMouseMove:te,onMouseUp:v,onMouseLeave:v,children:l.jsx("g",{ref:z,transform:`translate(${P.x}, ${P.y}) scale(${P.zoom})`,children:l.jsxs("g",{transform:`translate(${-de/2}, ${-se/2})`,children:[u.map(G=>{const xe=ht(G.q,G.r),ce=c?he.has(xe):!0,ye=c?K.has(xe):!1,je=A.get(xe),ke=m.indexOf(xe),$e=C?.get(xe);return l.jsx(T0,{hexData:G,size:on,tribesOnHex:je,playerTribe:c,isInPlayerInfluence:ye,isFogged:!oe&&!ce,isSelectable:(x||b)&&G.terrain!=="Water",startOrder:ke!==-1?ke+1:null,isPoliticalMode:oe,politicalData:$e,onClick:()=>{x&&G.terrain!=="Water"&&S(G.q,G.r)},onMouseDown:()=>{b&&g&&g(G.q,G.r)},onMouseOver:()=>{b&&w&&w(G.q,G.r)},onMouseEnter:st=>Q(G.q,G.r,st),onMouseLeave:I},xe)}),!oe&&ve.map(G=>l.jsx(R0,{journey:G,isPlayer:G.ownerTribeId===c?.id,hexSize:on},G.id))]})})})]}),!oe&&l.jsxs("div",{className:"absolute top-6 left-6 bg-neutral-900/80 p-3 rounded-md border border-neutral-700 max-h-[calc(100vh-4rem)] w-56 hidden md:block z-10 overflow-y-auto",children:[l.jsx("h4",{className:"text-sm font-bold text-amber-400 mb-2",children:"POI Legend"}),l.jsx("div",{className:"grid grid-cols-1 gap-y-1",children:Object.entries(fn).map(([G,xe])=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center text-xs font-bold shrink-0 ${la[G].bg.replace("fill-","bg-")} ${la[G].text}`,children:xe}),l.jsx("span",{className:"text-xs text-slate-300",children:G})]},G))}),l.jsxs("div",{className:"mt-3 pt-3 border-t border-neutral-700",children:[l.jsx("h4",{className:"text-sm font-bold text-amber-400 mb-2",children:"Terrain Key"}),l.jsx("div",{className:"grid grid-cols-1 gap-y-1",children:Object.values(ae).map(G=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-5 h-5 rounded-sm border border-slate-600 shrink-0",viewBox:"0 0 20 20",children:l.jsx("rect",{width:"20",height:"20",fill:`url(#texture-${G})`})}),l.jsx("span",{className:"text-xs text-slate-300",children:G})]},G))})]})]})]})},_0=r=>{const{isOpen:u,onClose:c,onAddAction:o,tribe:f,allTribes:m,mapData:x,availableGarrisons:S,setMapSelectionMode:b,draftAction:g,setDraftAction:w,onEnterMapSelectionMode:q}=r,[_,C]=$.useState(null);if(!u)return null;const p=g?.actionType??null;$.useEffect(()=>{if(g?.actionData?.start_location&&g?.actionData?.finish_location){const B=Ye(g.actionData.start_location),Z=Ye(g.actionData.finish_location),W=$a(B,Z,x);C(W?.cost??null)}else if(g?.actionData?.start_location&&g?.actionData?.target_location){const B=Ye(g.actionData.start_location),Z=Ye(g.actionData.target_location),W=$a(B,Z,x);C(W?.cost??null)}else C(null)},[g,x]);const T=$.useMemo(()=>m.filter(B=>B.id!==f.id).flatMap(B=>Object.keys(B.garrisons).map(Z=>({tribeId:B.id,tribeName:B.tribeName,location:Z}))),[m,f.id]),z=B=>{const Z=ct[B],W={},de=Object.keys(S).filter(se=>{const ge=S[se];return ge.troops>0||(ge.chiefs?.length||0)>0})[0]||Object.keys(f.garrisons)[0]||f.location;Z.fields.forEach(se=>{se.type==="garrison_select"?W[se.name]=de:se.name==="start_location"||se.name==="location"?W[se.name]=f.location:se.defaultValue!==void 0?W[se.name]=se.defaultValue:se.type==="select"&&se.options?W[se.name]=se.options[0]:se.type==="chief_select"?W[se.name]=[]:B===ie.Trade&&(W.offer_food=0,W.offer_scrap=0,W.offer_weapons=0,W.request_food=0,W.request_scrap=0,W.request_weapons=0,W.troops=1,W.weapons=0,T.length>0&&(W.target_location=T[0].location,W.target_tribe_id=T[0].tribeId))}),w({actionType:B,actionData:W})},P=()=>{w(null)},H=(B,Z)=>{w(W=>{if(!W)return null;const oe={...W.actionData,[B]:Z};if(B==="target_location_and_tribe"){const[de,se]=Z.split("|");oe.target_location=de,oe.target_tribe_id=se;const ge=oe.start_location;if(ge){const he=$a(Ye(ge),Ye(de),x);C(he?.cost??null)}}return{...W,actionData:oe}})},J=B=>{q(),b({active:!0,onSelect:Z=>{H(B,Z)}})},ee=B=>{if(B.preventDefault(),!g?.actionType||!g?.actionData)return;const{troops:Z,chiefsToMove:W}=g.actionData;if([ie.Move,ie.Attack,ie.Scout,ie.Scavenge,ie.BuildOutpost,ie.Trade].includes(g.actionType)){const se=Z!==void 0&&Z>0,ge=W&&Array.isArray(W)&&W.length>0;if(!se&&!ge){alert("This action requires at least one troop or chief to be assigned.");return}}if(g.actionType===ie.Trade){const{offer_food:se,offer_scrap:ge,offer_weapons:he,request_food:K,request_scrap:A,request_weapons:R}=g.actionData,V=se+ge+he,te=K+A+R;if(V===0&&te===0){alert("A trade must include at least one offered or requested resource.");return}}const de={id:`action-${Date.now()}`,actionType:g.actionType,actionData:g.actionData};o(de),c()},U=B=>{const Z=g?.actionData?.[B.name]??"",W=g?.actionData?.start_location,oe=W?S[W]:null;switch(B.type){case"garrison_select":{const he=Object.entries(S).filter(([,K])=>K.troops>0||K.chiefs.length>0);return he.length===0?l.jsx("p",{className:"text-sm text-red-500 italic bg-slate-800/50 p-2 rounded-md",children:"No garrisons with available units."}):l.jsx("select",{value:Z,onChange:K=>H(B.name,K.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200 font-mono",children:he.map(([K,A])=>l.jsx("option",{value:K,children:`Hex ${K} (Troops: ${A.troops}, Weapons: ${A.weapons}, Chiefs: ${A.chiefs.length})`},K))})}case"location":return l.jsx("p",{className:"text-lg font-mono bg-slate-800 px-3 py-1 rounded-md",children:Z});case"targetLocation":return l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"text",value:Z,placeholder:"Select on map...",readOnly:!0,className:"w-full bg-slate-800 border border-slate-600 rounded-md p-2 text-slate-200 font-mono"}),l.jsx(fe,{type:"button",variant:"secondary",onClick:()=>J(B.name),children:"Map"})]});case"number":let de;if(B.max&&oe){const he=B.max;de=oe[he]}else B.max&&f.globalResources[B.max]!==void 0&&(de=f.globalResources[B.max]);return l.jsx("input",{type:"number",value:Z,min:"0",max:de,onChange:he=>H(B.name,parseInt(he.target.value)||0),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200"});case"select":return l.jsx("select",{value:Z,onChange:he=>H(B.name,he.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200",children:B.options?.map(he=>l.jsx("option",{value:he,children:he},he))});case"chief_select":const se=oe?.chiefs||[];if(se.length===0)return l.jsx("p",{className:"text-xs text-slate-500 italic",children:"No chiefs in this garrison."});const ge=g?.actionData?.chiefsToMove||[];return l.jsx("div",{className:"space-y-2 p-2 bg-slate-800/50 rounded-md max-h-40 overflow-y-auto",children:se.map(he=>l.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-1 hover:bg-slate-700 rounded-md",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded bg-slate-600 border-slate-500 text-amber-500 focus:ring-amber-500",checked:ge.includes(he.name),onChange:K=>{const A=K.target.checked?[...ge,he.name]:ge.filter(R=>R!==he.name);H("chiefsToMove",A)}}),l.jsx("span",{className:"text-slate-300 font-semibold",children:he.name})]},he.name))});case"info":return l.jsx("p",{className:"text-xs text-slate-400 italic p-2 bg-slate-800/50 rounded-md",children:B.info});default:return null}},le=()=>{const B=g?.actionData||{},Z=S[B.start_location];return l.jsxs("form",{onSubmit:ee,className:"space-y-4 overflow-y-auto max-h-[75vh] p-1",children:[l.jsx("p",{className:"text-sm text-slate-400 -mt-2 mb-4",children:ct.Trade.description}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Dispatch Caravan From"}),U(ct.Trade.fields[0])]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Trade With (Target)"}),l.jsx("select",{value:`${B.target_location}|${B.target_tribe_id}`,onChange:W=>H("target_location_and_tribe",W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200 font-mono",children:T.length>0?T.map(W=>l.jsxs("option",{value:`${W.location}|${W.tribeId}`,children:[W.tribeName," - Hex ",W.location]},`${W.location}-${W.tribeId}`)):l.jsx("option",{children:"No other tribes to trade with"})})]}),l.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[l.jsx("h4",{className:"text-md font-semibold text-slate-300 mb-2",children:"Assign Guards"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Troops"}),U(ct.Trade.fields[2])]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Weapons"}),U(ct.Trade.fields[3])]})]}),Z?.chiefs?.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Chiefs"}),U(ct.Trade.fields[4])]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-3 border-t border-slate-700",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"text-md font-semibold text-slate-300 text-center",children:"You Offer"}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:["Food (Max: ",f.globalResources.food,")"]}),U(ct.Trade.fields[5])]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:["Scrap (Max: ",f.globalResources.scrap,")"]}),U(ct.Trade.fields[6])]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:["Weapons (Max: ",Z?.weapons??0,")"]}),U(ct.Trade.fields[7])]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"text-md font-semibold text-slate-300 text-center",children:"You Request"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Food"}),U(ct.Trade.fields[8])]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Scrap"}),U(ct.Trade.fields[9])]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Weapons"}),U(ct.Trade.fields[10])]})]})]}),_!==null&&l.jsxs("div",{className:"text-center font-bold text-amber-400 bg-slate-800/50 p-2 rounded-md",children:["Estimated Travel Time: ",_," turn(s)"]}),l.jsxs("div",{className:"flex justify-between pt-4 border-t border-slate-700",children:[l.jsx(fe,{type:"button",variant:"secondary",onClick:P,children:"Back"}),l.jsx(fe,{type:"submit",children:"Send Caravan"})]})]})};return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:c,children:l.jsx("div",{className:"w-full max-w-lg",onClick:B=>B.stopPropagation(),children:l.jsx(Ce,{title:p?ct[p].name:"Choose Action",className:"max-h-[90vh] flex flex-col",children:p===ie.Trade?le():p?l.jsxs("form",{onSubmit:ee,className:"space-y-4 overflow-y-auto",children:[l.jsx("p",{className:"text-sm text-slate-400 -mt-2 mb-4",children:ct[p].description}),ct[p].fields.map(B=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:B.label}),U(B)]},B.name)),_!==null&&l.jsxs("div",{className:"text-center font-bold text-amber-400 bg-slate-800/50 p-2 rounded-md",children:["Estimated Travel Time: ",_," turn(s)"]}),l.jsxs("div",{className:"flex justify-between pt-4 border-t border-slate-700",children:[l.jsx(fe,{type:"button",variant:"secondary",onClick:P,children:"Back"}),l.jsx(fe,{type:"submit",disabled:ct[p].isPlaceholder,children:"Add Action"})]})]}):l.jsx("div",{className:"grid grid-cols-3 gap-4 overflow-y-auto",children:Object.entries(ct).map(([B,Z])=>l.jsxs("button",{onClick:()=>z(B),className:"flex flex-col items-center justify-center space-y-2 p-3 bg-slate-700 hover:bg-slate-600 rounded-lg aspect-square transition-colors duration-200 text-slate-300 hover:text-amber-400 disabled:opacity-50 disabled:cursor-not-allowed",disabled:Z.isPlaceholder,children:[l.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:Z.icon}),l.jsx("span",{className:"text-xs text-center font-semibold",children:Z.name})]},B))})})})})},M0=({results:r,onStartPlanning:u})=>l.jsx(Ce,{title:"Previous Turn Results",children:l.jsxs("div",{className:"space-y-3",children:[r.length>0?l.jsx("ul",{className:"space-y-2 max-h-64 overflow-y-auto pr-2",children:r.map(c=>l.jsxs("li",{className:"text-sm p-2 bg-slate-900/50 rounded-md",children:[l.jsx("span",{className:"font-bold text-amber-400",children:c.actionType}),l.jsx("p",{className:"text-slate-300",children:c.result||"Action processed."})]},c.id))}):l.jsx("p",{className:"text-slate-400 text-center italic py-4",children:"No results from last turn."}),l.jsx("div",{className:"pt-2 border-t border-slate-700",children:l.jsx(fe,{onClick:u,className:"w-full",children:"Start Planning Next Turn"})})]})}),Fa=({title:r,message:u,onConfirm:c,onCancel:o})=>l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:o,children:l.jsx("div",{className:"w-full max-w-sm",onClick:f=>f.stopPropagation(),children:l.jsx(Ce,{title:r,children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-slate-300",children:u}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx(fe,{variant:"secondary",onClick:o,children:"Cancel"}),l.jsx(fe,{variant:"primary",onClick:c,children:"Confirm"})]})]})})})}),sl=[{name:"Mitch",description:"Once overlooked as a simple scout, Mitch learned to survive by sheer cunning. She navigates the harsh dunes like an old friend, turning small advantages into quiet victories despite her humble beginnings.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(1).gif",stats:{charisma:3,intelligence:6,leadership:2,strength:1}},{name:"Shank",description:"Shank emerged from the shadows of collapsed bunkers, forging order out of chaos. She balances cunning strategies with raw determination, inspiring fear and respect in equal measure.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(2).gif",stats:{charisma:6,intelligence:7,leadership:8,strength:9}},{name:"Sasha",description:"Sasha grew up listening to long-lost legends whispered beneath rusted rooftops. She now steers her crew with steady judgment, pulling them through the wasteland storms with a calm, unwavering heart.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(3).gif",stats:{charisma:6,intelligence:6,leadership:7,strength:3}},{name:"Daizee",description:"Daizee once fought through brutal trade routes to secure the basic needs of her tribe. Now she leads with a practical wisdom, forging alliances and pushing her warriors to the brink, never backing down.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(4).gif",stats:{charisma:4,intelligence:3,leadership:7,strength:9}},{name:"Nyra Vale",description:"From scavenging old vaults to guiding her people through hostile terrains, Nyra Vale radiates a quiet resolve. Her calm presence and daring leadership help reshape the barren lands into something hopeful.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(5).gif",stats:{charisma:8,intelligence:3,leadership:5,strength:8}},{name:"Fluxx",description:"Fluxx emerged from a band of travelers who valued wits over muscle. She weaves through shifting alliances, carefully directing her followers and making bold decisions when the desert winds demand it.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(6).gif",stats:{charisma:5,intelligence:3,leadership:6,strength:7}},{name:"Zeva Serin",description:"As a child, Zeva Serin listened to tales of powerful leaders at dusty outposts. She now brings these stories to life, guiding her team with subtle hints of cunning and unwavering focus.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(7).gif",stats:{charisma:4,intelligence:6,leadership:2,strength:5}},{name:"Bunney",description:"Bunney carved her name into rusted steel doors long before she took charge. Her presence lights a spark of hope, and her uncanny ability to find resources in barren lands keeps her clan thriving.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(8).gif",stats:{charisma:8,intelligence:7,leadership:5,strength:8}},{name:"Talis Ember",description:"Raised near toxic springs, Talis Ember learned to endure harshness and channel it into strategic thought. Her clan admires her steady command and the fearless way she confronts danger.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(9).gif",stats:{charisma:8,intelligence:8,leadership:6,strength:6}},{name:"Suzy Sue",description:"In a land where kindness is scarce, Suzy Sue nurtures a strange blend of compassion and authority. She leads quietly but firmly, ensuring every decision moves her people closer to a safer horizon.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(10).gif",stats:{charisma:6,intelligence:6,leadership:5,strength:5}},{name:"Lira Nyx",description:"Born under dark skies, Lira Nyx rose from obscure origins to command respect. She marshals her crew like a focused artisan, shaping order from chaos and carving her legacy into the dust.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(11).gif",stats:{charisma:9,intelligence:5,leadership:7,strength:2}},{name:"Mara Solis",description:"Mara Solis found wisdom in the old stories buried under collapsed highways. Despite her quiet demeanor, she holds her band together through gentle guidance and unwavering care.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(12).gif",stats:{charisma:2,intelligence:3,leadership:5,strength:5}},{name:"Amethyst",description:"Amethyst grew up scavenging shattered marketplaces and dusty archives, forging a will of iron. She leads with a steady hand, making tough calls to ensure her people see another dawn.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(13).gif",stats:{charisma:8,intelligence:3,leadership:2,strength:2}},{name:"Iona Ritt",description:"Iona Ritt spent her youth learning to barter with nomads and outwit thugs. Her measured voice commands the respect of those who follow, guiding them through treacherous ground and unseen perils.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(14).gif",stats:{charisma:6,intelligence:6,leadership:2,strength:5}},{name:"Sarara",description:"Sarara once challenged every rival leader she met, emerging stronger each time. Now she channels that fierce ambition into uplifting her clan, forging a future that no hardship can destroy.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(15).gif",stats:{charisma:7,intelligence:7,leadership:9,strength:4}},{name:"Virus X",description:"No one is sure where Virus X truly hails from, but her influence spreads swiftly. She balances strict command with tactical brilliance, turning chaos into her greatest ally in the forsaken Wastes.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(16).gif",stats:{charisma:9,intelligence:7,leadership:9,strength:6}},{name:"Sarai Thorn",description:"Sarai Thorn emerged from tangled forests of twisted metal, transforming difficulties into stepping stones. Her clan trusts her unwavering judgment and the cunning gleam in her eye.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(17).gif",stats:{charisma:6,intelligence:7,leadership:6,strength:5}},{name:"Harley",description:"Harley learned survival from the dregs of old refineries, where brute force often trumped wit. She now directs her allies with a fiery spirit and the grit to overcome any stumbling block.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(18).gif",stats:{charisma:4,intelligence:5,leadership:2,strength:9}},{name:"Kaya Rune",description:"Kaya Rune traces secret paths through shattered cityscapes, guiding her people around danger. Her soft voice carries the weight of wisdom, steering her followers toward safety and growth.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(19).gif",stats:{charisma:6,intelligence:9,leadership:4,strength:4}},{name:"Empathy",description:"Empathy rose from abandoned villages, stitching together fragile alliances. She leads with understanding and quiet confidence, forging a bond among survivors that few can break.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(20).gif",stats:{charisma:6,intelligence:6,leadership:3,strength:10}},{name:"Abby Varla",description:"Abby Varla journeyed across windswept plains, collecting scraps of wisdom from wanderers. She transforms shared stories into tactics, guiding her crew with a balanced hand and calm demeanor.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(21).gif",stats:{charisma:6,intelligence:5,leadership:5,strength:5}},{name:"Shade",description:"Shade learned to listen rather than shout, studying the old world ruins for clues. She leads by example, using subtle gestures and strategic insights to guide her followers toward prosperity.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(22).gif",stats:{charisma:3,intelligence:6,leadership:9,strength:4}},{name:"Pixie",description:"Pixie found beauty in broken machines and deserted markets. Her gentle approach and thoughtful leadership help others see new possibilities in the wasteland, bridging gaps where others fail.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(23).gif",stats:{charisma:4,intelligence:7,leadership:3,strength:8}},{name:"Sable",description:"Sable stands tall at the edge of contested borders, using her keen mind and steady gaze to hold enemies at bay. Under her guidance, her clan thrives, forging alliances from former foes.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(24).gif",stats:{charisma:7,intelligence:9,leadership:4,strength:10}},{name:"Flint",description:"Flint drifted through broken labs and gutted convoys, absorbing lessons from each shattered place. She leads with careful calculation, transforming scraps of hope into workable plans.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(26).gif",stats:{charisma:5,intelligence:3,leadership:1,strength:10}},{name:"Ember",description:"Ember recalls a time before endless wasteland dusted the horizon. She steers her crew with balanced ideals and measured words, maintaining unity as they push toward a brighter future.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(27).gif",stats:{charisma:7,intelligence:7,leadership:7,strength:7}},{name:"Haze",description:"Haze spent years tracking elusive bandit kings, learning their patterns and weaknesses. She now applies those insights, guiding her allies through danger with keen eyes and steady nerves.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(28).gif",stats:{charisma:4,intelligence:6,leadership:8,strength:6}},{name:"Synth",description:"Synth is rumored to have learned secret lore from an old bunker library. She rules her enclave with an iron will tempered by knowledge, forging a legacy that blends old lessons with new courage.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(29).gif",stats:{charisma:9,intelligence:4,leadership:9,strength:4}},{name:"Finland",description:"Finland grew up bartering scraps of metal for food, learning the art of compromise. She leads with fairness, enabling those around her to find common ground even amid scarcity.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(30).gif",stats:{charisma:5,intelligence:3,leadership:7,strength:2}},{name:"Trishar",description:"Trishar listened at dawn for the hum of old engines and fading broadcasts, gathering secrets. She now uses that knowledge to navigate hidden paths, guiding her clan beyond known frontiers.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(31).gif",stats:{charisma:4,intelligence:9,leadership:2,strength:5}},{name:"Diradia",description:"Diradia found comfort in simple patterns and quiet routines. In a lawless world, her steady hand on the helm brings a gentle order to those who follow her through desperate times.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(32).gif",stats:{charisma:4,intelligence:4,leadership:4,strength:4}},{name:"Tescotta",description:"Tescotta survived countless raids and betrayals, learning to strike deals and call bluffs. Her quiet prowess convinces even hardened survivors to follow her into the unknown.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(33).gif",stats:{charisma:6,intelligence:3,leadership:9,strength:6}},{name:"Thursday",description:"Thursday was born at the edge of a radioactive canyon, learning patience as she watched the shadows shift. She leads with measured steps, ensuring that each move counts in the harsh environment.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(34).gif",stats:{charisma:5,intelligence:6,leadership:7,strength:8}},{name:"Ruby Red",description:"Ruby Red traveled through forgotten forts and broken citadels, her banner always rising anew. Her unwavering determination encourages others to follow her into even the darkest lands.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(35).gif",stats:{charisma:8,intelligence:7,leadership:8,strength:8}},{name:"Violett",description:"Violett has a mind sharp as glass and a presence that soothes tense negotiations. She guides her people with careful consideration and a subtle kindness that disarms potential foes.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(36).gif",stats:{charisma:9,intelligence:6,leadership:5,strength:8}},{name:"Lynx",description:"Lynx spent nights charting hidden reservoirs and picking up lost tongues. Her clan flourishes under her balanced command, forging a legacy that outlives the scattered remnants of the old world.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(37).gif",stats:{charisma:9,intelligence:8,leadership:7,strength:6}},{name:"Vera Crez",description:"Vera Crez learned to mediate disputes with a firm hand and a level gaze. Her careful approach nurtures a stable coalition, carving a path through battered landscapes and uncertain times.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(38).gif",stats:{charisma:6,intelligence:4,leadership:2,strength:7}},{name:"Akiria",description:"Akiria rose from a humble caravan guard to command entire outposts. She steers her people through conflicts with a calm resilience, shaping the future from the dust of collapsed empires.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(39).gif",stats:{charisma:3,intelligence:5,leadership:5,strength:6}},{name:"Indego",description:"Indego remembers the distant hum of old machinery and the scent of rust. She leads by example, blending measured cunning with soft-spoken guidance that binds her crew together.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(40).gif",stats:{charisma:6,intelligence:8,leadership:4,strength:2}},{name:"Selinda",description:"Selinda honed her craft by listening in silence, observing the old guard. Now she sets her own course, guiding her band with balance and tact, ensuring no one is left behind.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(41).gif",stats:{charisma:7,intelligence:7,leadership:5,strength:3}},{name:"Terrara",description:"Terrara learned strength from shifting sands and strange markets. With a steady voice and steady hands, she leads her followers toward new frontiers, defying all who doubt her resolve.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(42).gif",stats:{charisma:8,intelligence:6,leadership:4,strength:4}},{name:"Empyr",description:"Empyr is said to have danced on the edges of ancient ruins before claiming her throne. She leads with a confident stride, weaving together scattered souls into a force few can match.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(43).gif",stats:{charisma:9,intelligence:5,leadership:5,strength:6}},{name:"Sue-Ki",description:"Sue-Ki walked roads of broken glass to learn what makes a tribe strong. She unites her followers with subtle kindness and direct action, forging a path no storm can erase.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(44).gif",stats:{charisma:4,intelligence:7,leadership:5,strength:6}},{name:"Saturn",description:"Saturn hummed old lullabies amid broken tanker trucks, dreaming of better days. She leads quietly but firmly, guiding her clan through hardships with patient resilience.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(45).gif",stats:{charisma:5,intelligence:8,leadership:4,strength:7}},{name:"Evevette",description:"Evevette once scaled towering scrap piles to find hidden vantage points. Now she leads her group with a level head, spotting opportunities in the emptiness and guiding them to hidden treasures.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(46).gif",stats:{charisma:6,intelligence:7,leadership:3,strength:8}},{name:"Renegade",description:"Renegade learned to thrive in lawless zones, turning threats into stepping stones. She inspires her crew to see possibilities in rubble, nurturing unity in the face of uncertainty.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(47).gif",stats:{charisma:5,intelligence:8,leadership:4,strength:7}},{name:"Dareen",description:"Dareen navigated radioactive marshes and midnight ambushes. Her composure under pressure reassures her allies, guiding them toward safer routes when the world seems ready to crumble.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(48).gif",stats:{charisma:4,intelligence:2,leadership:6,strength:7}},{name:"Tazeshka",description:"Tazeshka danced through the wreckage of old ship hulls, discovering hidden supplies. She now leads with a careful balance of hard-earned wisdom and innovative tactics.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(49).gif",stats:{charisma:6,intelligence:4,leadership:8,strength:4}},{name:"Silo",description:"Silo's early life was spent roaming abandoned farmlands. She assembled scattered survivors into a cohesive force, ensuring that even in scarcity, her clan stands strong.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(50).gif",stats:{charisma:4,intelligence:4,leadership:7,strength:5}},{name:"Synapse",description:"Synapse drew knowledge from old data shards, piecing together lost methods. She leads with a subtle intellect, forging a stronger community one calculated decision at a time.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(51).gif",stats:{charisma:8,intelligence:2,leadership:7,strength:5}},{name:"Doc",description:"Doc was raised among traveling healers and scavengers. She merges insight and leadership to keep her crew stable and confident, even when old-world horrors resurface.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(52).gif",stats:{charisma:5,intelligence:10,leadership:3,strength:3}},{name:"Cutie",description:"Cutie learned from elders who valued compassion amid scarcity. She leads with a kind heart and a firm grip, ensuring that empathy and order coexist in her refuge.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(53).gif",stats:{charisma:3,intelligence:5,leadership:7,strength:3}},{name:"Kathy Kay",description:"Kathy Kay once guided her kin through chemical storms and razor dunes. She encourages trust and cooperation, building a legacy of calm resilience that outlasts the tempests.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(54).gif",stats:{charisma:5,intelligence:7,leadership:5,strength:5}},{name:"Sympathy",description:"Sympathy overcame raider threats and famine through unified vision. She governs with a balance of steel and mercy, nurturing hope where others see only ruin.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(55).gif",stats:{charisma:7,intelligence:7,leadership:7,strength:6}},{name:"Ange El",description:"Ange El drifted through broken colonies, learning to defend the weak. She leads with subtle resourcefulness, ensuring that each challenge shapes her crew into something stronger.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(56).gif",stats:{charisma:4,intelligence:4,leadership:4,strength:8}},{name:"Diamond",description:"Diamond claims lineage from ancient chiefs who once thrived in lush lands. Now she channels their legacy, inspiring those around her to endure and adapt under relentless suns.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(57).gif",stats:{charisma:8,intelligence:8,leadership:6,strength:7}},{name:"Sammy K",description:"Sammy K explored old refineries for hidden truths. She inspires trust and steadiness in her tribe, leading them toward distant green horizons no one else dares to seek.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(58).gif",stats:{charisma:5,intelligence:8,leadership:4,strength:5}},{name:"Fuller",description:"Fuller honed her leadership style in abandoned hangars, negotiating with rival gangs. Now she fosters unity with a calm presence, ensuring each member of her clan feels valued.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(59).gif",stats:{charisma:3,intelligence:6,leadership:8,strength:4}},{name:"Gwendallen",description:"Gwendallen wove old tales into new truths, using memories to shape the future. She leads with measured optimism, turning fragile coalitions into lasting alliances.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(60).gif",stats:{charisma:3,intelligence:6,leadership:8,strength:4}},{name:"Akwire",description:"Akwire traveled through shifting dunes, trading whispers for safe passage. Her quiet insight and firm command steer her people around traps hidden in the sands.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(61).gif",stats:{charisma:5,intelligence:3,leadership:4,strength:9}},{name:"Fizzell",description:"Fizzell once brokered peace between feuding tribes, earning grudging respect. She leads with bright determination, forging a future carved from the chaos of broken worlds.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(62).gif",stats:{charisma:8,intelligence:8,leadership:3,strength:3}},{name:"Kally",description:"Kally learned patience by tending hidden gardens amid cracked earth. She leads her people like a careful gardener, nurturing growth despite unforgiving conditions.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(63).gif",stats:{charisma:5,intelligence:8,leadership:7,strength:4}},{name:"The Prof",description:"The Prof salvaged knowledge from ruined archives, weaving old-world wisdom into new strategies. She guides with intellectual rigor, ensuring her clan outsmarts the wasteland's challenges.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(64).gif",stats:{charisma:4,intelligence:10,leadership:3,strength:4}},{name:"Petra",description:"Petra once navigated labyrinthine pipeworks beneath ruined cities. Her clan trusts her ingenuity and calm confidence, knowing she will find a path even when all seems lost.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(65).gif",stats:{charisma:7,intelligence:5,leadership:6,strength:6}},{name:"Tristika",description:"Tristika honed her leadership by outmaneuvering ruthless raiders. She guides her crew with subtle hints and steady resolve, turning each challenge into a stepping stone.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(66).gif",stats:{charisma:3,intelligence:4,leadership:7,strength:7}},{name:"Adder",description:"Adder learned from whispers carried on desert winds, piecing together scattered secrets. She leads by strategic insight, pushing her people closer to long-lost havens.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(67).gif",stats:{charisma:6,intelligence:3,leadership:8,strength:7}},{name:"Sarina Dray",description:"Sarina Dray dug through collapsed hangars for clues of old alliances. Now she carefully unites scattered survivors, leading them with a quiet determination forged in dust and hope.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(68).gif",stats:{charisma:4,intelligence:5,leadership:4,strength:8}},{name:"Orinaya Vox",description:"Orinaya Vox emerged from silent ruins, speaking words few understood. She leads with measured caution, blending old lessons with new tactics to outlast every threat.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(69).gif",stats:{charisma:6,intelligence:8,leadership:2,strength:2}},{name:"Leira Solara",description:"Leira Solara watched distant storms and learned their rhythms. She orchestrates her clan's movements with calm finesse, ensuring survival through cunning adaptation.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(70).gif",stats:{charisma:7,intelligence:7,leadership:6,strength:4}},{name:"Yalena Skar",description:"Yalena Skar saw danger in every horizon but never faltered. She governs with focused resolve, making sacrifices and forging strength in the face of barren landscapes.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(71).gif",stats:{charisma:5,intelligence:5,leadership:6,strength:4}},{name:"Sia Onyx",description:"Sia Onyx survived long droughts and endless nights, learning that patience can outlast brute force. She leads with quiet understanding, guiding her band to scarce resources.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(72).gif",stats:{charisma:2,intelligence:1,leadership:8,strength:3}},{name:"Yara Jyn",description:"Yara Jyn spent years studying enemy patterns beneath rusted overpasses. Her fierce insight shapes her crew's destiny, forging a leadership that no foe can undermine.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(73).gif",stats:{charisma:7,intelligence:2,leadership:10,strength:5}},{name:"Iska Draya",description:"Iska Draya navigated flooded tunnels to rescue lost kin. She leads with practical wisdom and unwavering purpose, uniting strangers into a formidable force.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(74).gif",stats:{charisma:4,intelligence:5,leadership:10,strength:7}},{name:"Mayven Oza",description:"Mayven Oza shared water with desperate travelers, building trust in unlikely places. She guides her clan with careful diplomacy and a watchful eye for hidden dangers.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(75).gif",stats:{charisma:5,intelligence:7,leadership:6,strength:4}},{name:"Lianya Mist",description:"Lianya Mist charted secret passages under twisted pipes. She directs her followers with silent gestures and clever insights, ensuring survival in a world ruled by scarcity.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(76).gif",stats:{charisma:5,intelligence:10,leadership:6,strength:4}},{name:"Zira Kalea",description:"Zira Kalea once bartered metal scraps for precious seeds. Now she fosters growth among her kin, nurturing cooperation and resilience in lands where both are rare.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(77).gif",stats:{charisma:5,intelligence:5,leadership:7,strength:9}},{name:"Ione Raithe",description:"Ione Raithe emerged from quiet settlements, leading with balanced reason. Her steady demeanor and gentle encouragement inspire others to stand firm when all hope seems lost.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(78).gif",stats:{charisma:7,intelligence:7,leadership:5,strength:5}},{name:"Tirza Lynx",description:"Tirza Lynx roamed far deserts, communing with hidden nomads. She commands respect through subtle charisma, weaving together factions to withstand any oncoming storm.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(79).gif",stats:{charisma:9,intelligence:4,leadership:7,strength:9}},{name:"Vira Senna",description:"Vira Senna took lessons from half-buried machines and scattered relics. She orchestrates her clan's fate with determined grace, making the most of what little remains.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(80).gif",stats:{charisma:5,intelligence:5,leadership:5,strength:8}},{name:"Mina Shae",description:"Mina Shae listened to legends passed down in secret bunkers. She leads decisively, turning ancient hints into solid plans that carve a path through hostile terrain.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(81).gif",stats:{charisma:6,intelligence:7,leadership:7,strength:6}},{name:"lianya Mist",description:"lianya Mist uncovered codes etched into corroded steel. She now guides her tribe with shrewd observation and a quiet aura that inspires confidence amid uncertainty.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(82).gif",stats:{charisma:8,intelligence:4,leadership:8,strength:9}},{name:"Nova Wraith",description:"Nova Wraith rose from the ashes of old conflicts, shining like a distant star. She leads with fierce intellect and daring ambition, unifying scattered souls into an unstoppable force.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(83).gif",stats:{charisma:9,intelligence:9,leadership:8,strength:9}},{name:"Sable Fang",description:"Sable Fang grew strong sparring with relentless foes. Her tactical mind and fearless approach to danger forge a path where others see only desolation.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(84).gif",stats:{charisma:7,intelligence:9,leadership:9,strength:8}},{name:"Luna Havoc",description:"Luna Havoc forged alliances under neon skies and broken billboards. She inspires fierce loyalty, guiding her clan through chaos with unwavering purpose.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(85).gif",stats:{charisma:5,intelligence:7,leadership:8,strength:8}},{name:"Aria Dark",description:"Aria Dark once watched rival leaders fall to their own hubris. She steers her crew through complexity with measured cunning, never letting vanity blind her from the truth.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(86).gif",stats:{charisma:7,intelligence:5,leadership:7,strength:6}},{name:"Raven Steele",description:"Raven Steele learned discipline at the edge of radioactive craters. She leads with careful deliberation, forging a stable core to weather the wasteland's worst trials.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(88).gif",stats:{charisma:8,intelligence:8,leadership:4,strength:3}},{name:"Vesper Ash",description:"Vesper Ash scavenged ancient ruins to gain precious insights. She leads with a cautious optimism, turning small advantages into stepping stones toward stability.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(89).gif",stats:{charisma:2,intelligence:7,leadership:3,strength:8}},{name:"Lyra Stakka",description:"Lyra Stakka heard the echoes of old world songs drifting over empty plains. She commands attention and trust, forging a community that thrives where others fail.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(90).gif",stats:{charisma:9,intelligence:9,leadership:5,strength:5}},{name:"Kira Storm",description:"Kira Storm watched lightning dance across barren plateaus. With silent determination, she leads her band to hidden shelters, ensuring they endure every shock the world delivers.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(91).gif",stats:{charisma:2,intelligence:5,leadership:6,strength:4}},{name:"Orin Solace",description:"Orin Solace speaks softly but carries the wisdom of forgotten ages. She leads her people through shattered landscapes, believing that knowledge and will can reshape fate.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(92).gif",stats:{charisma:8,intelligence:9,leadership:5,strength:7}},{name:"Hexa",description:"Hexa navigated old comm towers and broken roads, piecing together silent codes. She leads with a clever spark, bringing structure and focus to her ragged ranks.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(93).gif",stats:{charisma:3,intelligence:8,leadership:6,strength:5}},{name:"Mara Shadow",description:"Mara Shadow stepped out of obscurity, forging alliances where none thought possible. She leads with elusive grace and subtle hints, reshaping the landscape in her clan's favor.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(94).gif",stats:{charisma:9,intelligence:7,leadership:3,strength:7}},{name:"Eve Raze",description:"Eve Raze once bartered old circuit boards for rare seeds. She leads by weaving new strategies from thin opportunities, always finding a way to persevere.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(95).gif",stats:{charisma:6,intelligence:8,leadership:7,strength:2}},{name:"Tara Viper",description:"Tara Viper learned the art of stealth and sudden strikes under scarlet skies. She leads with daring confidence, uniting her crew through daring gambits and swift decisions.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(96).gif",stats:{charisma:5,intelligence:9,leadership:7,strength:9}},{name:"Zara Vex",description:"Zara Vex sifted through old archives, recovering fragile clues to rebuild lost trust. She leads with practical intelligence and steady resolve, forging her legacy in scorched earth.",key_image_url:"https://www.platopotato.com/NFT/Tribes/RT%20(97).gif",stats:{charisma:3,intelligence:8,leadership:6,strength:6}}],C0=({tribe:r,allChiefRequests:u=[],allTribes:c,onRequestChief:o})=>{const[f,m]=$.useState(""),[x,S]=$.useState(""),b=$.useMemo(()=>Object.values(r.garrisons).flatMap(_=>_.chiefs||[]),[r.garrisons]),g=$.useMemo(()=>u.filter(_=>_.tribeId===r.id),[u,r.id]),w=$.useMemo(()=>{const _=new Set;c.forEach(p=>{p.garrisons&&Object.values(p.garrisons).forEach(T=>{(T.chiefs||[]).forEach(z=>_.add(z.name))})}),u.forEach(p=>{(p.status==="pending"||p.status==="approved")&&_.add(p.chiefName)});const C=sl.filter(p=>!_.has(p.name));return C.length>0&&!f||C.length>0&&f&&!C.find(p=>p.name===f)?m(C[0].name):C.length===0&&f&&m(""),C},[c,u,f]),q=_=>{if(_.preventDefault(),!f||!x||x.length!==5){alert("Please select a Chief and enter the last 5 digits of your Radix account address.");return}o(f,x),S("")};return l.jsx(Ce,{title:"Chiefs",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-slate-300 mb-2",children:["Active Chiefs (",b.length,")"]}),b.length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-64 overflow-y-auto pr-2",children:b.map(_=>l.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-2 flex items-start space-x-3",children:[l.jsx("img",{src:_.key_image_url,alt:_.name,className:"w-16 h-16 rounded-md object-cover flex-shrink-0 mt-1"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-amber-400",children:_.name}),l.jsxs("p",{className:"text-xs text-slate-400 italic",children:['"',_.description,'"']})]})]},_.name))}):l.jsx("p",{className:"text-sm text-slate-400 italic",children:"No active chiefs."})]}),l.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[l.jsx("h4",{className:"font-semibold text-slate-300 mb-2",children:"Pending Approvals"}),g.filter(_=>_.status==="pending").length>0?l.jsx("ul",{className:"space-y-1",children:g.filter(_=>_.status==="pending").map(_=>l.jsxs("li",{className:"text-sm text-slate-300 bg-slate-800 p-2 rounded-md",children:["Request for ",l.jsx("span",{className:"font-bold text-amber-400",children:_.chiefName})," is pending admin approval."]},_.id))}):l.jsx("p",{className:"text-sm text-slate-400 italic",children:"No pending requests."})]}),l.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[l.jsx("h4",{className:"font-semibold text-slate-300 mb-2",children:"Request a Chief"}),l.jsxs("p",{className:"text-xs text-slate-400 -mt-2 mb-3",children:["You must own the corresponding NFT.",l.jsx("a",{href:"https://www.xrdegen.com/collections/Radix_Tribes_V1",target:"_blank",rel:"noopener noreferrer",className:"text-amber-500 hover:text-amber-400 ml-1 underline",children:"View Collection"})]}),l.jsxs("form",{onSubmit:q,className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"chief-select",className:"block text-sm font-medium text-slate-300 mb-1",children:"Select Chief"}),l.jsx("select",{id:"chief-select",value:f,onChange:_=>m(_.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200",disabled:w.length===0,children:w.length>0?w.map(_=>l.jsx("option",{value:_.name,children:_.name},_.name)):l.jsx("option",{children:"No more chiefs available"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"radix-address",className:"block text-sm font-medium text-slate-300 mb-1",children:"Radix Account (last 5 digits)"}),l.jsx("input",{type:"text",id:"radix-address",value:x,onChange:_=>S(_.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200",placeholder:"e.g., a8c2f",maxLength:5,minLength:5,required:!0,disabled:w.length===0})]}),l.jsx(fe,{type:"submit",className:"w-full",disabled:w.length===0,children:"Submit for Approval"})]})]})]})})},ll=[{name:"Dune Buggy",description:"A fast, lightweight vehicle ideal for crossing open terrain quickly, though it offers little protection.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/buggy.gif",effects:[{type:pe.MovementSpeedBonus,value:.2},{type:pe.CombatBonusDefense,value:-.1,terrain:ae.Plains},{type:pe.CombatBonusDefense,value:-.1,terrain:ae.Desert}]},{name:"Ghillie Mantle",description:"A camouflage cloak made of synthetic fibers and local flora, offering superb concealment in forests.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/ghillie.gif",effects:[{type:pe.CombatBonusDefense,value:.25,terrain:ae.Forest}]},{name:"Advanced Sonar",description:"A recovered piece of old-world tech that can detect dense scrap deposits deep underground.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/sonar.gif",effects:[{type:pe.ScavengeYieldBonus,value:.2,resource:"Scrap"}]},{name:"Hydro-Purifier",description:"A portable device that makes questionable water sources safe, drastically improving the success of finding food.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/purifier.gif",effects:[{type:pe.ScavengeYieldBonus,value:.2,resource:"Food"}]},{name:"Bunker Buster",description:"A heavy-duty explosive charge designed to breach fortified positions in urban environments.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/buster.gif",effects:[{type:pe.CombatBonusAttack,value:.25,terrain:ae.Ruins}]},{name:"Junk-Forged Armor",description:"Layers of scrap metal and hardened leather, providing a baseline improvement to troop survivability.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/junk_armor.gif",effects:[{type:pe.CombatBonusDefense,value:.05}]},{name:"Whetstone",description:"A simple but effective tool for keeping blades sharp, ensuring every strike counts.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/whetstone.gif",effects:[{type:pe.CombatBonusAttack,value:.05}]},{name:"Seed Vault",description:"A collection of pre-war seeds, genetically engineered for resilience. Provides a small, steady supply of food.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/seed_vault.gif",effects:[{type:pe.PassiveFoodGeneration,value:5}]},{name:"Scrap Compressor",description:"An automated hydraulic press that compacts loose junk into usable scrap plates.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/compressor.gif",effects:[{type:pe.PassiveScrapGeneration,value:5}]},{name:"Mountaineering Gear",description:"Picks, ropes, and climbing harnesses that allow for aggressive maneuvers in treacherous mountain terrain.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/mountaineering_gear.gif",effects:[{type:pe.CombatBonusAttack,value:.2,terrain:ae.Mountains}]},{name:"Swamp Skiff",description:"A flat-bottomed boat perfect for navigating murky bogs, allowing for better defensive positioning.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/swamp_skiff.gif",effects:[{type:pe.CombatBonusDefense,value:.2,terrain:ae.Swamp}]},{name:"Desert Cloaks",description:"Flowing robes that provide protection from the sun and sand, helping troops blend into the desert landscape.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/desert_cloaks.gif",effects:[{type:pe.CombatBonusDefense,value:.2,terrain:ae.Desert}]},{name:"Barbed Wire",description:"Spools of rusted, sharp wire, perfect for creating defensive perimeters in open plains.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/barbed_wire.gif",effects:[{type:pe.CombatBonusDefense,value:.2,terrain:ae.Plains}]},{name:"Ambush Netting",description:"Lightweight nets that can be quickly deployed from treetops, entangling enemies in forest ambushes.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/ambush_netting.gif",effects:[{type:pe.CombatBonusAttack,value:.2,terrain:ae.Forest}]},{name:"Scrap Cannon",description:"A crude but effective projectile launcher, deadly when used in the open badlands.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/scrap_cannon.gif",effects:[{type:pe.CombatBonusAttack,value:.2,terrain:ae.Wasteland}]},{name:"Radiation Suit",description:"A lead-lined suit that offers some protection against hazardous environments.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/radiation_suit.gif",effects:[{type:pe.CombatBonusDefense,value:.25,terrain:ae.Radiation}]},{name:"Scout's Medkit",description:"A pouch containing bandages, herbal remedies, and stimulants, increasing the amount of foraged food.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/medkit.gif",effects:[{type:pe.ScavengeYieldBonus,value:.15,resource:"Food"}]},{name:"Masterwork Tools",description:"A set of high-quality pre-war tools, invaluable for salvaging and repairing complex weapon systems.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/masterwork_tools.gif",effects:[{type:pe.ScavengeYieldBonus,value:.15,resource:"Weapons"}]},{name:"Ballistic Shields",description:"Heavy shields made from repurposed vehicle armor, excellent for defending fortified positions in ruins.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/ballistic_shields.gif",effects:[{type:pe.CombatBonusDefense,value:.1,terrain:ae.Ruins}]},{name:"Ratchet Set",description:"A complete set of wrenches and ratchets, making the disassembly of junk for scrap far more efficient.",key_image_url:"https://www.platopotato.com/NFT/Tribes/assets/ratchet_set.gif",effects:[{type:pe.ScavengeYieldBonus,value:.15,resource:"Scrap"}]}];function zh(r){return ll.find(u=>u.name===r)}const E0=({tribe:r,allAssetRequests:u=[],allTribes:c,onRequestAsset:o})=>{const[f,m]=$.useState(""),[x,S]=$.useState(""),b=$.useMemo(()=>(r.assets||[]).map(_=>ll.find(C=>C.name===_)).filter(Boolean),[r.assets]),g=$.useMemo(()=>u.filter(_=>_.tribeId===r.id),[u,r.id]),w=$.useMemo(()=>{const _=new Set;c.forEach(p=>{(p.assets||[]).forEach(T=>_.add(T))}),u.forEach(p=>{(p.status==="pending"||p.status==="approved")&&_.add(p.assetName)});const C=ll.filter(p=>!_.has(p.name));return C.length>0&&!f||C.length>0&&f&&!C.find(p=>p.name===f)?m(C[0].name):C.length===0&&f&&m(""),C},[c,u,f]),q=_=>{if(_.preventDefault(),!f||!x||x.length!==5){alert("Please select an Asset and enter the last 5 digits of your Radix account address.");return}o(f,x),S("")};return l.jsx(Ce,{title:"Assets",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-slate-300 mb-2",children:["Owned Assets (",b.length,")"]}),b.length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-64 overflow-y-auto pr-2",children:b.map(_=>l.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-2 flex items-start space-x-3",children:[l.jsx("img",{src:_.key_image_url,alt:_.name,className:"w-16 h-16 rounded-md object-cover flex-shrink-0 mt-1"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-amber-400",children:_.name}),l.jsxs("p",{className:"text-xs text-slate-400 italic",children:['"',_.description,'"']})]})]},_.name))}):l.jsx("p",{className:"text-sm text-slate-400 italic",children:"No owned assets."})]}),l.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[l.jsx("h4",{className:"font-semibold text-slate-300 mb-2",children:"Pending Approvals"}),g.filter(_=>_.status==="pending").length>0?l.jsx("ul",{className:"space-y-1",children:g.filter(_=>_.status==="pending").map(_=>l.jsxs("li",{className:"text-sm text-slate-300 bg-slate-800 p-2 rounded-md",children:["Request for ",l.jsx("span",{className:"font-bold text-amber-400",children:_.assetName})," is pending admin approval."]},_.id))}):l.jsx("p",{className:"text-sm text-slate-400 italic",children:"No pending requests."})]}),l.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[l.jsx("h4",{className:"font-semibold text-slate-300 mb-2",children:"Request an Asset"}),l.jsx("p",{className:"text-xs text-slate-400 -mt-2 mb-3",children:"You must own the corresponding Asset NFT to request it."}),l.jsxs("form",{onSubmit:q,className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asset-select",className:"block text-sm font-medium text-slate-300 mb-1",children:"Select Asset"}),l.jsx("select",{id:"asset-select",value:f,onChange:_=>m(_.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200",disabled:w.length===0,children:w.length>0?w.map(_=>l.jsx("option",{value:_.name,children:_.name},_.name)):l.jsx("option",{children:"No more assets available"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"radix-address-asset",className:"block text-sm font-medium text-slate-300 mb-1",children:"Radix Account (last 5 digits)"}),l.jsx("input",{type:"text",id:"radix-address-asset",value:x,onChange:_=>S(_.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200",placeholder:"e.g., a8c2f",maxLength:5,minLength:5,required:!0,disabled:w.length===0})]}),l.jsx(fe,{type:"submit",className:"w-full",disabled:w.length===0,children:"Submit for Approval"})]})]})]})})},cc={Farming:[{id:"basic-farming",name:"Basic Farming",description:"Cultivate hardy wasteland crops. Passively generates 10 food each turn.",cost:{scrap:30},researchPoints:20,requiredTroops:5,prerequisites:[],effects:[{type:pe.PassiveFoodGeneration,value:10}],icon:"🌱"},{id:"crop-rotation",name:"Crop Rotation",description:"Improve soil health to increase crop yields. Increases passive food generation by another 15.",cost:{scrap:60},researchPoints:60,requiredTroops:10,prerequisites:["basic-farming"],effects:[{type:pe.PassiveFoodGeneration,value:15}],icon:"🌾"},{id:"hydroponics",name:"Hydroponics",description:"Grow crops indoors using advanced water systems, independent of terrain. Passively generates 25 food each turn.",cost:{scrap:120},researchPoints:100,requiredTroops:15,prerequisites:["crop-rotation"],effects:[{type:pe.PassiveFoodGeneration,value:25}],icon:"💡"}],Scavenging:[{id:"scavenging-basics",name:"Scavenging Basics",description:"Train troops to more effectively find resources. Increases food and scrap from Scavenge actions by 10%.",cost:{scrap:25},researchPoints:15,requiredTroops:5,prerequisites:[],effects:[{type:pe.ScavengeYieldBonus,value:.1,resource:"Food"},{type:pe.ScavengeYieldBonus,value:.1,resource:"Scrap"}],icon:"🔍"},{id:"advanced-scavenging",name:"Advanced Scavenging",description:"Unlock techniques to find rarer materials. Increases scrap and weapon yields from Scavenge actions by an additional 15%.",cost:{scrap:75},researchPoints:50,requiredTroops:10,prerequisites:["scavenging-basics"],effects:[{type:pe.ScavengeYieldBonus,value:.15,resource:"Scrap"},{type:pe.ScavengeYieldBonus,value:.15,resource:"Weapons"}],icon:"🛠️"},{id:"geological-surveying",name:"Geological Surveying",description:"Use old-world seismic sensors to detect rich mineral and scrap deposits deep underground. Increases scrap from Scavenge actions by 20%.",cost:{scrap:150},researchPoints:80,requiredTroops:12,prerequisites:["advanced-scavenging"],effects:[{type:pe.ScavengeYieldBonus,value:.2,resource:"Scrap"}],icon:"🗺️"}],Attack:[{id:"sharpened-sticks",name:"Sharpened Sticks",description:"The most basic of weapons. Better than fists. Provides a +5% attack bonus to all troops.",cost:{scrap:35},researchPoints:25,requiredTroops:5,prerequisites:[],effects:[{type:pe.CombatBonusAttack,value:.05}],icon:"🔪"},{id:"forged-blades",name:"Forged Blades",description:"Turn scrap metal into deadly blades. Provides an additional +10% attack bonus to all troops.",cost:{scrap:80},researchPoints:70,requiredTroops:10,prerequisites:["sharpened-sticks"],effects:[{type:pe.CombatBonusAttack,value:.1}],icon:"⚔️"},{id:"composite-bows",name:"Composite Bows",description:"Laminate wood, horn, and sinew to create powerful composite bows, greatly increasing projectile range and power. Provides an additional +15% attack bonus to all troops.",cost:{scrap:160},researchPoints:120,requiredTroops:15,prerequisites:["forged-blades"],effects:[{type:pe.CombatBonusAttack,value:.15}],icon:"🏹"}],Defense:[{id:"basic-fortifications",name:"Basic Fortifications",description:"Reinforce garrison walls with scrap metal. Provides a +5% defense bonus to all garrisons.",cost:{scrap:40},researchPoints:32,requiredTroops:8,prerequisites:[],effects:[{type:pe.CombatBonusDefense,value:.05}],icon:"🧱"},{id:"watchtowers",name:"Watchtowers",description:"Construct watchtowers to spot enemies from further away. Increases visibility range of all garrisons by 1.",cost:{scrap:60},researchPoints:60,requiredTroops:10,prerequisites:["basic-fortifications"],effects:[],icon:"🗼"},{id:"reinforced-concrete",name:"Reinforced Concrete",description:"Master the formula for pre-war reinforced concrete, making your fortifications incredibly durable. Provides an additional +15% defense bonus to all garrisons.",cost:{scrap:120},researchPoints:100,requiredTroops:20,prerequisites:["watchtowers"],effects:[{type:pe.CombatBonusDefense,value:.15}],icon:"🏰"}]},dn=Object.values(cc).flat();function hs(r){return dn.find(u=>u.id===r)}const O0=({tribe:r,plannedActions:u,onOpenTechTree:c,onCancelResearch:o})=>{const{currentResearch:f,completedTechs:m}=r,x=u.some(g=>g.actionType===ie.StartResearch),S=()=>{if(f){const g=hs(f.techId);if(!g)return null;const w=f.progress/g.researchPoints*100;return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-baseline",children:[l.jsxs("span",{className:"font-semibold text-slate-300",children:[g.icon," ",g.name]}),l.jsxs("span",{className:"text-sm text-slate-400",children:[f.progress," / ",g.researchPoints," pts"]})]}),l.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2.5",children:l.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${w}%`}})}),l.jsxs("p",{className:"text-xs text-slate-500 text-center",children:[f.assignedTroops," troops assigned at Hex ",f.location,"."]}),l.jsx(fe,{variant:"secondary",onClick:o,className:"w-full text-xs mt-2 bg-red-900/70 hover:bg-red-800 focus:ring-red-500",children:"Cancel Project"})]})}return x?l.jsx("p",{className:"text-center text-slate-400 italic",children:"Research project queued for next turn."}):l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-sm text-slate-400 mb-3",children:"No active research project."})})},b=l.jsx(fe,{variant:"secondary",onClick:c,disabled:!!f||x,className:"text-xs px-3 py-1",children:"Tech Tree"});return l.jsx(Ce,{title:"Technology",actions:b,children:l.jsxs("div",{className:"space-y-3",children:[S(),m.length>0&&l.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[l.jsx("h5",{className:"font-semibold text-slate-300 mb-2 text-sm",children:"Completed Techs"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(g=>{const w=hs(g);return w?l.jsx("span",{title:w.name,className:"text-xl cursor-help",children:w.icon},g):null})})]})]})})},D0=({tech:r,status:u,onClick:c})=>{const o="p-3 rounded-lg border-2 text-center cursor-pointer transition-all duration-200 flex flex-col items-center justify-center aspect-video w-40",f={completed:"bg-green-800/50 border-green-500 text-slate-300",available:"bg-slate-700 border-amber-500 hover:bg-slate-600 hover:border-amber-400 text-slate-200",locked:"bg-slate-900 border-slate-700 text-slate-500 cursor-not-allowed opacity-60"};return l.jsxs("div",{className:`${o} ${f[u]}`,onClick:u==="available"?c:void 0,children:[l.jsx("div",{className:"text-4xl mb-2",children:r.icon}),l.jsx("div",{className:"font-bold text-sm",children:r.name}),u==="completed"&&l.jsx("div",{className:"text-xs text-green-400 mt-1",children:"(Completed)"})]})},k0=({isOpen:r,onClose:u,tribe:c,availableGarrisons:o,onStartResearch:f})=>{if(!r)return null;const[m,x]=$.useState(null),[S,b]=$.useState(0),[g,w]=$.useState(Object.keys(o)[0]||""),q=$.useMemo(()=>new Set(c.completedTechs),[c.completedTechs]),_=J=>q.has(J.id)?"completed":J.prerequisites.every(ee=>q.has(ee))?"available":"locked",C=m?hs(m):null,p=g?o[g]:null,T=J=>{x(J);const ee=hs(J);ee&&b(ee.requiredTroops)},z=()=>{!m||!g||!p||!C||S<C.requiredTroops||c.globalResources.scrap<C.cost.scrap||(f(m,g,S),x(null))},P=$.useMemo(()=>C&&S>0?Math.ceil(C.researchPoints/S):"N/A",[C,S]),H=()=>{if(!C)return l.jsxs("div",{className:"text-center p-8",children:[l.jsx("h3",{className:"text-xl font-bold text-amber-400",children:"Technology Tree"}),l.jsx("p",{className:"text-slate-400 mt-2",children:"Select an available technology to view its details and begin research."})]});const J=c.globalResources.scrap>=C.cost.scrap,ee=p&&S>=C.requiredTroops&&p.troops>=S;return l.jsxs("div",{className:"p-6 flex flex-col h-full",children:[l.jsxs("h3",{className:"text-2xl font-bold text-amber-400",children:[C.icon," ",C.name]}),l.jsx("p",{className:"text-slate-400 mt-2 flex-grow",children:C.description}),l.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-700",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-slate-300 block",children:"Scrap Cost"}),l.jsxs("span",{className:J?"text-white":"text-red-500",children:[C.cost.scrap," ⚙️"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-slate-300 block",children:"Research Time"}),l.jsxs("span",{className:"text-white",children:[P," Turns"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-slate-300 block",children:"Min. Troops"}),l.jsxs("span",{className:"text-white",children:[C.requiredTroops," 👥"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-slate-300 block",children:"Total Points"}),l.jsxs("span",{className:"text-white",children:[C.researchPoints," pts"]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Assign Troops From"}),l.jsx("select",{value:g,onChange:U=>w(U.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200",children:Object.keys(o).length>0?Object.keys(o).map(U=>l.jsx("option",{value:U,children:`Hex ${U} (Available: ${o[U].troops})`},U)):l.jsx("option",{children:"No garrisons available"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-300",children:["Troops to Assign (",S,")"]}),l.jsx("input",{type:"range",min:"0",max:p?.troops||0,value:S,onChange:U=>b(parseInt(U.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-amber-500"})]}),l.jsx(fe,{className:"w-full",onClick:z,disabled:!ee||!J,children:J?!p||p.troops<S?"Not enough troops in garrison":S<C.requiredTroops?`Need at least ${C.requiredTroops} troops`:"Start Research Project":`Need ${C.cost.scrap-c.globalResources.scrap} more scrap`})]})]})};return l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-40 p-4",onClick:u,children:l.jsxs("div",{className:"bg-neutral-900 border border-neutral-700 rounded-lg shadow-lg w-full max-w-6xl h-[90vh] flex overflow-hidden",onClick:J=>J.stopPropagation(),children:[l.jsx("div",{className:"flex-grow p-8 overflow-auto bg-slate-800/50",children:l.jsx("div",{className:"flex justify-between items-start gap-8",children:Object.entries(cc).map(([J,ee])=>l.jsxs("div",{className:"space-y-8 relative",children:[l.jsx("h3",{className:"text-center font-bold text-xl text-amber-500 tracking-wider uppercase",children:J}),ee.map((U,le)=>l.jsxs(At.Fragment,{children:[le>0&&l.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 h-8 border-l-2 border-dashed border-slate-600",style:{top:`${le*11.5-2}rem`}}),l.jsx(D0,{tech:U,status:_(U),onClick:()=>T(U.id)})]},U.id))]},J))})}),l.jsx("aside",{className:"w-96 flex-shrink-0 bg-neutral-900 border-l border-neutral-700",children:H()})]})})},xh=({label:r,isActive:u,onClick:c})=>l.jsx("button",{onClick:c,className:`px-4 py-2 text-lg font-bold rounded-t-md transition-colors duration-200 focus:outline-none ${u?"bg-neutral-800 text-amber-400":"bg-neutral-900 text-slate-400 hover:bg-neutral-800 hover:text-amber-500"}`,children:r}),Kt=({title:r,children:u})=>l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-xl font-bold text-amber-400 border-b-2 border-amber-500/50 pb-1 mb-3",children:r}),l.jsx("div",{className:"space-y-2 text-slate-300",children:u})]}),z0=()=>l.jsxs(l.Fragment,{children:[l.jsxs(Kt,{title:"The Turn Cycle",children:[l.jsx("p",{children:"This game runs on a turn-based system, managed automatically by the game server."}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-4",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"1. Planning Phase:"}),` This is where you play! Assign actions to your tribe. When you're done, click "Finalize Actions". Your status will change to "Waiting".`]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"2. Admin Processing:"}),' Once all players have submitted their turns, the Admin will click "Process Turn" in the Admin Panel. This tells the server to calculate the results for all tribes.']}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"3. Automatic Update:"}),` After the Admin processes the turn, the game will automatically update for you. You don't need to do anything. The "Waiting" screen will be replaced by the results of the previous turn.`]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"4. Results Phase:"})," Review the outcome of your actions and start planning your next turn!"]})]})]}),l.jsxs(Kt,{title:"Diplomacy",children:[l.jsx("p",{children:"You can manage your relationships with other tribes via the new Diplomacy panel."}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Propose Alliance:"})," You can send an alliance proposal to a tribe you are Neutral with. They will have a few turns to accept or reject it."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-blue-400",children:"Alliances:"})," Allies share vision, allowing you to see their territory and any enemies they spot. You can also move your forces into an ally's garrisoned hex without starting a fight."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-red-400",children:"Declare War:"})," You can declare war on any tribe. This is a formal action that takes effect at the end of the turn, changing your status to 'War'."]})]})]}),l.jsxs(Kt,{title:"Journeys & Travel Time",children:[l.jsxs("p",{children:["Actions involving travel now use the ",l.jsx("strong",{className:"text-white",children:"Journey"})," system, which has two speeds:"]}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Fast-Track Travel:"})," Very short, non-aggressive journeys (e.g., Move, Scavenge, Scout to a nearby hex) are now resolved ",l.jsx("strong",{className:"text-amber-400",children:"instantly"})," during turn processing. A quick scavenge run will see your troops return with loot, ready for your next turn, all in one go."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Standard Journeys:"})," Longer journeys and all ",l.jsx("strong",{className:"text-red-400",children:"Attack"}),' actions will always take at least one turn. These are dispatched as traveling groups that you can see on the map and track in the "Active Journeys" panel. This preserves the strategic warning for attacks.']}),l.jsxs("li",{children:["When planning, the game will still show you an ",l.jsx("strong",{className:"text-white",children:"Estimated Travel Time"}),". If the action can be fast-tracked, it will resolve immediately."]})]})]}),l.jsxs(Kt,{title:"Trade",children:[l.jsx("p",{children:"Trading is handled through the journey system. It's a multi-turn process involving risk and player interaction."}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Dispatch:"})," You send a `Trade` caravan. It will travel to the target, which may take several turns."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Arrival & Decision:"}),' When your caravan arrives, it enters a "waiting" state. The receiving player will see your offer in their "Pending Trade Offers" panel and has two turns to respond.']}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"The Return Journey:"})," Once a decision is made (or the offer expires), a return journey is automatically created. This also takes time."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Arrival Home:"})," When the caravan returns, the goods and surviving guards are added back to your tribe."]})]})]}),l.jsx(Kt,{title:"Resources & Stats",children:l.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Troops:"})," Your population. Needed for all actions and for defense. Consume food each turn."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Weapons:"})," Boost your combat power in attacks and defense."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Food:"})," A global resource used to feed troops and recruit new ones. If you run out, troops will starve and morale will plummet."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Scrap:"})," A global resource used for building weapons, outposts, and researching technology."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Morale:"})," Your tribe's happiness. Low morale can lead to desertions. Affected by food rations and combat outcomes."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Rations:"})," Set the food consumption rate. Generous rations boost morale but use more food, while Hard rations save food at the cost of morale."]})]})}),l.jsxs(Kt,{title:"Combat",children:[l.jsx("p",{children:"When an attacking journey arrives at a destination with an enemy, combat is resolved. Both sides' power is calculated based on several factors:"}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[l.jsxs("li",{children:["Number of ",l.jsx("strong",{className:"text-white",children:"Troops"}),"."]}),l.jsxs("li",{children:["Number of ",l.jsx("strong",{className:"text-white",children:"Weapons"})," (relative to troop count)."]}),l.jsxs("li",{children:["Tribe and Chief ",l.jsx("strong",{className:"text-white",children:"Strength"})," stats."]}),l.jsxs("li",{children:["Completed ",l.jsx("strong",{className:"text-white",children:"Technologies"}),"."]}),l.jsxs("li",{children:["For the defender: ",l.jsx("strong",{className:"text-white",children:"Terrain"})," bonuses, ",l.jsx("strong",{className:"text-white",children:"Fortifications"})," (Home Base or Outpost), and a ",l.jsx("code",{className:"bg-slate-900 p-1 rounded",children:"Defend"})," action bonus."]})]}),l.jsxs("p",{className:"mt-2",children:["If you attack a hex an enemy is moving ",l.jsx("strong",{className:"text-white",children:"from"})," in the same turn, you will ",l.jsx("strong",{className:"text-white",children:"intercept"})," them. Intercepted forces do not get any terrain or fortification bonuses."]})]}),l.jsxs(Kt,{title:"Technology & Chiefs",children:[l.jsxs("p",{children:[l.jsx("strong",{className:"text-white",children:"Technology:"})," Unlocks permanent bonuses for your tribe. To research, you must assign troops from a garrison. Progress is made each turn. Some POIs (like Research Labs) can speed this up."]}),l.jsxs("p",{children:[l.jsx("strong",{className:"text-white",children:"Chiefs:"})," Powerful unique units with their own stats. They add to your max action limit, participate in actions to provide bonuses, and are acquired by owning the corresponding NFT and submitting a request for admin approval."]})]})]}),B0=()=>l.jsxs(l.Fragment,{children:[l.jsx(Kt,{title:"Header",children:l.jsx("p",{children:"Located at the top. Shows your Tribe Name, Leader, and Icon. On the right, you'll find the current Turn number, Game Phase, and buttons for Help, Admin Panel (if you're an admin), and Logout."})}),l.jsxs(Kt,{title:"Wasteland Map",children:[l.jsx("p",{children:"Your view into the world. You can pan by clicking and dragging, and zoom with the mouse wheel or the +/- buttons."}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Fog of War:"})," Darkened hexes are unexplored. Grayed-out hexes have been explored but are not currently in your line of sight."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Influence:"})," The green overlay shows the area currently visible to your garrisons and those of your allies. Enemy units inside this zone are visible to you."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Garrison & Journey Icons:"})," You'll see icons for POIs, your garrisons (green), enemy garrisons (red), allied garrisons (blue), and smaller icons for your forces that are currently on a journey."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Selection Mode:"})," When an action requires you to select a hex on the map, the map border will glow amber."]})]})]}),l.jsx(Kt,{title:"Right-Side Panels",children:l.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Resource Panel:"})," An at-a-glance summary of your tribe's total troops, weapons, and global resources like food, scrap, and morale."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Tribe Attributes:"})," Displays your tribe's four core stats."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Turn Actions Panel:"})," This is where you manage your turn. Add new actions, review planned actions, and finalize your turn when ready."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Pending Trade Offers:"})," Appears when you have incoming trade offers to respond to."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Active Journeys Panel:"})," A new panel that shows all of your groups currently traveling across the map, including their destination and ETA."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Diplomacy Panel:"})," A new panel to manage your relations with other tribes. View current statuses, propose alliances, declare war, and respond to incoming proposals."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Technology & Chiefs Panels:"})," Manage your research and chiefs from these panels."]})]})}),l.jsxs(Kt,{title:"Modals",children:[l.jsx("p",{children:"Modals are pop-up windows for specific tasks."}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Action Modal:"}),' Opens when you click "Add Action". For actions that require travel, it will now show you an "Estimated Travel Time".']}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Tech Tree Modal:"})," Shows all available technologies and allows you to start a new research project."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Confirmation Modal:"})," Appears to ask you to confirm important decisions, like finalizing your turn."]})]})]})]}),vh=({onClose:r})=>{const[u,c]=$.useState("rules");return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:r,children:l.jsxs("div",{className:"bg-neutral-900 border border-neutral-700 rounded-lg shadow-lg w-full max-w-4xl h-[90vh] flex flex-col overflow-hidden",onClick:o=>o.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center border-b border-neutral-700 px-6 pt-4",children:[l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(xh,{label:"Game Rules",isActive:u==="rules",onClick:()=>c("rules")}),l.jsx(xh,{label:"UI Guide",isActive:u==="ui",onClick:()=>c("ui")})]}),l.jsx(fe,{onClick:r,variant:"secondary",className:"bg-transparent hover:bg-slate-700",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("main",{className:"flex-grow p-6 overflow-y-auto bg-neutral-800",children:u==="rules"?l.jsx(z0,{}):l.jsx(B0,{})})]})})},Mi={[ae.Plains]:{description:"Expansive, open grasslands. Easy to traverse but offer little cover.",modifiers:"Standard movement cost. Minor defensive penalties."},[ae.Forest]:{description:"Dense woodlands that provide excellent cover and concealment.",modifiers:"Good source of Food. Provides a significant defensive bonus. Slightly increased movement attrition."},[ae.Desert]:{description:"Scorching hot deserts with shifting sands. Survival is difficult.",modifiers:"Poor source of Food. High movement attrition. Can hide rare artifacts."},[ae.Mountains]:{description:"Towering peaks and treacherous passes. Difficult to cross but highly defensible.",modifiers:"Very high movement attrition. Excellent defensive bonus. Good source of Scrap/minerals."},[ae.Ruins]:{description:"The skeletal remains of an old-world city. A scavenger's paradise, but dangerous.",modifiers:"Good source of Scrap and occasional Technology. Offers a minor defensive bonus."},[ae.Wasteland]:{description:"Barren, cracked earth offering little of value. The default state of the world.",modifiers:"Poor source of all resources. Standard movement cost."},[ae.Water]:{description:"Large bodies of water, impassable by land units.",modifiers:"Cannot be entered or built upon."},[ae.Radiation]:{description:"Areas glowing with a sickly green light. Highly dangerous to all organic life.",modifiers:"Causes constant attrition to any troops in the hex. Can contain rare technology or mutated resources."},[ae.Crater]:{description:"The result of a massive, ancient impact. The crater has unearthed rare materials.",modifiers:"Good source of Scrap. Difficult terrain with a minor defensive bonus."},[ae.Swamp]:{description:"Murky, bog-filled wetlands. Slow to move through and teeming with unseen dangers.",modifiers:"High movement attrition. Moderate defensive bonus. Can be a source of strange food."}},ac={[F.Scrapyard]:"A dumping ground for old-world technology. A reliable source of Scrap.",[F.FoodSource]:"An oasis of life, like a patch of hardy fruit trees or a stream with edible fish. Excellent for finding Food.",[F.WeaponsCache]:"A forgotten military bunker or police armory. A rare and valuable source for finding ready-made Weapons.",[F.ResearchLab]:"An old scientific outpost. Accelerates technology research conducted here and may contain technical documents.",[F.Settlement]:"A small, neutral community of survivors. Increases recruitment effectiveness in the nearby area.",[F.Outpost]:"A fortified structure built by a tribe. Provides visibility and a defensive bonus, but not as strong as a Home Base.",[F.Ruins]:"The crumbling remains of a pre-war structure. Excellent for Scavenging, particularly for Scrap.",[F.BanditCamp]:"A den of hostile raiders. They must be cleared out with an Attack action before the hex is safe. May hold loot.",[F.Mine]:"A pre-war mining operation. Provides a steady passive income of Scrap for the tribe that controls it.",[F.Vault]:"A heavily-fortified underground shelter. Extremely difficult to breach, but may contain immense treasures.",[F.Battlefield]:"The site of a major past conflict. A good place to salvage Weapons from the fallen.",[F.Factory]:"An automated pre-war manufacturing plant. Provides a large passive income of Scrap for the controlling tribe.",[F.Crater]:"A massive impact crater. Good for scavenging rare minerals and Scrap.",[F.Radiation]:"A zone of intense, persistent radiation. Lethal to occupy for long, but may hold unique artifacts."},cn=({label:r,isActive:u,onClick:c,icon:o})=>l.jsxs("button",{onClick:c,className:`flex-1 flex flex-col items-center justify-center p-2 rounded-t-lg transition-colors duration-200 focus:outline-none ${u?"bg-neutral-800 text-amber-400 border-b-2 border-amber-400":"bg-neutral-900 text-slate-400 hover:bg-neutral-800"}`,children:[l.jsx("span",{className:"text-2xl",children:o}),l.jsx("span",{className:"text-xs font-bold",children:r})]}),yh=({onClose:r,allTribes:u,allChiefRequests:c,allAssetRequests:o})=>{const[f,m]=$.useState("terrain"),[x,S]=$.useState(Object.keys(Mi)[0]),b=$.useMemo(()=>{const C=new Map;return u.forEach(p=>{p.garrisons&&Object.values(p.garrisons).forEach(T=>{(T.chiefs||[]).forEach(z=>{C.set(z.name,{status:"Owned",owner:p.playerName})})})}),(c||[]).forEach(p=>{if(p.status==="pending"){const T=u.find(z=>z.id===p.tribeId);C.set(p.chiefName,{status:"Pending",owner:T?.playerName})}}),C},[u,c]),g=$.useMemo(()=>{const C=new Map;return u.forEach(p=>{(p.assets||[]).forEach(T=>{C.set(T,{status:"Owned",owner:p.playerName})})}),(o||[]).forEach(p=>{if(p.status==="pending"){const T=u.find(z=>z.id===p.tribeId);C.set(p.assetName,{status:"Pending",owner:T?.playerName})}}),C},[u,o]),w=C=>{switch(m(C),C){case"terrain":S(Object.keys(Mi)[0]);break;case"poi":S(Object.keys(ac)[0]);break;case"chiefs":S(sl[0]?.name||null);break;case"assets":S(ll[0]?.name||null);break;case"tech":S(dn[0]?.id||null);break;default:S(null)}},q=()=>{const C=[];switch(f){case"terrain":Object.entries(Mi).forEach(([p,T])=>{C.push({id:p,content:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 mr-2 rounded-sm flex-shrink-0",style:{background:`url(#texture-${p})`,backgroundSize:"cover"}}),l.jsx("span",{className:"font-semibold",children:p})]})})});break;case"poi":Object.entries(ac).forEach(([p])=>{const T=p;C.push({id:p,content:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`w-8 h-8 mr-2 rounded-sm flex items-center justify-center font-bold text-lg flex-shrink-0 ${la[T].bg.replace("fill-","bg-")} ${la[T].text}`,children:fn[T]}),l.jsx("span",{className:"font-semibold",children:p})]})})});break;case"chiefs":sl.forEach(p=>{C.push({id:p.name,content:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("img",{src:p.key_image_url,alt:p.name,className:"w-10 h-10 rounded-md object-cover flex-shrink-0"}),l.jsx("span",{className:"font-semibold",children:p.name})]})})});break;case"assets":ll.forEach(p=>{C.push({id:p.name,content:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("img",{src:p.key_image_url,alt:p.name,className:"w-10 h-10 rounded-md object-cover flex-shrink-0 bg-slate-700"}),l.jsx("span",{className:"font-semibold",children:p.name})]})})});break;case"tech":dn.forEach(p=>{C.push({id:p.id,content:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-2xl w-8 text-center",children:p.icon}),l.jsx("span",{className:"font-semibold",children:p.name})]})})});break}return C.map(p=>l.jsx("button",{onClick:()=>S(p.id),className:`w-full text-left p-2 rounded-md transition-colors duration-150 ${x===p.id?"bg-amber-800/50 text-white":"hover:bg-slate-700/50 text-slate-300"}`,children:p.content},p.id))},_=()=>{if(!x)return l.jsx("div",{className:"p-8 text-center text-slate-400",children:"Select an item from the list to see details."});let C=null;switch(f){case"terrain":const p=Mi[x];C=l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-3xl font-bold text-amber-400 mb-4",children:x}),l.jsx("div",{className:"w-full h-24 rounded-lg mb-4",style:{background:`url(#texture-${x})`,backgroundSize:"cover"}}),l.jsx("p",{className:"text-slate-300 mb-4",children:p.description}),l.jsx("h4",{className:"font-bold text-slate-200 mt-4",children:"Gameplay Modifiers:"}),l.jsx("p",{className:"text-slate-400",children:p.modifiers})]});break;case"poi":const T=x;C=l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[l.jsx("div",{className:`w-16 h-16 rounded-lg flex items-center justify-center font-bold text-4xl flex-shrink-0 ${la[T].bg.replace("fill-","bg-")} ${la[T].text}`,children:fn[T]}),l.jsx("h3",{className:"text-3xl font-bold text-amber-400",children:x})]}),l.jsx("p",{className:"text-slate-300",children:ac[T]})]});break;case"chiefs":const z=sl.find(U=>U.name===x);if(!z)return null;const P=b.get(z.name);C=l.jsxs("div",{className:"p-6 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center space-x-6 mb-4",children:[l.jsx("img",{src:z.key_image_url,alt:z.name,className:"w-32 h-32 rounded-lg object-cover flex-shrink-0 border-2 border-slate-600"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-3xl font-bold text-amber-400",children:z.name}),l.jsxs("p",{className:"text-slate-400 italic mt-2",children:['"',z.description,'"']})]})]}),l.jsx("div",{className:"grid grid-cols-2 gap-4 text-center py-4 border-y border-slate-700",children:Object.entries(z.stats).map(([U,le])=>l.jsxs("div",{children:[l.jsx("div",{className:"text-sm uppercase text-slate-400 tracking-wider",children:U}),l.jsx("div",{className:"text-2xl font-bold text-white",children:le})]},U))}),l.jsxs("div",{className:"mt-auto pt-4 text-center",children:[l.jsx("h4",{className:"text-sm uppercase text-slate-400 tracking-wider",children:"Status"}),P?l.jsx("p",{className:`text-xl font-bold ${P.status==="Owned"?"text-red-500":"text-yellow-500"}`,children:P.status==="Owned"?`Owned by ${P.owner}`:`Pending for ${P.owner}`}):l.jsx("p",{className:"text-xl font-bold text-green-500",children:"Available"})]})]});break;case"assets":const H=ll.find(U=>U.name===x);if(!H)return null;const J=g.get(H.name);C=l.jsxs("div",{className:"p-6 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center space-x-6 mb-4",children:[l.jsx("img",{src:H.key_image_url,alt:H.name,className:"w-32 h-32 rounded-lg object-cover flex-shrink-0 border-2 border-slate-600 bg-slate-700"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-3xl font-bold text-amber-400",children:H.name}),l.jsxs("p",{className:"text-slate-400 italic mt-2",children:['"',H.description,'"']})]})]}),l.jsxs("div",{className:"py-4 border-y border-slate-700",children:[l.jsx("h4",{className:"font-bold text-slate-200 mb-2",children:"Effects:"}),l.jsx("ul",{className:"list-disc list-inside text-slate-300 space-y-1",children:H.effects.map((U,le)=>{let B="";const Z=U.value*100;return B+=`${Z>0?"+":""}${U.value.toFixed(2).replace("0.",".")} `,U.type===pe.MovementSpeedBonus?B+="Movement Speed":B+=U.type.replace(/_/g," ").replace("BONUS","").toLowerCase(),U.resource&&(B+=` to ${U.resource}`),U.terrain&&(B+=` in ${U.terrain}`),l.jsx("li",{className:"capitalize",children:B},le)})})]}),l.jsxs("div",{className:"mt-auto pt-4 text-center",children:[l.jsx("h4",{className:"text-sm uppercase text-slate-400 tracking-wider",children:"Status"}),J?l.jsx("p",{className:`text-xl font-bold ${J.status==="Owned"?"text-red-500":"text-yellow-500"}`,children:J.status==="Owned"?`Owned by ${J.owner}`:`Pending for ${J.owner}`}):l.jsx("p",{className:"text-xl font-bold text-green-500",children:"Available"})]})]});break;case"tech":const ee=dn.find(U=>U.id===x);if(!ee)return null;C=l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[l.jsx("span",{className:"text-6xl",children:ee.icon}),l.jsx("h3",{className:"text-3xl font-bold text-amber-400",children:ee.name})]}),l.jsx("p",{className:"text-slate-300 mb-4",children:ee.description}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm py-4 border-y border-slate-700",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-slate-300 block",children:"Scrap Cost"}),l.jsxs("span",{className:"text-white",children:[ee.cost.scrap," ⚙️"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-slate-300 block",children:"Min. Troops"}),l.jsxs("span",{className:"text-white",children:[ee.requiredTroops," 👥"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-slate-300 block",children:"Total Points"}),l.jsxs("span",{className:"text-white",children:[ee.researchPoints," pts"]})]})]}),ee.prerequisites.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-bold text-slate-200",children:"Prerequisites:"}),l.jsx("ul",{className:"list-disc list-inside text-slate-400",children:ee.prerequisites.map(U=>l.jsx("li",{children:dn.find(le=>le.id===U)?.name||U},U))})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-bold text-slate-200",children:"Effects:"}),l.jsxs("ul",{className:"list-disc list-inside text-slate-400",children:[ee.effects.map((U,le)=>l.jsxs("li",{children:[U.type.replace(/_/g," ").toLowerCase(),": +",U.value,U.type.includes("BONUS")?"%":""," ",U.resource||""]},le)),ee.effects.length===0&&l.jsx("li",{children:"Special effect (see description)"})]})]})]});break}return l.jsx(Ce,{className:"h-full bg-neutral-800/50",children:C},x)};return l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-40 p-4",onClick:r,children:l.jsxs("div",{className:"bg-neutral-900 border border-neutral-700 rounded-lg shadow-lg w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",onClick:C=>C.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center px-4 border-b-2 border-slate-700",children:[l.jsx("h2",{className:"text-2xl font-bold text-amber-500",children:"Wasteland Codex"}),l.jsx(fe,{onClick:r,variant:"secondary",className:"bg-transparent hover:bg-slate-700",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"flex flex-grow overflow-hidden",children:[l.jsxs("aside",{className:"w-72 flex-shrink-0 bg-neutral-900/80 flex flex-col border-r border-slate-700",children:[l.jsx("div",{className:"p-2 flex-shrink-0",children:l.jsxs("div",{className:"flex bg-neutral-900 rounded-lg",children:[l.jsx(cn,{label:"Terrain",icon:"🏞️",isActive:f==="terrain",onClick:()=>w("terrain")}),l.jsx(cn,{label:"POIs",icon:"📍",isActive:f==="poi",onClick:()=>w("poi")}),l.jsx(cn,{label:"Chiefs",icon:"👤",isActive:f==="chiefs",onClick:()=>w("chiefs")}),l.jsx(cn,{label:"Assets",icon:"⚙️",isActive:f==="assets",onClick:()=>w("assets")}),l.jsx(cn,{label:"Tech",icon:"🔬",isActive:f==="tech",onClick:()=>w("tech")})]})}),l.jsx("div",{className:"flex-grow overflow-y-auto p-2 space-y-1",children:q()})]}),l.jsx("main",{className:"flex-grow p-4 bg-slate-800/30 overflow-y-auto",children:_()})]})]})})},q0=({allJourneys:r,playerTribeId:u,turn:c,onRespond:o,responses:f})=>{const m=r.filter(S=>S.type===tt.Trade&&S.status==="awaiting_response"&&S.ownerTribeId!==u);if(m.length===0)return null;const x=S=>Object.entries(S).filter(([,b])=>b>0).map(([b,g])=>`${g} ${b}`).join(", ")||"nothing";return l.jsx(Ce,{title:"Pending Trade Offers",children:l.jsx("ul",{className:"space-y-4 max-h-64 overflow-y-auto pr-2",children:m.map(S=>{if(!S.tradeOffer)return null;const b=f.find(w=>w.journeyId===S.id)?.response,g=(S.responseDeadline??c)-c;return l.jsxs("li",{className:"text-sm p-3 bg-slate-900/50 rounded-md space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-bold text-amber-400",children:["Offer from ",l.jsx("span",{className:"text-white",children:S.tradeOffer.fromTribeName})]}),S.responseDeadline&&l.jsx("p",{className:`text-xs font-semibold ${g<=1?"text-red-400 animate-pulse":"text-slate-400"}`,children:g>0?`Expires in ${g} turn(s)`:"Expires this turn"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[l.jsxs("div",{className:"bg-slate-800 p-2 rounded",children:[l.jsx("p",{className:"font-semibold text-slate-300",children:"They Offer:"}),l.jsx("p",{className:"text-white",children:x(S.payload)})]}),l.jsxs("div",{className:"bg-slate-800 p-2 rounded",children:[l.jsx("p",{className:"font-semibold text-slate-300",children:"They Request:"}),l.jsx("p",{className:"text-white",children:x(S.tradeOffer.request)})]})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[l.jsx(fe,{onClick:()=>o(S.id,"reject"),className:`text-xs px-3 py-1 ${b==="reject"?"bg-red-600 ring-2 ring-red-400":"bg-red-800/80 hover:bg-red-700"}`,children:"Reject"}),l.jsx(fe,{onClick:()=>o(S.id,"accept"),className:`text-xs px-3 py-1 ${b==="accept"?"bg-green-600 ring-2 ring-green-400":"bg-green-800/80 hover:bg-green-700"}`,children:"Accept"})]})]},S.id)})})})},U0=({allJourneys:r,playerTribeId:u,turn:c})=>{const o=r.filter(m=>m.ownerTribeId===u);if(o.length===0)return null;const f=m=>{const x=[];return m.troops>0&&x.push(`${m.troops} 👥`),m.weapons>0&&x.push(`${m.weapons} ⚔️`),m.chiefs.length>0&&x.push(`${m.chiefs.length} ★`),x.join(", ")};return l.jsx(Ce,{title:"Active Journeys",children:l.jsx("ul",{className:"space-y-3 max-h-64 overflow-y-auto pr-2",children:o.map(m=>{const x=m.arrivalTurn;return l.jsxs("li",{className:"text-sm p-3 bg-slate-900/50 rounded-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-bold text-amber-400 capitalize",children:[m.type," to ",m.destination]}),l.jsxs("p",{className:"text-xs font-semibold text-slate-400",children:["ETA: ",x," turn(s)"]})]}),l.jsxs("p",{className:"text-xs text-slate-300",children:["Force: ",f(m.force)]}),m.status==="returning"&&l.jsx("p",{className:"text-xs italic text-green-400",children:"Returning home..."}),m.status==="awaiting_response"&&l.jsx("p",{className:"text-xs italic text-yellow-400",children:"Awaiting response..."})]},m.id)})})})},H0=({isOpen:r,onClose:u,onSubmit:c,playerTribe:o,targetTribe:f})=>{const[m,x]=$.useState({food:0,scrap:0,weapons:0});if(!r)return null;const S=Object.values(o.garrisons).reduce((w,q)=>w+q.weapons,0),b=w=>{const{name:q,value:_}=w.target;x(C=>({...C,[q]:Math.max(0,parseInt(_)||0)}))},g=w=>{w.preventDefault(),c(m),u()};return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:u,children:l.jsx("div",{className:"w-full max-w-md",onClick:w=>w.stopPropagation(),children:l.jsx(Ce,{title:`Sue for Peace with ${f.tribeName}`,children:l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsx("p",{className:"text-slate-400",children:"Offer reparations to encourage them to accept peace. The resources will be transferred from your reserves if they accept."}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:["Food (Your total: ",o.globalResources.food,")"]}),l.jsx("input",{type:"number",name:"food",value:m.food,onChange:b,min:"0",max:o.globalResources.food,className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:["Scrap (Your total: ",o.globalResources.scrap,")"]}),l.jsx("input",{type:"number",name:"scrap",value:m.scrap,onChange:b,min:"0",max:o.globalResources.scrap,className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:["Weapons (Your total: ",S,")"]}),l.jsx("input",{type:"number",name:"weapons",value:m.weapons,onChange:b,min:"0",max:S,className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-700",children:[l.jsx(fe,{type:"button",variant:"secondary",onClick:u,children:"Cancel"}),l.jsx(fe,{type:"submit",children:"Send Peace Offer"})]})]})})})})},L0=r=>{const{playerTribe:u,allTribes:c,diplomaticProposals:o,turn:f,onProposeAlliance:m,onSueForPeace:x,onDeclareWar:S,onAcceptProposal:b,onRejectProposal:g}=r,[w,q]=$.useState(null),[_,C]=$.useState(null),p=c.filter(B=>B.id!==u.id&&!B.isAI),T=c.filter(B=>B.id!==u.id&&B.isAI),z=o.filter(B=>B.toTribeId===u.id),P=o.filter(B=>B.fromTribeId===u.id),H=()=>{w&&S(w.id),q(null)},J=B=>{_&&x(_.id,B),C(null)},ee=B=>{const Z=B?.status||De.Neutral,W={[De.Alliance]:"bg-blue-600 text-blue-100",[De.Neutral]:"bg-slate-500 text-slate-100",[De.War]:"bg-red-700 text-red-100"};return l.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${W[Z]}`,children:Z})},U=B=>{if(!B)return"no reparations.";const Z=Object.entries(B).filter(([,W])=>W>0).map(([W,oe])=>`${oe} ${W}`);return Z.length>0?`They offer: ${Z.join(", ")}.`:"no reparations."},le=B=>l.jsx("ul",{className:"space-y-2",children:B.map(Z=>{const W=u.diplomacy[Z.id]||{status:De.Neutral},oe=P.some(ge=>ge.toTribeId===Z.id),de=W.truceUntilTurn&&W.truceUntilTurn>f,se=de?W.truceUntilTurn-f:0;return l.jsxs("li",{className:"flex items-center justify-between p-2 bg-slate-900/50 rounded-md",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-700 rounded-full flex items-center justify-center",children:l.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-current text-slate-300",children:sa[Z.icon]})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-200",children:Z.tribeName}),l.jsx("div",{className:"text-xs",children:ee(W)})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[de&&l.jsxs("span",{className:"text-xs italic text-green-400 self-center pr-2",title:"Truce active from a recent peace treaty.",children:["Truce: ",se," turn(s)"]}),W.status===De.Neutral&&!oe&&!de&&l.jsx(fe,{onClick:()=>m(Z.id),className:"text-xs px-2 py-1 bg-green-800 hover:bg-green-700",children:"Propose Alliance"}),W.status===De.War&&!oe&&l.jsx(fe,{onClick:()=>C(Z),className:"text-xs px-2 py-1 bg-yellow-600 hover:bg-yellow-700",children:"Sue for Peace"}),oe&&l.jsx("span",{className:"text-xs italic text-yellow-400 self-center pr-2",children:"Pending"}),W.status!==De.War&&l.jsx(fe,{onClick:()=>q(Z),className:"text-xs px-2 py-1 bg-red-900 hover:bg-red-800",disabled:de,title:de?"Cannot declare war due to truce.":`Declare war on ${Z.tribeName}`,children:"Declare War"})]})]},Z.id)})});return l.jsxs(l.Fragment,{children:[l.jsx(Ce,{title:"Diplomacy",children:l.jsxs("div",{className:"space-y-4 max-h-[40rem] overflow-y-auto pr-2",children:[z.length>0&&l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-300 mb-2",children:"Incoming Proposals"}),z.map(B=>{const Z=B.expiresOnTurn-f,W=B.statusChangeTo===De.Neutral;return l.jsxs("div",{className:`p-3 border rounded-lg space-y-2 ${W?"bg-yellow-900/50 border-yellow-700":"bg-blue-900/50 border-blue-700"}`,children:[l.jsxs("p",{className:`font-bold text-sm ${W?"text-yellow-300":"text-blue-300"}`,children:[W?"Peace":"Alliance"," proposal from ",B.fromTribeName]}),W&&l.jsx("p",{className:"text-xs text-slate-300",children:U(B.reparations)}),l.jsxs("p",{className:`text-xs ${Z<=1?"text-red-400":"text-slate-400"}`,children:["Expires in ",Z," turn(s)"]}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx(fe,{onClick:()=>g(B.id),className:"text-xs px-3 py-1 bg-red-800/80 hover:bg-red-700",children:"Reject"}),l.jsx(fe,{onClick:()=>b(B.id),className:"text-xs px-3 py-1 bg-green-800/80 hover:bg-green-700",children:"Accept"})]})]},B.id)})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-300 mb-2",children:"Player Tribes"}),p.length>0?le(p):l.jsx("p",{className:"text-sm text-slate-400 italic",children:"No other active player tribes."})]}),T.length>0&&l.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[l.jsx("h4",{className:"font-semibold text-slate-300 mb-2",children:"AI Tribes"}),le(T)]})]})}),w&&l.jsx(Fa,{title:`Declare War on ${w.tribeName}?`,message:"This will immediately set your diplomatic status to 'War'. This action cannot be undone.",onConfirm:H,onCancel:()=>q(null)}),_&&l.jsx(H0,{isOpen:!!_,onClose:()=>C(null),onSubmit:J,playerTribe:u,targetTribe:_})]})},Y0=(r,u)=>`${String(50+r).padStart(3,"0")}.${String(50+u).padStart(3,"0")}`,G0=r=>{const{currentUser:u,playerTribe:c,allTribes:o,turn:f,mapData:m,startingLocations:x,allChiefRequests:S,allAssetRequests:b,journeys:g,diplomaticProposals:w,onFinalizeTurn:q,onRequestChief:_,onRequestAsset:C,onUpdateTribe:p,onLogout:T,onNavigateToAdmin:z,onNavigateToLeaderboard:P,onProposeAlliance:H,onSueForPeace:J,onDeclareWar:ee,onAcceptProposal:U,onRejectProposal:le}=r;o.filter(_e=>_e.id!==c?.id);const[B,Z]=$.useState([]),[W,oe]=$.useState([]),[de,se]=$.useState(!1),[ge,he]=$.useState(!1),[K,A]=$.useState(!1),[R,V]=$.useState(!1),[te,v]=$.useState({active:!1,onSelect:null}),[O,Q]=$.useState(null),[I,ne]=$.useState(!1),[ve,G]=$.useState(!1),[xe,ce]=$.useState("planning");$.useEffect(()=>{c&&(c.turnSubmitted?ce("waiting"):c.lastTurnResults&&c.lastTurnResults.length>0?ce("results"):ce("planning"),Z([]),oe([]))},[c,f]);const ye=$.useMemo(()=>xe==="waiting"?"waiting":xe==="results"?"results":"planning",[xe]),je=$.useMemo(()=>{if(!c)return{};const _e=JSON.parse(JSON.stringify(c.garrisons||{}));for(const Fe of B){const{start_location:Qt,troops:Zt,weapons:lt,chiefsToMove:zt,location:xt,assignedTroops:pn}=Fe.actionData,ra=Qt||xt;ra&&_e[ra]&&(Zt&&(_e[ra].troops-=Zt),lt&&(_e[ra].weapons-=lt),pn&&(_e[ra].troops-=pn),zt&&Array.isArray(zt)&&(_e[ra].chiefs=(_e[ra].chiefs||[]).filter(qi=>!zt.includes(qi.name))))}if(c.currentResearch){const{location:Fe,assignedTroops:Qt}=c.currentResearch;_e[Fe]&&(_e[Fe].troops=Math.max(0,_e[Fe].troops-Qt))}return _e},[c,B]);if(!m||m.length===0)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"text-xl font-bold text-amber-400",children:"Loading Wasteland..."})});if(!c&&u.role==="admin")return l.jsxs("div",{className:"p-8",children:[l.jsx(hh,{currentUser:u,onLogout:T,onNavigateToAdmin:z,turn:f,gamePhase:"observing",onOpenHelp:()=>A(!0),onOpenCodex:()=>V(!0)}),l.jsx("h2",{className:"text-2xl font-bold text-center mt-8",children:"Admin Observer Mode"}),l.jsx("p",{className:"text-center text-slate-400",children:'Select "Admin Panel" from the header to view game details.'}),l.jsx(Di,{mapData:m,playerTribe:void 0,allTribes:o,journeys:g,startingLocations:x,selectionMode:!1,onHexSelect:()=>{}}),K&&l.jsx(vh,{onClose:()=>A(!1)}),R&&l.jsx(yh,{onClose:()=>V(!1),allTribes:o,allChiefRequests:S,allAssetRequests:b})]});if(!c)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"text-xl font-bold text-slate-400",children:"Error: Player tribe not found."})});const ke=(_e,Fe)=>{oe(Qt=>[...Qt.filter(lt=>lt.journeyId!==_e),{journeyId:_e,response:Fe}])},$e=$.useMemo(()=>Object.values(c.garrisons||{}).reduce((_e,Fe)=>_e+(Fe.chiefs?.length||0),0),[c.garrisons]),st=$.useMemo(()=>Object.values(c.garrisons||{}).reduce((_e,Fe)=>_e+Fe.troops,0),[c.garrisons]),mt=$.useMemo(()=>{let _e=0;st>=120?_e=2:st>=60&&(_e=1);const Fe=Math.floor(c.stats.leadership/10);return 3+_e+Fe+$e},[c.stats.leadership,st,$e]),na=_e=>{B.length<mt&&Z([...B,_e])},ia=_e=>{Z(B.filter(Fe=>Fe.id!==_e))},yt=()=>{ne(!1),q(B,W)},ol=()=>{se(!1),Q(null),v({active:!1,onSelect:null})},hn=(_e,Fe)=>{const Qt=Y0(_e,Fe);te.active&&te.onSelect&&(te.onSelect(Qt),v({active:!1,onSelect:null}),se(!0))},mn=(_e,Fe,Qt)=>{const Zt={id:`action-${Date.now()}`,actionType:ie.StartResearch,actionData:{techId:_e,location:Fe,assignedTroops:Qt}};na(Zt),he(!1)},gs=()=>{if(!c||!c.currentResearch)return;const _e={...c,currentResearch:null};p(_e),G(!1)},Bi=()=>xe==="waiting"?l.jsx(Ce,{title:"Turn Status",children:l.jsx("p",{className:"text-center text-slate-400 p-8 animate-pulse",children:"Actions submitted. Waiting for Admin to process the turn."})}):xe==="results"?l.jsx(M0,{results:c.lastTurnResults,onStartPlanning:()=>ce("planning")}):l.jsxs(l.Fragment,{children:[l.jsx(y0,{actions:B,maxActions:mt,onOpenModal:()=>se(!0),onDeleteAction:ia,onFinalize:()=>ne(!0),phase:ye}),l.jsx(q0,{allJourneys:g,playerTribeId:c.id,turn:f,onRespond:ke,responses:W})]});return l.jsxs("div",{className:"space-y-6 p-4 sm:p-6 lg:p-8",children:[l.jsx(hh,{currentUser:u,playerTribe:c,onLogout:T,onNavigateToAdmin:z,onNavigateToLeaderboard:P,turn:f,gamePhase:ye,onOpenHelp:()=>A(!0),onOpenCodex:()=>V(!0)}),l.jsxs("main",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsx(Di,{mapData:m,playerTribe:c,allTribes:o,journeys:g,startingLocations:x,selectionMode:te.active,onHexSelect:hn,homeBaseLocation:c.location})}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(x0,{globalResources:c.globalResources,garrisons:c.garrisons||{},rationLevel:c.rationLevel}),l.jsx(v0,{stats:c.stats}),Bi(),l.jsx(U0,{allJourneys:g,playerTribeId:c.id,turn:f}),l.jsx(L0,{playerTribe:c,allTribes:o,diplomaticProposals:w,turn:f,onProposeAlliance:H,onSueForPeace:J,onDeclareWar:ee,onAcceptProposal:U,onRejectProposal:le}),l.jsx(O0,{tribe:c,plannedActions:B,onOpenTechTree:()=>he(!0),onCancelResearch:()=>G(!0)}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[l.jsx(C0,{tribe:c,allChiefRequests:S,allTribes:o,onRequestChief:_}),l.jsx(E0,{tribe:c,allAssetRequests:b,allTribes:o,onRequestAsset:C})]})]})]}),de&&l.jsx(_0,{isOpen:de,onClose:ol,onAddAction:na,tribe:c,allTribes:o,mapData:m,availableGarrisons:je,setMapSelectionMode:v,draftAction:O,setDraftAction:Q,onEnterMapSelectionMode:()=>se(!1)}),ge&&l.jsx(k0,{isOpen:ge,onClose:()=>he(!1),tribe:c,availableGarrisons:je,onStartResearch:mn}),I&&l.jsx(Fa,{title:"Finalize Turn?",message:"You will not be able to change your actions after this. Are you sure you want to proceed?",onConfirm:yt,onCancel:()=>ne(!1)}),ve&&l.jsx(Fa,{title:"Cancel Research Project?",message:"All progress and invested scrap will be lost. Your assigned troops will become available again. Are you sure?",onConfirm:gs,onCancel:()=>G(!1)}),K&&l.jsx(vh,{onClose:()=>A(!1)}),R&&l.jsx(yh,{onClose:()=>V(!1),allTribes:o,allChiefRequests:S,allAssetRequests:b})]})},Bh="radix_tribes_users",kt=r=>`hashed_${r}_salted_v1`;function ps(){const r=localStorage.getItem(Bh);if(r){const c=JSON.parse(r);let o=!1;const f=c.findIndex(x=>x.username?.toLowerCase()==="admin");if(f!==-1){const x=c[f],S=kt("snoopy");x.passwordHash!==S&&(x.passwordHash=S,o=!0)}const m=c.map(x=>!x.securityQuestion||!x.securityAnswerHash?(o=!0,{...x,securityQuestion:al[0],securityAnswerHash:kt("buddy")}):x);return o&&rl(m),m}const u=[{id:"user-admin",username:"Admin",passwordHash:kt("snoopy"),role:"admin",securityQuestion:al[0],securityAnswerHash:kt("snoopy")},{id:"user-1",username:"gordon",passwordHash:kt("password"),role:"player",securityQuestion:al[0],securityAnswerHash:kt("buddy")},{id:"user-2",username:"player2",passwordHash:kt("password"),role:"player",securityQuestion:al[1],securityAnswerHash:kt("buddy")}];return rl(u),u}function rl(r){localStorage.setItem(Bh,JSON.stringify(r))}function V0(){return ps()}function X0(r,u,c,o){const f=ps();if(f.find(x=>x.username.toLowerCase()===r.toLowerCase()))return{user:null,error:"Username is already taken."};const m={id:`user-${Date.now()}`,username:r,passwordHash:kt(u),role:"player",securityQuestion:c,securityAnswerHash:kt(o.toLowerCase().trim())};return rl([...f,m]),{user:m,error:null}}function qh(r,u){const o=ps().find(f=>f.username.toLowerCase()===r.toLowerCase());return o&&o.passwordHash===kt(u)?(sessionStorage.setItem("radix_user",JSON.stringify(o)),o):null}function Q0(){sessionStorage.removeItem("radix_user")}function Uh(){const r=sessionStorage.getItem("radix_user");if(r)try{return JSON.parse(r)}catch{return null}return null}function Z0(r){const c=ps().find(o=>o.username.toLowerCase()===r.toLowerCase());return c?c.securityQuestion:null}function $0(r,u){const o=ps().find(f=>f.username.toLowerCase()===r.toLowerCase());return o?o.securityAnswerHash===kt(u.toLowerCase().trim()):!1}function F0(r,u){const c=ps(),o=c.findIndex(f=>f.username.toLowerCase()===r.toLowerCase());return o!==-1?(c[o].passwordHash=kt(u),rl(c),!0):!1}function J0(r){const c=ps().filter(o=>o.id!==r);rl(c)}function K0(r){rl(r)}function W0(r){sessionStorage.setItem("radix_user",JSON.stringify(r))}const P0=({onLoginSuccess:r,onSwitchToRegister:u,onNavigateToForgotPassword:c})=>{const[o,f]=$.useState(""),[m,x]=$.useState(""),[S,b]=$.useState(""),g=w=>{w.preventDefault();const q=qh(o,m);q?r(q):b("Invalid username or password.")};return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-900",children:[l.jsx("img",{src:"https://www.platopotato.com/NFT/Tribes/logotribesban.png",alt:"Tribes Logo",className:"w-auto h-20 mb-6"}),l.jsx(Ce,{className:"max-w-sm w-full",children:l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-center text-amber-400",children:"Login"}),l.jsx("p",{className:"text-slate-400 text-center text-sm",children:"Enter your credentials to join the wasteland."}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-slate-300 mb-1",children:"Username"}),l.jsx("input",{type:"text",id:"username",value:o,onChange:w=>f(w.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200 focus:ring-amber-500 focus:border-amber-500",placeholder:"eg., Platopotato..",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-300 mb-1",children:"Password"}),l.jsx("input",{type:"password",id:"password",value:m,onChange:w=>x(w.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200 focus:ring-amber-500 focus:border-amber-500",placeholder:"Password",required:!0})]}),l.jsx("div",{className:"text-right text-sm",children:l.jsx("button",{type:"button",onClick:c,className:"font-medium text-amber-500 hover:text-amber-400",children:"Forgot Password?"})}),S&&l.jsx("p",{className:"text-red-500 text-sm text-center",children:S}),l.jsx(fe,{type:"submit",className:"w-full",children:"Enter the Wasteland"}),l.jsxs("p",{className:"text-sm text-center text-slate-400",children:["Don't have an account?"," ",l.jsx("button",{type:"button",onClick:u,className:"font-medium text-amber-500 hover:text-amber-400",children:"Register"})]}),l.jsxs("div",{className:"text-center text-sm pt-4 border-t border-slate-700 flex justify-center space-x-4",children:[l.jsx("a",{href:"https://www.wearemonstas.com/radix-tribes",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-amber-500 hover:text-amber-400",children:"Website"}),l.jsx("a",{href:"https://t.me/WeAreMonstas",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-amber-500 hover:text-amber-400",children:"Telegram Group"})]})]})})]})},I0=({onRegisterSuccess:r,onSwitchToLogin:u})=>{const[c,o]=$.useState(""),[f,m]=$.useState(""),[x,S]=$.useState(""),[b,g]=$.useState(al[0]),[w,q]=$.useState(""),[_,C]=$.useState(""),p=T=>{if(T.preventDefault(),C(""),f!==x){C("Passwords do not match.");return}if(f.length<6){C("Password must be at least 6 characters long.");return}if(!w.trim()){C("Security answer is required.");return}const{user:z,error:P}=X0(c,f,b,w);if(P)C(P);else if(z){const H=qh(c,f);H?r(H):C("Registration succeeded, but login failed. Please try logging in manually.")}};return l.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-900",children:l.jsx(Ce,{title:"Register a New Account",className:"max-w-sm w-full",children:l.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username-reg",className:"block text-sm font-medium text-slate-300 mb-1",children:"Username"}),l.jsx("input",{type:"text",id:"username-reg",value:c,onChange:T=>o(T.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200 focus:ring-amber-500 focus:border-amber-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password-reg",className:"block text-sm font-medium text-slate-300 mb-1",children:"Password"}),l.jsx("input",{type:"password",id:"password-reg",value:f,onChange:T=>m(T.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200 focus:ring-amber-500 focus:border-amber-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirm-password-reg",className:"block text-sm font-medium text-slate-300 mb-1",children:"Confirm Password"}),l.jsx("input",{type:"password",id:"confirm-password-reg",value:x,onChange:T=>S(T.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200 focus:ring-amber-500 focus:border-amber-500",required:!0})]}),l.jsxs("div",{className:"pt-4 border-t border-slate-700",children:[l.jsx("h3",{className:"text-sm font-medium text-slate-300 mb-2",children:"Password Recovery"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"security-question",className:"block text-sm font-medium text-slate-300 mb-1",children:"Security Question"}),l.jsx("select",{id:"security-question",value:b,onChange:T=>g(T.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200 focus:ring-amber-500 focus:border-amber-500",children:al.map(T=>l.jsx("option",{value:T,children:T},T))})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{htmlFor:"security-answer",className:"block text-sm font-medium text-slate-300 mb-1",children:"Security Answer (case-insensitive)"}),l.jsx("input",{type:"password",id:"security-answer",value:w,onChange:T=>q(T.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200 focus:ring-amber-500 focus:border-amber-500",required:!0})]})]}),_&&l.jsx("p",{className:"text-red-500 text-sm text-center",children:_}),l.jsx(fe,{type:"submit",className:"w-full",children:"Register"}),l.jsxs("p",{className:"text-sm text-center text-slate-400",children:["Already have an account?"," ",l.jsx("button",{type:"button",onClick:u,className:"font-medium text-amber-500 hover:text-amber-400",children:"Login"})]})]})})})},eg=r=>{const{gameState:u,onBack:c,onNavigateToEditor:o,onProcessTurn:f,onRemovePlayer:m,onStartNewGame:x,onLoadBackup:S,onApproveChief:b,onDenyChief:g,onApproveAsset:w,onDenyAsset:q,onAddAITribe:_}=r,{tribes:C,chiefRequests:p,assetRequests:T}=u,z=V0(),P=Uh(),[H,J]=$.useState(null),[ee,U]=$.useState(!1),le=$.useRef(null);if(!P)return null;const B=()=>{H&&(m(H.id),J(null))},Z=()=>{x(),U(!1)},W=()=>{const A=JSON.stringify({gameState:u,users:z},null,2),R=new Blob([A],{type:"application/json"}),V=URL.createObjectURL(R),te=document.createElement("a"),v=new Date().toISOString().split("T")[0];te.href=V,te.download=`radix-tribes-backup-${v}.json`,document.body.appendChild(te),te.click(),document.body.removeChild(te),URL.revokeObjectURL(V)},oe=()=>{le.current?.click()},de=K=>{const A=K.target.files?.[0];if(!A)return;const R=new FileReader;R.onload=V=>{try{const te=V.target?.result;if(typeof te!="string")throw new Error("Invalid file format");const v=JSON.parse(te);if(v.gameState&&v.users&&Array.isArray(v.users))S(v);else throw new Error("File does not appear to be a valid full game state backup.")}catch(te){console.error("Failed to load game state:",te),alert(`Error loading file: ${te instanceof Error?te.message:"Unknown error"}`)}finally{K.target&&(K.target.value="")}},R.readAsText(A)},se=(p||[]).filter(K=>K.status==="pending"),ge=(T||[]).filter(K=>K.status==="pending"),he=C.filter(K=>K.isAI).length;return l.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-amber-400",children:"Admin Panel"}),l.jsx(fe,{onClick:c,children:"Back to Game"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[l.jsx(Ce,{title:"Turn Status",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-700 sticky top-0 bg-neutral-900",children:[l.jsx("th",{className:"p-2",children:"Tribe Name"}),l.jsx("th",{className:"p-2",children:"Player"}),l.jsx("th",{className:"p-2",children:"Status"})]})}),l.jsx("tbody",{children:C.map(K=>l.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[l.jsxs("td",{className:"p-2 font-semibold",children:[K.tribeName," ",K.isAI&&"(AI)"]}),l.jsx("td",{className:"p-2 text-slate-400",children:K.playerName}),l.jsx("td",{className:"p-2",children:K.turnSubmitted?l.jsx("span",{className:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-300 rounded-full",children:"Submitted"}):l.jsx("span",{className:"px-2 py-1 text-xs font-semibold text-yellow-800 bg-yellow-300 rounded-full",children:"Planning"})})]},K.id))})]})}),l.jsx("div",{className:"pt-4 border-t border-slate-700",children:l.jsx(fe,{onClick:f,className:"w-full bg-green-700 hover:bg-green-600",children:"Process All Turns"})})]})}),l.jsx(Ce,{title:"Pending Asset Approvals",children:l.jsx("div",{className:"overflow-x-auto max-h-96",children:ge.length>0?l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-700 sticky top-0 bg-neutral-900",children:[l.jsx("th",{className:"p-2",children:"Tribe"}),l.jsx("th",{className:"p-2",children:"Asset Name"}),l.jsx("th",{className:"p-2",children:"Radix Addr."}),l.jsx("th",{className:"p-2",children:"Actions"})]})}),l.jsx("tbody",{children:ge.map(K=>{const A=C.find(R=>R.id===K.tribeId);return l.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[l.jsx("td",{className:"p-2 font-semibold",children:A?.tribeName||"Unknown Tribe"}),l.jsx("td",{className:"p-2",children:K.assetName}),l.jsx("td",{className:"p-2 font-mono text-xs",children:K.radixAddressSnippet}),l.jsxs("td",{className:"p-2 space-x-2",children:[l.jsx(fe,{onClick:()=>w(K.id),className:"text-xs bg-green-700 hover:bg-green-600 px-2 py-1",children:"Approve"}),l.jsx(fe,{onClick:()=>q(K.id),className:"text-xs bg-red-800 hover:bg-red-700 px-2 py-1",children:"Deny"})]})]},K.id)})})]}):l.jsx("p",{className:"text-slate-400 text-center p-4",children:"No pending asset requests."})})}),l.jsx(Ce,{title:"Pending Chief Approvals",children:l.jsx("div",{className:"overflow-x-auto max-h-96",children:se.length>0?l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-700 sticky top-0 bg-neutral-900",children:[l.jsx("th",{className:"p-2",children:"Tribe"}),l.jsx("th",{className:"p-2",children:"Chief Name"}),l.jsx("th",{className:"p-2",children:"Radix Addr."}),l.jsx("th",{className:"p-2",children:"Actions"})]})}),l.jsx("tbody",{children:se.map(K=>{const A=C.find(R=>R.id===K.tribeId);return l.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[l.jsx("td",{className:"p-2 font-semibold",children:A?.tribeName||"Unknown Tribe"}),l.jsx("td",{className:"p-2",children:K.chiefName}),l.jsx("td",{className:"p-2 font-mono text-xs",children:K.radixAddressSnippet}),l.jsxs("td",{className:"p-2 space-x-2",children:[l.jsx(fe,{onClick:()=>b(K.id),className:"text-xs bg-green-700 hover:bg-green-600 px-2 py-1",children:"Approve"}),l.jsx(fe,{onClick:()=>g(K.id),className:"text-xs bg-red-800 hover:bg-red-700 px-2 py-1",children:"Deny"})]})]},K.id)})})]}):l.jsx("p",{className:"text-slate-400 text-center p-4",children:"No pending chief requests."})})}),l.jsx(Ce,{title:"Registered Users",children:l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-700 sticky top-0 bg-neutral-900",children:[l.jsx("th",{className:"p-2",children:"Username"}),l.jsx("th",{className:"p-2",children:"Role"}),l.jsx("th",{className:"p-2",children:"User ID"}),l.jsx("th",{className:"p-2",children:"Actions"})]})}),l.jsx("tbody",{children:z.map(K=>l.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[l.jsx("td",{className:"p-2 font-semibold",children:K.username}),l.jsx("td",{className:"p-2 text-slate-400 capitalize",children:K.role}),l.jsx("td",{className:"p-2 font-mono text-xs",children:K.id}),l.jsx("td",{className:"p-2",children:K.role==="player"&&K.id!==P.id&&l.jsx(fe,{onClick:()=>J(K),className:"bg-red-800 hover:bg-red-700 text-xs py-1 px-2",children:"Remove"})})]},K.id))})]})})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(Ce,{title:"World Management",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-400",children:"Edit the game world directly or start a new game on the current map."}),l.jsx(fe,{className:"w-full",onClick:o,children:"Edit World Map"}),l.jsx(fe,{className:"w-full bg-orange-700 hover:bg-orange-600",onClick:()=>U(!0),children:"Start New Game"})]})}),l.jsx(Ce,{title:"AI Management",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("p",{className:"text-sm text-slate-400",children:["Add or manage computer-controlled tribes. There are currently ",he," AI tribes in the game."]}),l.jsx(fe,{className:"w-full",onClick:_,children:"Add Wanderer AI Tribe"})]})}),l.jsx(Ce,{title:"Game Data Management",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-400",children:"Save the entire game state and all users to a file, or load a previous backup."}),l.jsx(fe,{className:"w-full",variant:"secondary",onClick:W,children:"Save Game Backup"}),l.jsx(fe,{className:"w-full",variant:"secondary",onClick:oe,children:"Load Game Backup"}),l.jsx("input",{type:"file",ref:le,onChange:de,className:"hidden",accept:".json"})]})}),l.jsx(Ce,{title:"All Tribes",children:C.length>0?l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-700 sticky top-0 bg-neutral-900",children:[l.jsx("th",{className:"p-2",children:"Tribe Name"}),l.jsx("th",{className:"p-2",children:"Location"}),l.jsx("th",{className:"p-2",children:"Troops"})]})}),l.jsx("tbody",{children:C.map(K=>l.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[l.jsxs("td",{className:"p-2 font-semibold",children:[K.tribeName," ",K.isAI&&"(AI)"]}),l.jsx("td",{className:"p-2 font-mono",children:K.location}),l.jsx("td",{className:"p-2",children:Object.values(K.garrisons).reduce((A,R)=>A+R.troops,0)})]},K.id))})]})}):l.jsx("p",{className:"text-slate-400 text-center p-4",children:"No tribes have been founded yet."})})]})]})]}),H&&l.jsx(Fa,{title:`Remove ${H.username}?`,message:"This will permanently delete the user and their associated tribe. This action cannot be undone.",onConfirm:B,onCancel:()=>J(null)}),ee&&l.jsx(Fa,{title:"Start a New Game?",message:"This will remove ALL current tribes and requests, and reset the turn to 1. The map will be preserved. Are you sure?",onConfirm:Z,onCancel:()=>U(!1)})]})},un=({brush:r,activeBrush:u,onSelect:c,children:o,title:f})=>{const m=u===r;return l.jsx("button",{title:f,onClick:()=>c(r),className:`w-full flex items-center p-2 rounded-md transition-colors duration-150
                ${m?"bg-amber-600 text-white ring-2 ring-amber-400":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,children:o})},tg=({activeBrush:r,onSelectBrush:u,brushSize:c,onBrushSizeChange:o})=>{const f=m=>{u(r===m?null:m)};return l.jsx(Ce,{title:"Brushes",className:"w-64 flex-shrink-0 flex flex-col",children:l.jsxs("div",{className:"overflow-y-auto space-y-3 pr-2",children:[l.jsx("p",{className:"text-xs text-slate-400",children:"Select a brush to paint on the map. Click again to disable."}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-bold text-amber-400 my-2",children:"Brush Size"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>o("single"),className:`flex-1 py-1 px-2 text-sm rounded-md ${c==="single"?"bg-amber-600 text-white":"bg-slate-700 hover:bg-slate-600"}`,children:"Single"}),l.jsx("button",{onClick:()=>o("cluster"),className:`flex-1 py-1 px-2 text-sm rounded-md ${c==="cluster"?"bg-amber-600 text-white":"bg-slate-700 hover:bg-slate-600"}`,children:"Cluster (7)"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-bold text-amber-400 my-2",children:"Tools"}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs(un,{brush:"set_start_location",activeBrush:r,onSelect:f,title:"Set Player Start Location",children:[l.jsx("div",{className:"w-6 h-6 mr-2 rounded-sm flex items-center justify-center font-bold text-lg bg-green-600",children:"🏳️"}),l.jsx("span",{className:"font-semibold",children:"Set Start Point"})]}),l.jsxs(un,{brush:"clear_terrain",activeBrush:r,onSelect:f,title:"Clear Terrain (Paint Water)",children:[l.jsx("div",{className:"w-6 h-6 mr-2 rounded-sm flex items-center justify-center font-bold text-lg bg-blue-500",children:"💧"}),l.jsx("span",{className:"font-semibold",children:"Clear Terrain"})]}),l.jsxs(un,{brush:"clear_poi",activeBrush:r,onSelect:f,title:"Clear POI",children:[l.jsx("div",{className:"w-6 h-6 mr-2 rounded-sm flex items-center justify-center font-bold text-lg bg-red-600",children:"⌫"}),l.jsx("span",{className:"font-semibold",children:"Clear POI"})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-bold text-amber-400 my-2",children:"Terrain"}),l.jsx("div",{className:"space-y-1",children:Object.values(ae).map(m=>l.jsxs(un,{brush:m,activeBrush:r,onSelect:f,title:m,children:[l.jsx("div",{className:"w-6 h-6 mr-2 rounded-sm",style:{background:`url(#texture-${m})`,backgroundSize:"cover"}}),l.jsx("span",{className:"font-semibold",children:m})]},m))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-bold text-amber-400 my-2",children:"Points of Interest"}),l.jsx("div",{className:"space-y-1",children:Object.values(F).map(m=>l.jsxs(un,{brush:m,activeBrush:r,onSelect:f,title:m,children:[l.jsx("div",{className:`w-6 h-6 mr-2 rounded-sm flex items-center justify-center font-bold text-sm ${la[m].bg.replace("fill-","bg-")} ${la[m].text}`,children:fn[m]}),l.jsx("span",{className:"font-semibold text-xs",children:m})]},m))})]})]})})};class sc{constructor(u){this.p=[];const c=u?this.seededRandom(u):Math.random,o=[];for(let f=0;f<256;f++)o.push(f);for(let f=o.length-1;f>0;f--){const m=Math.floor(c()*(f+1));[o[f],o[m]]=[o[m],o[f]]}this.p=o.concat(o)}seededRandom(u){let c=u;return()=>(c=Math.sin(c)*1e4,c-Math.floor(c))}fade(u){return u*u*u*(u*(u*6-15)+10)}lerp(u,c,o){return c+u*(o-c)}grad(u,c,o){const f=u&15,m=f<8?c:o,x=f<4?o:f===12||f===14?c:0;return((f&1)===0?m:-m)+((f&2)===0?x:-x)}noise(u,c){const o=Math.floor(u)&255,f=Math.floor(c)&255;u-=Math.floor(u),c-=Math.floor(c);const m=this.fade(u),x=this.fade(c),S=this.p,b=S[o]+f,g=S[o+1]+f;return this.lerp(x,this.lerp(m,this.grad(S[b],u,c),this.grad(S[g],u-1,c)),this.lerp(m,this.grad(S[b+1],u,c-1),this.grad(S[g+1],u-1,c-1)))}}const wh=.05,ag=.04,sg=30,Sh={[ae.Mountains]:{elevation:{range:.8,falloff:5}},[ae.Plains]:{elevation:{range:.4,falloff:4},moisture:{range:.5,falloff:3}},[ae.Forest]:{elevation:{range:.5,falloff:5},moisture:{range:.7,falloff:4}},[ae.Swamp]:{elevation:{range:.3,falloff:8},moisture:{range:.85,falloff:4}},[ae.Desert]:{elevation:{range:.4,falloff:4},moisture:{range:.15,falloff:5}},[ae.Wasteland]:{elevation:{range:.6,falloff:3},moisture:{range:.3,falloff:4}},[ae.Ruins]:{elevation:{range:.5,falloff:2},special:{range:.85,falloff:8}},[ae.Crater]:{elevation:{range:.7,falloff:6},special:{range:.5,falloff:10}},[ae.Radiation]:{elevation:{range:.5,falloff:3},special:{range:.1,falloff:8}}},lg={[ae.Ruins]:[F.Ruins,F.Scrapyard,F.WeaponsCache,F.Factory],[ae.Mountains]:[F.Mine,F.Outpost,F.Vault,F.ResearchLab],[ae.Plains]:[F.Settlement,F.FoodSource,F.Battlefield],[ae.Forest]:[F.FoodSource,F.BanditCamp,F.Outpost],[ae.Wasteland]:[F.Scrapyard,F.BanditCamp,F.Factory,F.Crater],[ae.Desert]:[F.ResearchLab,F.Scrapyard,F.Mine],[ae.Swamp]:[F.FoodSource,F.BanditCamp],[ae.Crater]:[F.Scrapyard,F.WeaponsCache,F.Radiation],[ae.Radiation]:[F.Scrapyard,F.ResearchLab,F.WeaponsCache,F.Radiation]};function ng(r,u,c,o){let f=-1,m=ae.Wasteland;for(const x in Sh){const S=x,b=Sh[S];if(!b)continue;let g=1;g*=Math.max(0,1-Math.pow(Math.abs(r-b.elevation.range),b.elevation.falloff)),b.moisture&&(g*=Math.max(0,1-Math.pow(Math.abs(u-b.moisture.range),b.moisture.falloff))),b.special&&(g*=Math.max(0,1-Math.pow(Math.abs(c-b.special.range),b.special.falloff))),g*=o[S]??1,g>f&&(f=g,m=S)}return m}function ig(r,u,c){if(r===ae.Water||Math.random()>ag)return;const o=lg[r];if(!o||o.length===0)return;const f=o[Math.floor(Math.random()*o.length)],m=Oi[f]||"Common";return{id:`poi-${u}-${c}`,type:f,difficulty:Math.ceil(Math.random()*10),rarity:m}}const rg=(r,u)=>`${String(50+r).padStart(3,"0")}.${String(50+u).padStart(3,"0")}`;function uc(r,u,c){const o=[],f=new sc(u),m=new sc(u*2),x=new sc(u*3);for(let w=-r;w<=r;w++)for(let q=-r;q<=r;q++)if(w+q>-r-1&&w+q<r+1){const _=w*wh,C=q*wh,p=(f.noise(_,C)+1)/2,T=(m.noise(_,C)+1)/2,z=(x.noise(_*2,C*2)+1)/2,P=w/r,H=q/r,J=Math.sqrt(P*P+H*H),ee=p-J*.8;let U;ee<.2?U=ae.Water:U=ng(p,T,z,c.biases);const le=ig(U,w,q);o.push({q:w,r:q,terrain:U,poi:le})}const S=[ae.Plains,ae.Forest,ae.Wasteland],b=o.filter(w=>S.includes(w.terrain)&&!w.poi);for(let w=b.length-1;w>0;w--){const q=Math.floor(Math.random()*(w+1));[b[w],b[q]]=[b[q],b[w]]}const g=b.slice(0,sg).map(w=>rg(w.q,w.r));return{map:o,startingLocations:g}}const og=40,lc=30,cg=(r,u)=>`${String(50+r).padStart(3,"0")}.${String(50+u).padStart(3,"0")}`,ug=(r,u)=>[{q:1,r:0},{q:-1,r:0},{q:0,r:1},{q:0,r:-1},{q:1,r:-1},{q:-1,r:1}].map(o=>({q:r+o.q,r:u+o.r})),dg=r=>{const{initialMapData:u,initialMapSettings:c,initialStartLocations:o,onSave:f,onCancel:m}=r,[x,S]=$.useState(()=>JSON.parse(JSON.stringify(u))),[b,g]=$.useState(o),[w,q]=$.useState(null),[_,C]=$.useState(!1),[p,T]=$.useState("single"),[z,P]=$.useState(c),[H,J]=$.useState(!1),[ee,U]=$.useState(!1),le=$.useRef(null),[B,Z]=$.useState(null),W=$.useMemo(()=>{const O=new Map;return x.forEach(Q=>O.set(`${Q.q},${Q.r}`,Q)),O},[x]),oe=$.useCallback((O,Q)=>{if(!w)return;const I=p==="cluster"&&w!=="set_start_location"?[{q:O,r:Q},...ug(O,Q)]:[{q:O,r:Q}],ne=new Map(W.entries());let ve=!1;if(I.forEach(G=>{const xe=`${G.q},${G.r}`,ce=ne.get(xe);if(!ce||ce.terrain===ae.Water&&!Object.values(ae).includes(w))return;const ye={...ce};let je=!1;if(Object.values(ae).includes(w))ye.terrain!==w&&(ye.terrain=w,je=!0);else if(Object.values(F).includes(w)){const ke=w;ye.poi?.type!==ke&&(ye.poi={id:`poi-${G.q}-${G.r}`,type:ke,difficulty:5,rarity:Oi[ke]||"Common"},je=!0)}else w==="clear_poi"?ye.poi&&(ye.poi=void 0,je=!0):w==="clear_terrain"&&ye.terrain!==ae.Water&&(ye.terrain=ae.Water,je=!0);je&&(ne.set(xe,ye),ve=!0)}),ve&&S(Array.from(ne.values())),w==="set_start_location"){const G=cg(O,Q);b.indexOf(G)>-1?g(ce=>ce.filter(ye=>ye!==G)):b.length<lc?g(ce=>[...ce,G]):alert(`Cannot add more than ${lc} starting locations.`)}},[w,W,b,p]),de=(O,Q)=>{C(!0),oe(O,Q)},se=$.useCallback((O,Q)=>{_&&oe(O,Q)},[_,oe]),ge=()=>{C(!1)},he=()=>{if(!z)return;const{map:O,startingLocations:Q}=uc(og,Date.now(),z);S(O),g(Q),J(!1)},K=(O,Q)=>{P(I=>I&&{...I,biases:{...I.biases,[O]:Q}})},A=()=>{g([]),U(!1)},R=()=>{const Q=JSON.stringify({mapData:x,startingLocations:b},null,2),I=new Blob([Q],{type:"application/json"}),ne=URL.createObjectURL(I),ve=document.createElement("a"),G=new Date().toISOString().split("T")[0];ve.href=ne,ve.download=`radix-map-${G}.json`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),URL.revokeObjectURL(ne)},V=()=>{le.current?.click()},te=O=>{const Q=O.target.files?.[0];if(!Q)return;const I=new FileReader;I.onload=ne=>{const ve=ne.target?.result;ve&&Z(ve)},I.readAsText(Q),O.target.value=""},v=()=>{if(B)try{const O=JSON.parse(B);if(!O.mapData||!Array.isArray(O.mapData)||!O.startingLocations||!Array.isArray(O.startingLocations))throw new Error("Invalid map file structure. Missing mapData or startingLocations.");const Q=O.mapData[0];if(Q&&(typeof Q.q!="number"||typeof Q.r!="number"||typeof Q.terrain!="string"))throw new Error("Invalid mapData format in file.");S(O.mapData),g(O.startingLocations),alert("Map loaded successfully!")}catch(O){console.error("Failed to load map file:",O),alert(`Error loading file: ${O instanceof Error?O.message:"Unknown error"}`)}finally{Z(null)}};return l.jsxs("div",{className:"h-screen w-screen bg-slate-900 flex flex-col p-4 gap-4",children:[l.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center bg-slate-800 p-3 rounded-lg border-b-2 border-amber-600",children:[l.jsx("h1",{className:"text-xl font-bold text-amber-400",children:"Map Editor"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(fe,{variant:"secondary",onClick:m,children:"Cancel"}),l.jsx(fe,{onClick:()=>f(x,b),children:"Save Changes"})]})]}),l.jsxs("main",{className:"flex-grow flex gap-4 overflow-hidden",children:[l.jsx(tg,{activeBrush:w,onSelectBrush:q,brushSize:p,onBrushSizeChange:T}),l.jsx("div",{className:"flex-grow h-full",children:l.jsx(Di,{mapData:x,playerTribe:void 0,allTribes:[],journeys:[],startingLocations:b,selectionMode:!1,onHexSelect:()=>{},paintMode:w!==null,onHexPaintStart:de,onHexPaint:se,onHexPaintEnd:ge})}),l.jsxs("div",{className:"w-80 flex-shrink-0 flex flex-col gap-4",children:[l.jsxs(Ce,{title:"Start Locations",className:"flex-shrink-0",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("p",{className:"text-sm text-slate-400",children:[b.length," / ",lc," placed"]}),l.jsx(fe,{className:"text-xs bg-red-800 hover:bg-red-700 py-1 px-2",onClick:()=>U(!0),disabled:b.length===0,children:"Clear All"})]}),l.jsx("ol",{className:"list-decimal list-inside text-mono text-sm space-y-1 max-h-40 overflow-y-auto",children:b.map(O=>l.jsx("li",{className:"text-slate-300 bg-slate-800 px-2 py-1 rounded",children:O},O))})]}),l.jsx(Ce,{title:"Map File Management",className:"flex-shrink-0",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-400",children:"Save the current map layout to a file, or load a previously saved map."}),l.jsx(fe,{className:"w-full",variant:"secondary",onClick:R,children:"Save Map File"}),l.jsx(fe,{className:"w-full",variant:"secondary",onClick:V,children:"Load Map File"}),l.jsx("input",{type:"file",ref:le,onChange:te,className:"hidden",accept:".json"})]})}),z&&l.jsxs(Ce,{title:"Generation Settings",className:"h-full flex flex-col flex-grow",children:[l.jsx("p",{className:"text-sm text-slate-400 mb-4 flex-shrink-0",children:"Generate a new base map using these procedural settings."}),l.jsx("div",{className:"space-y-3 overflow-y-auto pr-2 flex-grow",children:Object.entries(z.biases).sort(([O],[Q])=>O.localeCompare(Q)).map(([O,Q])=>l.jsxs("div",{children:[l.jsxs("label",{className:"flex justify-between items-center text-slate-300 font-medium text-sm",children:[l.jsx("span",{className:"capitalize",children:O}),l.jsx("span",{className:"text-amber-400 font-mono",children:Number(Q).toFixed(2)})]}),l.jsx("input",{type:"range",min:"0",max:"5",step:"0.1",value:Q,onChange:I=>K(O,parseFloat(I.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-amber-500",disabled:O==="Water"})]},O))}),l.jsx("div",{className:"mt-4 pt-4 border-t border-slate-700 flex-shrink-0",children:l.jsx(fe,{className:"w-full bg-red-800 hover:bg-red-700",onClick:()=>J(!0),children:"Generate New Map"})})]})]})]}),H&&l.jsx(Fa,{title:"Generate New Map?",message:"This will overwrite all your manual edits and clear all starting locations. This cannot be undone.",onConfirm:he,onCancel:()=>J(!1)}),ee&&l.jsx(Fa,{title:"Clear All Start Locations?",message:"This will remove all placed starting points from the map. Are you sure?",onConfirm:A,onCancel:()=>U(!1)}),B&&l.jsx(Fa,{title:"Load Map File?",message:"This will overwrite all current unsaved edits on the map. Are you sure you want to proceed?",onConfirm:v,onCancel:()=>Z(null)})]})},fg=({onSuccess:r,onCancel:u})=>{const[c,o]=$.useState("enter_username"),[f,m]=$.useState(""),[x,S]=$.useState(""),[b,g]=$.useState(""),[w,q]=$.useState(""),[_,C]=$.useState(""),[p,T]=$.useState(""),[z,P]=$.useState(""),H=le=>{le.preventDefault(),T("");const B=Z0(f);B?(S(B),o("answer_question")):T("Username not found.")},J=le=>{le.preventDefault(),T(""),$0(f,b)?o("reset_password"):T("Incorrect answer.")},ee=le=>{if(le.preventDefault(),T(""),w!==_){T("Passwords do not match.");return}if(w.length<6){T("Password must be at least 6 characters long.");return}F0(f,w)?(P("Password reset successfully! You can now log in."),setTimeout(r,3e3)):T("An unexpected error occurred. Please try again.")},U=()=>{if(z)return l.jsx("p",{className:"text-green-400 text-center",children:z});switch(c){case"enter_username":return l.jsxs("form",{onSubmit:H,className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-center text-amber-400",children:"Find Your Account"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username-forgot",className:"block text-sm font-medium text-slate-300 mb-1",children:"Username"}),l.jsx("input",{type:"text",id:"username-forgot",value:f,onChange:le=>m(le.target.value),required:!0,className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200"})]}),l.jsx(fe,{type:"submit",className:"w-full",children:"Find Account"})]});case"answer_question":return l.jsxs("form",{onSubmit:J,className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-center text-amber-400",children:"Security Question"}),l.jsxs("p",{className:"text-slate-400 text-sm",children:["For user: ",l.jsx("span",{className:"font-bold",children:f})]}),l.jsxs("div",{children:[l.jsx("p",{className:"block text-sm font-medium text-slate-300 mb-1",children:x}),l.jsx("input",{type:"password",value:b,onChange:le=>g(le.target.value),required:!0,className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200"})]}),l.jsx(fe,{type:"submit",className:"w-full",children:"Verify"})]});case"reset_password":return l.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-center text-amber-400",children:"Reset Your Password"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"New Password"}),l.jsx("input",{type:"password",value:w,onChange:le=>q(le.target.value),required:!0,className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Confirm New Password"}),l.jsx("input",{type:"password",value:_,onChange:le=>C(le.target.value),required:!0,className:"w-full bg-slate-700 border border-slate-600 rounded-md p-2 text-slate-200"})]}),l.jsx(fe,{type:"submit",className:"w-full",children:"Reset Password"})]})}};return l.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-900",children:l.jsx(Ce,{title:"Password Recovery",className:"max-w-sm w-full",children:l.jsxs("div",{className:"space-y-4",children:[U(),p&&l.jsx("p",{className:"text-red-500 text-sm text-center",children:p}),!z&&l.jsxs("p",{className:"text-sm text-center text-slate-400 pt-4 border-t border-slate-700",children:["Remember your password?"," ",l.jsx("button",{type:"button",onClick:u,className:"font-medium text-amber-500 hover:text-amber-400",children:"Back to Login"})]})]})})})},Hh=r=>{const u=Object.values(r.garrisons).reduce((w,q)=>w+q.troops,0),c=Object.values(r.garrisons).reduce((w,q)=>w+q.weapons,0),o=Object.values(r.garrisons).reduce((w,q)=>w+(q.chiefs?.length||0),0),f=u*1+c*2,m=r.globalResources.food*.2+r.globalResources.scrap*.5,x=Object.keys(r.garrisons).length*25,S=r.completedTechs.length*50,b=o*40,g=r.globalResources.morale;return Math.round(f+m+x+S+b+g)},Nh=["#4299E1","#F56565","#48BB78","#ED8936","#9F7AEA","#ECC94B","#38B2AC","#ED64A6","#A0AEC0","#667EEA","#F687B3","#D69E2E","#319795","#6B46C1","#C53030","#059669"],hg=({history:r,tribes:u})=>{const[c,o]=$.useState(null),f=$.useMemo(()=>{const p=new Map;return u.forEach((T,z)=>{p.set(T.id,Nh[z%Nh.length])}),p},[u]),{chartData:m,maxScore:x,turnDomain:S}=$.useMemo(()=>{if(r.length<1)return{chartData:[],maxScore:0,turnDomain:[1,1]};const p={};let T=0;r.forEach(H=>{H.tribeRecords.forEach(J=>{p[J.tribeId]||(p[J.tribeId]=[]),p[J.tribeId].push({turn:H.turn,score:J.score}),J.score>T&&(T=J.score)})});const z=r[0]?.turn||1,P=r[r.length-1]?.turn||1;return{chartData:Object.entries(p),maxScore:T>0?T*1.1:100,turnDomain:[z,P]}},[r]);if(r.length<2)return l.jsx(Ce,{title:"Tribe Growth (by Score)",children:l.jsx("div",{className:"h-96 flex items-center justify-center",children:l.jsx("p",{className:"text-slate-400 italic",children:"Not enough turn data to display growth chart. Check back after the next turn is processed."})})});const b={top:20,right:20,bottom:40,left:60},g=800,w=400,q=p=>S[1]-S[0]===0?b.left:b.left+(p-S[0])/(S[1]-S[0])*(g-b.left-b.right),_=p=>w-b.bottom-p/x*(w-b.top-b.bottom),C=$.useMemo(()=>{const p=[];for(let z=0;z<=5;z++)p.push(Math.round(x/5*z));return p},[x]);return l.jsx(Ce,{title:"Tribe Growth (by Score)",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[l.jsx("div",{className:"flex-grow relative h-96",children:l.jsxs("svg",{width:"100%",height:"100%",viewBox:`0 0 ${g} ${w}`,children:[l.jsxs("g",{className:"text-xs text-slate-400",children:[C.map(p=>l.jsxs("g",{transform:`translate(0, ${_(p)})`,children:[l.jsx("line",{x1:b.left,x2:g-b.right,stroke:"#475569",strokeWidth:"0.5",strokeDasharray:"2,3"}),l.jsx("text",{x:b.left-8,y:"3",textAnchor:"end",fill:"currentColor",children:p})]},`y-tick-${p}`)),l.jsx("text",{transform:`translate(${b.left/3}, ${w/2}) rotate(-90)`,textAnchor:"middle",fill:"currentColor",className:"font-semibold",children:"Score"})]}),l.jsxs("g",{className:"text-xs text-slate-400",children:[r.map(({turn:p})=>l.jsxs("g",{transform:`translate(${q(p)}, 0)`,children:[l.jsx("line",{y1:b.top,y2:w-b.bottom,stroke:"#475569",strokeWidth:"0.5",strokeDasharray:"2,3"}),l.jsx("text",{x:"0",y:w-b.bottom+15,textAnchor:"middle",fill:"currentColor",children:`T${p}`})]},`x-tick-${p}`)),l.jsx("text",{x:g/2,y:w-5,textAnchor:"middle",fill:"currentColor",className:"font-semibold",children:"Turn"})]}),l.jsx("g",{children:m.map(([p,T])=>{if(T.length<2)return null;const z=T.map((H,J)=>`${J===0?"M":"L"}${q(H.turn)},${_(H.score)}`).join(" "),P=c===p;return l.jsx("path",{d:z,fill:"none",stroke:f.get(p)||"#A0AEC0",strokeWidth:P?4:2,className:"transition-all duration-200",opacity:c===null||P?1:.3},p)})})]})}),l.jsxs("aside",{className:"lg:w-56 flex-shrink-0",children:[l.jsx("h4",{className:"font-bold text-slate-300 mb-2",children:"Tribes"}),l.jsx("ul",{className:"space-y-1 max-h-96 overflow-y-auto",children:u.map(p=>l.jsxs("li",{onMouseEnter:()=>o(p.id),onMouseLeave:()=>o(null),className:"flex items-center space-x-2 p-1.5 rounded-md cursor-pointer hover:bg-slate-700/50",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.get(p.id)}}),l.jsx("span",{className:"text-sm text-slate-300",children:p.tribeName})]},p.id))})]})]})})},mg=r=>{const u=r?.status||De.Neutral,c={[De.Alliance]:"bg-blue-600 text-blue-100",[De.Neutral]:"bg-slate-500 text-slate-100",[De.War]:"bg-red-700 text-red-100"};return l.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${c[u]}`,children:u})},pg=({gameState:r,playerTribe:u,onBack:c})=>{const o=$.useMemo(()=>r.tribes.map(m=>{const x=Object.values(m.garrisons).reduce((S,b)=>S+b.troops,0);return{...m,score:Hh(m),totalTroops:x}}).sort((m,x)=>x.score-m.score),[r.tribes]),f=$.useMemo(()=>{const m=new Map;return o.forEach(x=>{Object.keys(x.garrisons).forEach(S=>{m.set(S,{color:x.color,tribeName:x.tribeName})})}),m},[o]);return l.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-amber-400",children:"Wasteland Leaderboard"}),l.jsx(fe,{onClick:c,children:"Back to Game"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[l.jsx("div",{className:"xl:col-span-2",children:l.jsx(Ce,{children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"border-b-2 border-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 text-sm font-semibold text-slate-400 tracking-wider",children:"Rank"}),l.jsx("th",{className:"p-3 text-sm font-semibold text-slate-400 tracking-wider",children:"Tribe"}),l.jsx("th",{className:"p-3 text-sm font-semibold text-slate-400 tracking-wider",children:"Player"}),l.jsx("th",{className:"p-3 text-sm font-semibold text-slate-400 tracking-wider text-right",children:"Score"}),l.jsx("th",{className:"p-3 text-sm font-semibold text-slate-400 tracking-wider text-right",children:"Troops"}),l.jsx("th",{className:"p-3 text-sm font-semibold text-slate-400 tracking-wider text-right",children:"Garrisons"}),u&&l.jsx("th",{className:"p-3 text-sm font-semibold text-slate-400 tracking-wider text-center",children:"Diplomacy"})]})}),l.jsx("tbody",{children:o.map((m,x)=>{const S=u&&m.id===u.id,b=u?u.diplomacy[m.id]:void 0;return l.jsxs("tr",{className:`border-b border-slate-800 ${S?"bg-amber-900/20":"hover:bg-slate-800/50"}`,children:[l.jsxs("td",{className:"p-3 text-lg font-bold text-slate-300",children:["#",x+1]}),l.jsx("td",{className:"p-3",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:m.color},children:l.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current text-white",children:sa[m.icon]})}),l.jsx("span",{className:"font-semibold text-white",children:m.tribeName})]})}),l.jsx("td",{className:"p-3 text-slate-400",children:m.playerName}),l.jsx("td",{className:"p-3 text-lg font-bold text-amber-400 text-right",children:m.score}),l.jsx("td",{className:"p-3 text-white font-mono text-right",children:m.totalTroops}),l.jsx("td",{className:"p-3 text-white font-mono text-center",children:Object.keys(m.garrisons).length}),u&&l.jsx("td",{className:"p-3 text-center",children:m.id===u.id?l.jsx("span",{className:"text-xs italic text-slate-500",children:"You"}):mg(b)})]},m.id)})})]})})})}),l.jsx("div",{className:"xl:col-span-1 h-96 xl:h-auto",children:l.jsx(Di,{mapData:r.mapData,territoryData:f,playerTribe:void 0,allTribes:[],journeys:[],startingLocations:[],selectionMode:!1,onHexSelect:()=>{}})}),l.jsx("div",{className:"xl:col-span-3",children:l.jsx(hg,{history:r.history||[],tribes:o})})]})]})})},Th=({message:r})=>l.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-900 text-white",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("svg",{className:"mx-auto h-16 w-16 text-amber-500 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("h2",{className:"mt-6 text-2xl font-bold tracking-tight text-amber-400",children:r}),l.jsx("p",{className:"mt-2 text-slate-400",children:"Please wait while the wasteland evolves..."})]})}),Lh=2;function gg(r){const u={passiveFood:0,passiveScrap:0,scavengeBonuses:{Food:0,Scrap:0,Weapons:0},globalCombatAttackBonus:0,globalCombatDefenseBonus:0,movementSpeedBonus:1,terrainCombatBonuses:{attack:{},defense:{}}};if(!r.completedTechs)return u;for(const c of r.completedTechs){const o=hs(c);if(o)for(const f of o.effects)switch(f.type){case pe.PassiveFoodGeneration:u.passiveFood+=f.value;break;case pe.PassiveScrapGeneration:u.passiveScrap+=f.value;break;case pe.ScavengeYieldBonus:f.resource&&(u.scavengeBonuses[f.resource]+=f.value);break;case pe.CombatBonusAttack:f.terrain?u.terrainCombatBonuses.attack[f.terrain]=(u.terrainCombatBonuses.attack[f.terrain]||0)+f.value:u.globalCombatAttackBonus+=f.value;break;case pe.CombatBonusDefense:f.terrain?u.terrainCombatBonuses.defense[f.terrain]=(u.terrainCombatBonuses.defense[f.terrain]||0)+f.value:u.globalCombatDefenseBonus+=f.value;break;case pe.MovementSpeedBonus:u.movementSpeedBonus+=f.value;break}}return u}function bg(r){const u={passiveFood:0,passiveScrap:0,scavengeBonuses:{Food:0,Scrap:0,Weapons:0},globalCombatAttackBonus:0,globalCombatDefenseBonus:0,movementSpeedBonus:1,terrainCombatBonuses:{attack:{},defense:{}}};if(!r.assets)return u;for(const c of r.assets){const o=zh(c);if(o)for(const f of o.effects)switch(f.type){case pe.PassiveFoodGeneration:u.passiveFood+=f.value;break;case pe.PassiveScrapGeneration:u.passiveScrap+=f.value;break;case pe.ScavengeYieldBonus:f.resource&&(u.scavengeBonuses[f.resource]+=f.value);break;case pe.CombatBonusAttack:f.terrain?u.terrainCombatBonuses.attack[f.terrain]=(u.terrainCombatBonuses.attack[f.terrain]||0)+f.value:u.globalCombatAttackBonus+=f.value;break;case pe.CombatBonusDefense:f.terrain?u.terrainCombatBonuses.defense[f.terrain]=(u.terrainCombatBonuses.defense[f.terrain]||0)+f.value:u.globalCombatDefenseBonus+=f.value;break;case pe.MovementSpeedBonus:u.movementSpeedBonus+=f.value;break}}return u}function nl(r){const u=gg(r),c=bg(r),o={passiveFood:u.passiveFood+c.passiveFood,passiveScrap:u.passiveScrap+c.passiveScrap,scavengeBonuses:{Food:u.scavengeBonuses.Food+c.scavengeBonuses.Food,Scrap:u.scavengeBonuses.Scrap+c.scavengeBonuses.Scrap,Weapons:u.scavengeBonuses.Weapons+c.scavengeBonuses.Weapons},globalCombatAttackBonus:u.globalCombatAttackBonus+c.globalCombatAttackBonus,globalCombatDefenseBonus:u.globalCombatDefenseBonus+c.globalCombatDefenseBonus,movementSpeedBonus:u.movementSpeedBonus+c.movementSpeedBonus-1,terrainCombatBonuses:{attack:{},defense:{}}},f=Object.values(ae);for(const m of f){const x=u.terrainCombatBonuses.attack[m]||0,S=c.terrainCombatBonuses.attack[m]||0;x+S!==0&&(o.terrainCombatBonuses.attack[m]=x+S);const b=u.terrainCombatBonuses.defense[m]||0,g=c.terrainCombatBonuses.defense[m]||0;b+g!==0&&(o.terrainCombatBonuses.defense[m]=b+g)}return o}function xg(r){if(Math.random()>.2||r.troops===0)return{newForce:r,eventResult:null};const o=[{weight:5,run:x=>{if(x.troops<5)return null;const S=Math.max(1,Math.floor(x.troops*(Math.random()*.1+.05)));return{newForce:{...x,troops:Math.max(0,x.troops-S)},eventResult:`The group was ambushed by bandits! They fought them off but lost ${S} troops.`}}},{weight:3,run:x=>x.troops<2?null:{newForce:{...x,troops:x.troops-1},eventResult:"A scout was bitten by a rabid dog and had to be dispatched to prevent disease."}},{weight:4,run:x=>{if(x.weapons<1)return null;const S=Math.max(1,Math.floor(x.weapons*.2));return S===0?null:{newForce:{...x,weapons:Math.max(0,x.weapons-S)},eventResult:`A supply cart overturned, losing ${S} weapons in a ravine.`}}},{weight:2,run:x=>({newForce:{...x,troops:x.troops+1},eventResult:"The party found a lone survivor. Grateful for the rescue, they've joined your ranks."})}].filter(x=>x.run(r)!==null);if(o.length===0)return{newForce:r,eventResult:null};const f=o.reduce((x,S)=>x+S.weight,0);let m=Math.random()*f;for(const x of o){if(m<x.weight)return x.run(r);m-=x.weight}return{newForce:r,eventResult:null}}function jh(r,u,c){let o=JSON.parse(JSON.stringify(u));const f=25;if(o.globalResources.scrap<f){c.push({id:`arrival-fail-${r.id}`,actionType:ie.BuildOutpost,actionData:{},result:`Failed to build outpost at ${r.destination}: Not enough scrap. Builders returning home.`});const g=o.garrisons[r.origin];return g&&(g.troops+=r.force.troops,g.weapons+=r.force.weapons,g.chiefs||(g.chiefs=[]),g.chiefs.push(...r.force.chiefs)),{updatedTribe:o}}o.globalResources.scrap-=f,o.garrisons[r.destination]=r.force,c.push({id:`arrival-${r.id}`,actionType:ie.BuildOutpost,actionData:{},result:`Successfully established a new outpost at ${r.destination}.`});const{q:m,r:x}=Ye(r.destination),S=ms({q:m,r:x},Lh),b=new Set([...o.exploredHexes,...S]);return o.exploredHexes=Array.from(b),{updatedTribe:o,outpostCreatedLocation:r.destination}}function Ah(r,u,c,o){let f=JSON.parse(JSON.stringify(u));const m=1,{q:x,r:S}=Ye(r.destination),b=ms({q:x,r:S},m),g=f.exploredHexes.length,w=new Set([...f.exploredHexes,...b]);w.size>g?o.push({id:`arrival-${r.id}`,actionType:ie.Scout,actionData:{},result:`Scouts surveyed ${r.destination}, revealing the surrounding area.`}):o.push({id:`arrival-${r.id}`,actionType:ie.Scout,actionData:{},result:`Scouts surveyed ${r.destination}, but found no new territory.`}),f.exploredHexes=Array.from(w);const q=$a(Ye(r.destination),Ye(r.origin),c.mapData);if(!q)return o.push({id:`return-err-${r.id}`,actionType:ie.Scout,actionData:{},result:"The scouting party is stranded and cannot find a path home!"}),{updatedTribe:f};const _=nl(u),C={...r,id:`return-${r.id}`,type:tt.Return,status:"returning",origin:r.destination,destination:r.origin,path:q.path,currentLocation:q.path[0],arrivalTurn:Math.ceil(q.cost/_.movementSpeedBonus),payload:{food:0,scrap:0,weapons:0},force:r.force};return{updatedTribe:f,newReturnJourney:C}}function nc(r,u,c){let o=JSON.parse(JSON.stringify(u));o.garrisons[r.destination]||(o.garrisons[r.destination]={troops:0,weapons:0,chiefs:[]});const f=o.garrisons[r.destination];f.troops+=r.force.troops,f.weapons+=r.force.weapons,f.chiefs||(f.chiefs=[]),f.chiefs.push(...r.force.chiefs),c.push({id:`arrival-${r.id}`,actionType:ie.Move,actionData:{},result:`A force of ${r.force.troops} troops and ${r.force.chiefs.length} chiefs has arrived at garrison ${r.destination}, bolstering your presence in the area.`});const{q:m,r:x}=Ye(r.destination),S=ms({q:m,r:x},Lh),b=new Set([...o.exploredHexes,...S]);return o.exploredHexes=Array.from(b),o}function Rh(r,u,c,o){let f=JSON.parse(JSON.stringify(u));const m=r.scavengeType,{troops:x,chiefs:S}=r.force;let b,g;const w=c.mapData.find(Z=>ht(Z.q,Z.r)===r.destination);if(!w)return o.push({id:`scavenge-err-${r.id}`,actionType:ie.Scavenge,actionData:{},result:`Scavenge failed: Target location ${r.destination} invalid.`}),{updatedTribe:f};const q=w.poi,_=w.terrain;let C="",p=x;if(_===ae.Radiation){const Z=Math.ceil(x*.1);p-=Z,C+=`Hazardous environment caused ${Z} casualties. `}if(q?.type===F.BanditCamp){const Z=Math.ceil(x*.25);p-=Z,C+=`Encountered fierce resistance at the Bandit Camp! Lost ${Z} troops. `}if(p<=0)return o.push({id:`scavenge-fail-${r.id}`,actionType:ie.Scavenge,actionData:{},result:C+"The scavenging party was wiped out."}),{updatedTribe:f};const T=nl(u),z=1+(T.scavengeBonuses[m]||0);let P=0,H="",J=1,ee={food:0,scrap:0,weapons:0};if(q?.type===F.Vault){const Z=Math.floor(100+Math.random()*100),W=Math.floor(20+Math.random()*20);if(ee.scrap+=Z,ee.weapons+=W,H=`The party breached the ancient Vault, uncovering a massive cache of ${Z} scrap and ${W} weapons! `,Math.random()<.25){const de=Object.values(cc).flat().filter(se=>se.prerequisites.length===0).filter(se=>!u.completedTechs.includes(se.id));if(de.length>0){const se=de[Math.floor(Math.random()*de.length)];f.completedTechs.push(se.id),H+=`Inside, they found data slates containing the secrets of "${se.name}"!`}}g={location:r.destination,newPoi:{id:q.id,type:F.Ruins,difficulty:3,rarity:"Common"}}}else m==="Food"?(P=1.5*p,J=_===ae.Forest||_===ae.Swamp?1.5:.5,q?.type===F.FoodSource&&(J=3),ee.food=Math.floor(P*J*z)):m==="Scrap"?(P=1*p,J=q?.type===F.Scrapyard||q?.type===F.Factory||q?.type===F.Crater||q?.type===F.Ruins?3.5:1.2,ee.scrap=Math.floor(P*J*z)):m==="Weapons"&&(P=Math.random()*(p/5),J=q?.type===F.Battlefield?4:1,q?.type===F.WeaponsCache&&(J=3),ee.weapons=Math.floor(P*J*z));const U=ee.food+ee.scrap+ee.weapons;H||(H=U>0?"The party gathered their findings.":"Found nothing of value."),o.push({id:`scavenge-${r.id}`,actionType:ie.Scavenge,actionData:{},result:C+H});const le=$a(Ye(r.destination),Ye(r.origin),c.mapData);if(!le)return o.push({id:`return-err-${r.id}`,actionType:ie.Scavenge,actionData:{},result:"The scavenging party is stranded and cannot find a path home!"}),{updatedTribe:f,poiToClear:b,poiToReplace:g};const B={...r,id:`return-${r.id}`,type:tt.Return,status:"returning",origin:r.destination,destination:r.origin,path:le.path,currentLocation:le.path[0],arrivalTurn:Math.ceil(le.cost/T.movementSpeedBonus),payload:ee,force:{...r.force,troops:p}};return{updatedTribe:f,newReturnJourney:B,poiToClear:b,poiToReplace:g}}function ic(r,u,c){let o=JSON.parse(JSON.stringify(u));o.garrisons[r.destination]||(o.garrisons[r.destination]={troops:0,weapons:0,chiefs:[]});const f=o.garrisons[r.destination];f.troops+=r.force.troops,f.weapons+=r.force.weapons,f.chiefs||(f.chiefs=[]),f.chiefs.push(...r.force.chiefs),o.globalResources.food+=r.payload.food,o.globalResources.scrap+=r.payload.scrap,f.weapons+=r.payload.weapons;const m=Object.entries(r.payload).filter(([,S])=>S>0).map(([S,b])=>`${b} ${S}`).join(", "),x=m?`successfully brought back ${m}`:"returned empty-handed";return c.push({id:`arrival-${r.id}`,actionType:r.type,actionData:{},result:`A party has returned to ${r.destination} from their mission. They ${x}.`}),o}function vg(r,u){const{food_offered:c,start_location:o}=u.actionData;if(c>r.globalResources.food)return{tribe:r,result:{...u,result:"Not enough food."}};const f=Math.floor(c*.3*(1+r.stats.charisma*.05)),m={...r.garrisons};return m[o]||(m[o]={troops:0,weapons:0,chiefs:[]}),m[o].troops+=f,{tribe:{...r,globalResources:{...r.globalResources,food:r.globalResources.food-c},garrisons:m},result:{...u,result:`Your recruitment drive at ${o} attracted ${f} new followers to your cause.`}}}function yg(r){const{troops:u,start_location:c}=r.actionData;return{result:{...r,result:`${u} troops at ${c} assumed a defensive stance.`}}}function wg(r,u){const{techId:c,location:o,assignedTroops:f}=u.actionData,m=hs(c);if(!m)return{tribe:r,result:{...u,result:"Tech not found."}};if(r.currentResearch)return{tribe:r,result:{...u,result:"Research already in progress."}};if(r.globalResources.scrap<m.cost.scrap)return{tribe:r,result:{...u,result:`Not enough scrap. Need ${m.cost.scrap}.`}};if((r.garrisons[o]?.troops||0)<f)return{tribe:r,result:{...u,result:"Not enough troops."}};if(f<m.requiredTroops)return{tribe:r,result:{...u,result:`Needs at least ${m.requiredTroops} troops.`}};const x={techId:c,progress:0,assignedTroops:f,location:o};return{tribe:{...r,currentResearch:x,globalResources:{...r.globalResources,scrap:r.globalResources.scrap-m.cost.scrap}},result:{...u,result:`At your direction, researchers at ${x.location} assigned ${x.assignedTroops} troops to begin working on ${m.name}.`}}}function Sg(r,u){const{ration_level:c}=u.actionData;return!c||!["Hard","Normal","Generous"].includes(c)?{tribe:r,result:{...u,result:"Invalid ration level specified."}}:{tribe:{...r,rationLevel:c},result:{...u,result:`Food rations have been set to ${c}.`}}}function Ng(r,u){const{troops:c,start_location:o}=u.actionData,f=Math.floor((15+Math.random()*10)*(1+r.stats.leadership*.01));return{tribe:{...r,globalResources:{...r.globalResources,morale:Math.min(100,r.globalResources.morale+f)}},result:{...u,result:`Troops resting at ${o} feel rejuvenated, boosting tribe morale by ${f}.`}}}function Tg(r,u){const{scrap:c,start_location:o}=u.actionData;if(c>r.globalResources.scrap)return{tribe:r,result:{...u,result:"Not enough global scrap."}};const f=Math.floor(c*.4*(1+r.stats.intelligence*.02)),m=JSON.parse(JSON.stringify(r));return m.globalResources.scrap-=c,m.garrisons[o]||(m.garrisons[o]={troops:0,weapons:0,chiefs:[]}),m.garrisons[o].weapons+=f,{tribe:m,result:{...u,result:`Your weapon smiths at ${o} skillfully converted ${c} scrap into ${f} new weapons.`}}}function jg(r,u){if(!r.currentResearch)return{tribe:r,result:null};const c=r.currentResearch,o=hs(c.techId);if(!o)return{tribe:{...r,currentResearch:null},result:{id:`tech-err-${Date.now()}`,actionType:ie.Technology,actionData:{},result:"Error: Tech data not found. Research cancelled."}};const f=Math.floor(c.assignedTroops*1),m=c.progress+f;if(m>=o.researchPoints){const x={...r,completedTechs:[...r.completedTechs,c.techId],currentResearch:null},S=[];o.effects.forEach(g=>{g.type===pe.PassiveFoodGeneration?S.push(`+${g.value} Food/turn`):g.type===pe.ScavengeYieldBonus&&S.push(`+${g.value*100}% ${g.resource} Scavenging`)});const b=S.length>0?` Effects: ${S.join(", ")}.`:"";return{tribe:x,result:{id:`tech-comp-${Date.now()}`,actionType:ie.Technology,actionData:{},result:`Breakthrough! Research on ${o.name} is complete.${b}`}}}else{const x=`Research on ${o.name} continues (${m}/${o.researchPoints} points).`;return{tribe:{...r,currentResearch:{...c,progress:m}},result:{id:`tech-prog-${Date.now()}`,actionType:ie.Technology,actionData:{},result:x}}}}function Ag(r,u){let c=JSON.parse(JSON.stringify(r));const o=[],f=nl(c);f.passiveFood>0&&(c.globalResources.food+=f.passiveFood,o.push({id:`passive-food-${Date.now()}`,actionType:ie.Technology,actionData:{},result:`Generated +${f.passiveFood} food from passive effects.`})),f.passiveScrap>0&&(c.globalResources.scrap+=f.passiveScrap,o.push({id:`passive-scrap-${Date.now()}`,actionType:ie.Technology,actionData:{},result:`Generated +${f.passiveScrap} scrap from passive effects.`}));const m=new Map(u.map(b=>[ht(b.q,b.r),b])),x=10,S=25;if(c.garrisons){for(const b in c.garrisons)if(c.garrisons[b].troops>0){const w=m.get(b);if(w?.poi){let q=0,_="";w.poi.type===F.Mine?(q=x,_="Mine"):w.poi.type===F.Factory&&(q=S,_="Factory"),q>0&&(c.globalResources.scrap+=q,o.push({id:`poi-scrap-${b}-${Date.now()}`,actionType:ie.Upkeep,actionData:{},result:`Your garrison at ${b} controlling a ${_} generated +${q} scrap.`}))}}}return{tribe:c,results:o}}function Rg(r,u){let c=JSON.parse(JSON.stringify(r));const f=Object.values(c.garrisons||{}).reduce((g,w)=>g+w.troops,0)+u;if(f===0)return{tribe:c,result:null};const m={Hard:.5,Normal:1,Generous:1.5}[c.rationLevel]||1,x=Math.ceil(f*m),S=c.globalResources.food-x;c.globalResources.food=S;let b=[`Consumed ${x} food for ${f} total troops.`];if(c.rationLevel==="Hard"?(c.globalResources.morale=Math.max(0,c.globalResources.morale-2),b.push("Hard rations lowered morale by 2.")):c.rationLevel==="Generous"&&S>=0&&(c.globalResources.morale=Math.min(100,c.globalResources.morale+2),b.push("Generous rations boosted morale by 2.")),c.globalResources.food<0){const g=Math.floor(Math.min(20,Math.abs(c.globalResources.food)/2));c.globalResources.morale=Math.max(0,c.globalResources.morale-g),b.push(`Starvation! Morale dropped by an additional ${g}.`),c.globalResources.food=0}return{tribe:c,result:{id:`upkeep-${Date.now()}`,actionType:ie.Upkeep,actionData:{},result:b.join(" ")}}}function _g(r){let u=JSON.parse(JSON.stringify(r));const c=Object.fromEntries(u.tribes.map(p=>[p.id,[]]));let o=new Map(u.tribes.map(p=>[p.id,p]));const f=[];for(const p of u.diplomaticProposals)if(u.turn>=p.expiresOnTurn){const T=o.get(p.toTribeId),z=o.get(p.fromTribeId),P=p.statusChangeTo===De.Alliance?"alliance":"peace";z&&c[z.id].push({id:`diplomacy-expire-${p.id}`,actionType:ie.Technology,actionData:{},result:`Your ${P} proposal to ${T?.tribeName||"an unknown tribe"} has expired.`}),T&&c[T.id].push({id:`diplomacy-expire-${p.id}`,actionType:ie.Technology,actionData:{},result:`The ${P} proposal from ${z?.tribeName||"an unknown tribe"} has expired.`})}else f.push(p);u.diplomaticProposals=f;const m=[],x=[];u.journeys.forEach(p=>{if(p.status!=="awaiting_response"){m.push(p);return}const T=o.get(u.tribes.find(H=>H.garrisons[p.destination]&&H.id!==p.ownerTribeId)?.id||"");if(!T){const H=$a(Ye(p.destination),Ye(p.origin),u.mapData);if(H){const J=o.get(p.ownerTribeId),ee=nl(J);x.push({...p,id:`return-${p.id}`,type:tt.Return,status:"returning",origin:p.destination,destination:p.origin,path:H.path,currentLocation:H.path[0],arrivalTurn:Math.ceil(H.cost/ee.movementSpeedBonus),tradeOffer:void 0,responseDeadline:void 0})}o.has(p.ownerTribeId)&&c[p.ownerTribeId].push({id:`trade-fail-${p.id}`,actionType:ie.Trade,actionData:{},result:`The destination garrison at ${p.destination} no longer exists. Your caravan is returning.`});return}const z=T.journeyResponses.find(H=>H.journeyId===p.id)?.response;let P=null;if(z==="accept"?P="accepted":(z==="reject"||u.turn>=(p.responseDeadline??1/0))&&(P="rejected"),P){const H=o.get(p.ownerTribeId);if(!H)return;let J=p.payload,ee,U;if(P==="accepted"){const B=p.tradeOffer.request,Z=Object.values(T.garrisons).reduce((oe,de)=>oe+de.weapons,0);if(T.globalResources.food>=B.food&&T.globalResources.scrap>=B.scrap&&Z>=B.weapons){T.globalResources.food-=B.food,T.globalResources.scrap-=B.scrap;let oe=B.weapons;for(const de in T.garrisons){const se=T.garrisons[de],ge=Math.min(oe,se.weapons);if(se.weapons-=ge,oe-=ge,oe===0)break}H.globalResources.food+=p.payload.food,H.globalResources.scrap+=p.payload.scrap,H.garrisons[H.location].weapons+=p.payload.weapons,J=B,ee=`Your trade with ${T.tribeName} was accepted. The caravan is returning with the requested goods.`,U=`You accepted the trade from ${H.tribeName}.`}else P="rejected",ee=`Your trade with ${T.tribeName} was accepted, but they couldn't afford it. The caravan is returning with the original goods.`,U="You accepted the trade, but lacked the resources to fulfill it. The deal was cancelled."}ee=ee||`Your trade offer to ${T.tribeName} was rejected. Your caravan is returning.`,U=U||`You rejected the trade offer from ${H.tribeName}.`,u.turn>=(p.responseDeadline??1/0)&&!z&&(ee=`Your trade offer to ${T.tribeName} expired. Your caravan is returning.`,U=`The trade offer from ${H.tribeName} has expired.`);const le=$a(Ye(p.destination),Ye(p.origin),u.mapData);if(le){const B=nl(H);x.push({...p,id:`return-${p.id}`,type:tt.Return,status:"returning",origin:p.destination,destination:p.origin,path:le.path,currentLocation:le.path[0],arrivalTurn:Math.ceil(le.cost/B.movementSpeedBonus),payload:J,tradeOffer:void 0,responseDeadline:void 0})}c[H.id].push({id:`trade-resp-${p.id}`,actionType:ie.Trade,actionData:{},result:ee}),c[T.id].push({id:`trade-resp-${p.id}`,actionType:ie.RespondToTrade,actionData:{},result:U})}else m.push(p)}),u.journeys=[...m,...x];const S=[],b=[];u.journeys.forEach(p=>{if(p.status==="awaiting_response"){S.push(p);return}if(p.arrivalTurn>0){const{newForce:T,eventResult:z}=xg(p.force);if(z){p.force=T;const P=o.get(p.ownerTribeId);P&&c[P.id].push({id:`event-${p.id}-${u.turn}`,actionType:p.type,actionData:{location:p.currentLocation},result:`While traveling to ${p.destination}: ${z}`})}}p.arrivalTurn-=1,p.path.length>1&&(p.path.shift(),p.currentLocation=p.path[0]),p.arrivalTurn<=0?b.push(p):S.push(p)}),u.journeys=S;let g=[],w=[],q=[];b.forEach(p=>{const T=o.get(p.ownerTribeId);if(!T)return;const P=u.tribes.filter(H=>H.id!==T.id&&H.garrisons[p.destination]).find(H=>T.diplomacy[H.id]?.status===De.War);if(P&&(p.type===tt.Attack||p.type===tt.Move)){c[T.id].push({id:`combat-arrival-${p.id}`,actionType:ie.Attack,actionData:{},result:`Your force arrived at ${p.destination} and engaged the enemy tribe, ${P.tribeName}!`}),c[P.id].push({id:`combat-defend-${p.id}`,actionType:ie.Attack,actionData:{},result:`Your garrison at ${p.destination} is under attack by ${T.tribeName}!`});return}switch(p.type){case tt.Move:Object.assign(T,nc(p,T,c[T.id]));break;case tt.Return:Object.assign(T,ic(p,T,c[T.id]));break;case tt.Scavenge:const H=Rh(p,T,u,c[T.id]);Object.assign(T,H.updatedTribe),H.newReturnJourney&&g.push(H.newReturnJourney),H.poiToClear&&w.push(H.poiToClear),H.poiToReplace&&q.push(H.poiToReplace);break;case tt.Scout:const{updatedTribe:J,newReturnJourney:ee}=Ah(p,T,u,c[T.id]);Object.assign(T,J),ee&&g.push(ee);break;case tt.BuildOutpost:const{updatedTribe:U,outpostCreatedLocation:le}=jh(p,T,c[T.id]);if(Object.assign(T,U),le){const Z=u.mapData.findIndex(W=>ht(W.q,W.r)===le);Z!==-1&&!u.mapData[Z].poi&&(u.mapData[Z].poi={id:`poi-outpost-${le}`,type:F.Outpost,difficulty:1,rarity:Oi[F.Outpost]})}break;case tt.Attack:c[T.id].push({id:`arrival-${p.id}`,actionType:ie.Attack,actionData:{},result:`Attacking force arrived at ${p.destination}.`}),Object.assign(T,nc(p,T,c[T.id]));break;case tt.Trade:p.status="awaiting_response",p.responseDeadline=u.turn+2;const B=u.tribes.find(Z=>Z.garrisons[p.destination]&&Z.id!==p.ownerTribeId);B&&(c[T.id].push({id:`arrival-${p.id}`,actionType:ie.Trade,actionData:{},result:`Your trade caravan has arrived at ${B.tribeName}'s garrison and is awaiting a response.`}),c[B.id].push({id:`offer-${p.id}`,actionType:ie.RespondToTrade,actionData:{},result:`A trade caravan from ${p.tradeOffer?.fromTribeName} has arrived at ${p.destination} with an offer.`})),u.journeys.push(p);break}}),u.journeys.push(...g),w.length>0&&w.forEach(p=>{const T=u.mapData.findIndex(z=>ht(z.q,z.r)===p);T!==-1&&(u.mapData[T].poi=void 0)}),q.length>0&&q.forEach(p=>{const T=u.mapData.findIndex(z=>ht(z.q,z.r)===p.location);T!==-1&&(u.mapData[T].poi=p.newPoi)}),u.tribes.forEach(p=>{if(!p.turnSubmitted)return;const T=nl(p);p.actions.forEach(z=>{if([ie.Move,ie.Attack,ie.Scavenge,ie.BuildOutpost,ie.Trade,ie.Scout].includes(z.actionType)){const{start_location:H,chiefsToMove:J=[]}=z.actionData,ee=z.actionData.finish_location||z.actionData.target_location,U=(p.garrisons||{})[H];if(!U||!ee){c[p.id].push({...z,result:"Invalid start or destination for journey."});return}const le=$a(Ye(H),Ye(ee),u.mapData);if(!le){c[p.id].push({...z,result:`Could not find a path to ${ee}.`});return}const B=(U.chiefs||[]).filter(ge=>J.includes(ge.name)),Z={troops:z.actionData.troops||0,weapons:z.actionData.weapons||0,chiefs:B},W=Math.ceil(le.cost/T.movementSpeedBonus),oe=1,de=W<=oe&&z.actionType!==ie.Attack&&z.actionType!==ie.Trade;U.troops-=Z.troops,U.weapons-=Z.weapons,U.chiefs=(U.chiefs||[]).filter(ge=>!J.includes(ge.name));const se={id:`journey-${z.id}`,ownerTribeId:p.id,type:z.actionType,status:"en_route",origin:H,destination:ee,path:le.path,currentLocation:le.path[0],arrivalTurn:W,force:Z,payload:z.actionType===ie.Trade?{food:z.actionData.offer_food,scrap:z.actionData.offer_scrap,weapons:z.actionData.offer_weapons}:{food:0,scrap:0,weapons:0},scavengeType:z.actionType===ie.Scavenge?z.actionData.resource_type:void 0,tradeOffer:z.actionType===ie.Trade?{request:{food:z.actionData.request_food,scrap:z.actionData.request_scrap,weapons:z.actionData.request_weapons},fromTribeName:p.tribeName}:void 0};if(de){let ge=[],he=[],K=p;switch(se.type){case tt.Move:K=nc(se,p,c[p.id]);break;case tt.Scavenge:const A=Rh(se,p,u,c[p.id]);K=A.updatedTribe,A.poiToClear&&ge.push(A.poiToClear),A.poiToReplace&&he.push(A.poiToReplace),A.newReturnJourney&&A.newReturnJourney.arrivalTurn<=oe?K=ic(A.newReturnJourney,K,c[p.id]):A.newReturnJourney&&u.journeys.push(A.newReturnJourney);break;case tt.Scout:const R=Ah(se,p,u,c[p.id]);K=R.updatedTribe,R.newReturnJourney&&R.newReturnJourney.arrivalTurn<=oe?K=ic(R.newReturnJourney,K,c[p.id]):R.newReturnJourney&&u.journeys.push(R.newReturnJourney);break;case tt.BuildOutpost:const V=jh(se,p,c[p.id]);if(K=V.updatedTribe,V.outpostCreatedLocation){const te=u.mapData.findIndex(v=>ht(v.q,v.r)===V.outpostCreatedLocation);te!==-1&&!u.mapData[te].poi&&(u.mapData[te].poi={id:`poi-outpost-${V.outpostCreatedLocation}`,type:F.Outpost,difficulty:1,rarity:Oi[F.Outpost]})}break}Object.assign(p,K),ge.length>0&&ge.forEach(A=>{const R=u.mapData.findIndex(V=>ht(V.q,V.r)===A);R!==-1&&(u.mapData[R].poi=void 0)}),he.length>0&&he.forEach(A=>{const R=u.mapData.findIndex(V=>ht(V.q,V.r)===A.location);R!==-1&&(u.mapData[R].poi=A.newPoi)})}else se.arrivalTurn>1&&se.path.length>1&&(se.path.shift(),se.currentLocation=se.path[0]),u.journeys.push(se),c[p.id].push({...z,result:`You dispatched a ${z.actionType} party from ${H} towards ${ee}. They are expected to arrive in ${W} turn(s).`})}else{let H;switch(z.actionType){case ie.Recruit:H=vg(p,z);break;case ie.Rest:H=Ng(p,z);break;case ie.BuildWeapons:H=Tg(p,z);break;case ie.SetRations:H=Sg(p,z);break;case ie.Defend:H=yg(z);break;case ie.StartResearch:H=wg(p,z);break;default:H={result:{...z,result:`Action '${z.actionType}' not yet implemented.`}}}H.tribe&&Object.assign(p,H.tribe),c[p.id].push(H.result)}})}),u.tribes.forEach(p=>{if(!p.turnSubmitted)return;const T=jg(p,u.mapData);Object.assign(p,T.tribe),T.result&&c[p.id].push(T.result);const z=Ag(p,u.mapData);Object.assign(p,z.tribe),z.results.length>0&&c[p.id].push(...z.results);const H=u.journeys.filter(ee=>ee.ownerTribeId===p.id).reduce((ee,U)=>ee+U.force.troops,0),J=Rg(p,H);Object.assign(p,J.tribe),J.result&&c[p.id].push(J.result)});const _=Array.from(o.values()),C={turn:u.turn,tribeRecords:_.map(p=>({tribeId:p.id,score:Hh(p),troops:Object.values(p.garrisons||{}).reduce((T,z)=>T+z.troops,0),garrisons:Object.keys(p.garrisons||{}).length}))};return u.history||(u.history=[]),u.history.push(C),u.tribes=_.map(p=>({...p,actions:[],turnSubmitted:!1,lastTurnResults:c[p.id]||[],journeyResponses:[]})),u.turn+=1,u}const _h=["Rust","Sand","Scrap","Dust","Iron","Ash","Grave","Wasteland","Sunken","Forgotten"],Mh=["Vultures","Dogs","Rats","Goblins","Marauders","Hounds","Crows","Nomads","Claws","Kings"];function Mg(){let r=Ei;const u={charisma:Wt,intelligence:Wt,leadership:Wt,strength:Wt};r-=4*Wt;const c=Object.keys(u);for(let o=0;o<r;o++){const f=c[Math.floor(Math.random()*c.length)];u[f]++}return u}function Cg(r,u){let c="";do{const w=_h[Math.floor(Math.random()*_h.length)],q=Mh[Math.floor(Math.random()*Mh.length)];c=`${w} ${q}`}while(u.includes(c));const o=Object.keys(sa),f=o[Math.floor(Math.random()*o.length)],m=il[Math.floor(Math.random()*il.length)],x=Ye(r),S=ms(x,2),b={troops:15+Math.floor(Math.random()*11),weapons:5+Math.floor(Math.random()*6),chiefs:[]};return{id:`tribe-ai-${Date.now()}`,playerId:`ai-player-${Date.now()}`,isAI:!0,aiType:Oh.Wanderer,playerName:"AI Controller",tribeName:c,icon:f,color:m,stats:Mg(),location:r,globalResources:{...Dh,food:100+Math.floor(Math.random()*51),scrap:10+Math.floor(Math.random()*11)},garrisons:{[r]:b},actions:[],turnSubmitted:!1,lastTurnResults:[],exploredHexes:S,rationLevel:"Normal",completedTechs:[],assets:[],currentResearch:null,journeyResponses:[],diplomacy:{}}}function Eg(r,u){return[{q:1,r:0},{q:-1,r:0},{q:0,r:1},{q:0,r:-1},{q:1,r:-1},{q:-1,r:1}].map(o=>({q:r+o.q,r:u+o.r}))}function Og(r,u){const c=Object.entries(r.garrisons).sort(([,_],[,C])=>C.troops-_.troops)[0]?.[0];if(!c)return null;const o=r.garrisons[c];if(o.troops===0)return null;const{q:f,r:m}=Ye(c),x=Eg(f,m),S=new Map;u.forEach(_=>S.set(`${_.q},${_.r}`,_));const b=x.filter(_=>{const C=S.get(`${_.q},${_.r}`);return C&&C.terrain!=="Water"});if(b.length===0)return null;const g=b[Math.floor(Math.random()*b.length)],w=`${String(50+g.q).padStart(3,"0")}.${String(50+g.r).padStart(3,"0")}`;return{id:`action-ai-${Date.now()}`,actionType:ie.Move,actionData:{start_location:c,finish_location:w,troops:o.troops,weapons:o.weapons,chiefsToMove:(o.chiefs||[]).map(_=>_.name)}}}function Dg(r,u,c){if(!r.isAI)return[];const o=Og(r,c);return o?[o]:[]}const ki="radix_tribes_gamestate",Yh=40,kg=2,Ci=()=>({biases:{[ae.Plains]:1,[ae.Desert]:1,[ae.Mountains]:1,[ae.Forest]:1,[ae.Ruins]:.8,[ae.Wasteland]:1,[ae.Water]:1,[ae.Radiation]:.5,[ae.Crater]:.7,[ae.Swamp]:.9}}),zg=()=>{const r=Date.now(),u=Ci(),{map:c,startingLocations:o}=uc(Yh,r,u);return{mapData:c,tribes:[],turn:1,startingLocations:o,chiefRequests:[],assetRequests:[],journeys:[],diplomaticProposals:[],history:[],mapSeed:r,mapSettings:u}};function dc(r){try{const u=JSON.stringify(r);localStorage.setItem(ki,u)}catch(u){console.error("Failed to save game state:",u)}}function zi(r){let u=JSON.parse(JSON.stringify(r));if(u.mapData?.length&&u.mapData.forEach(c=>{if(c.poi&&typeof c.poi.type=="string"){const o={Ruins:F.Ruins,Crater:F.Crater,Radiation:F.Radiation};o[c.poi.type]&&(c.poi.type=o[c.poi.type])}}),!u.mapData||u.mapData.length===0){const c=u.mapSeed||Date.now(),o=u.mapSettings||Ci(),{map:f,startingLocations:m}=uc(Yh,c,o);u.mapData=f,u.startingLocations=m}if(!u.mapSettings?.biases)u.mapSettings=Ci();else{const c=Ci().biases;for(const o in c)u.mapSettings.biases[o]||(u.mapSettings.biases[o]=c[o])}if(u.startingLocations||(u.startingLocations=[]),u.chiefRequests||(u.chiefRequests=[]),u.assetRequests||(u.assetRequests=[]),u.journeys||(u.journeys=[]),u.diplomaticProposals||(u.diplomaticProposals=[]),u.history||(u.history=[]),u.pendingTrades&&delete u.pendingTrades,u.returningCaravans&&delete u.returningCaravans,u.tribes?.length){u.tribes=u.tribes.map(o=>{const f={...o,turnSubmitted:o.turnSubmitted??!1,actions:o.actions??[],lastTurnResults:o.lastTurnResults??[],rationLevel:o.rationLevel??"Normal",journeyResponses:o.journeyResponses??[],assets:o.assets??[],color:o.color??il[Math.floor(Math.random()*il.length)]};if(o.diplomacy){const m={};Object.entries(o.diplomacy).forEach(([x,S])=>{m[x]=typeof S=="string"?{status:S}:S}),f.diplomacy=m}else f.diplomacy={};if(o.tradeResponses&&delete f.tradeResponses,o.diplomaticResponses&&delete f.diplomaticResponses,o.resources&&!o.garrisons?(f.globalResources={food:o.resources.food,scrap:o.resources.scrap,morale:o.resources.morale},f.garrisons={[o.location]:{troops:o.resources.troops,weapons:o.resources.weapons,chiefs:[]}},delete f.resources):o.garrisons||(f.garrisons={[o.location]:{troops:0,weapons:0,chiefs:[]}}),!o.exploredHexes){const m=new Set;Object.keys(f.garrisons).forEach(x=>{const{q:S,r:b}=Ye(x);ms({q:S,r:b},kg).forEach(g=>m.add(g))}),f.exploredHexes=Array.from(m)}if(o.chiefs?.length){const m=f.garrisons[f.location];m&&(m.chiefs=[...m.chiefs||[],...o.chiefs]),delete f.chiefs}return Object.values(f.garrisons).forEach(m=>{m.chiefs||(m.chiefs=[])}),typeof f.isAI>"u"&&(f.isAI=!1,f.aiType=null),f});const c=u.tribes.map(o=>o.id);u.tribes.forEach(o=>{c.forEach(f=>{if(o.id!==f&&!o.diplomacy[f]){const m=u.tribes.find(S=>S.id===f),x=o.isAI||m?.isAI?De.War:De.Neutral;o.diplomacy[f]={status:x}}})})}return u}const fc=r=>new Promise(u=>setTimeout(()=>u(r()),Math.random()*100+50));async function Ch(){return fc(()=>{const r=localStorage.getItem(ki);if(r)return zi(JSON.parse(r));const u=zg();return dc(u),u})}const at=r=>u=>fc(()=>{const c=zi(JSON.parse(localStorage.getItem(ki))),o=r(c,u);return dc(o),o}),Bg=at((r,{newMapData:u,newStartingLocations:c})=>{const o=r.tribes.map((f,m)=>{const x=c[m]||"000.000",S=f.location,b={...f.garrisons};return b[S]&&S!==x&&(b[x]=b[S],delete b[S]),{...f,location:x,garrisons:b}});return{...r,mapData:u,startingLocations:c,tribes:o}}),qg=at((r,u)=>(r.tribes.forEach(c=>{const o=c.isAI?De.War:De.Neutral;u.diplomacy[c.id]={status:o},c.diplomacy[u.id]={status:o}}),{...r,tribes:[...r.tribes,u]})),Ug=at((r,{tribeId:u,plannedActions:c,journeyResponses:o})=>({...r,tribes:r.tribes.map(f=>f.id===u?{...f,actions:c,turnSubmitted:!0,journeyResponses:o}:f)}));async function Hg(){return fc(()=>{let r=zi(JSON.parse(localStorage.getItem(ki)));const u={...r,tribes:r.tribes.map(o=>o.isAI&&!o.turnSubmitted?{...o,actions:Dg(o,r.tribes,r.mapData),turnSubmitted:!0}:o)},c=_g(u);return dc(c),c})}const Lg=at((r,u)=>({...r,tribes:r.tribes.map(c=>c.id===u.id?u:c)})),Yg=at((r,u)=>({...r,chiefRequests:[...r.chiefRequests||[],{id:`req-${Date.now()}`,...u,status:"pending"}]})),Gg=at((r,u)=>{const c=r.chiefRequests.find(o=>o.id===u);return!c||!sl.find(o=>o.name===c.chiefName)?r:{...r,chiefRequests:r.chiefRequests.map(o=>o.id===u?{...o,status:"approved"}:o),tribes:r.tribes.map(o=>{if(o.id===c.tribeId){const f=o.garrisons[o.location];f&&f.chiefs.push(sl.find(m=>m.name===c.chiefName))}return o})}}),Vg=at((r,u)=>({...r,chiefRequests:r.chiefRequests.map(c=>c.id===u?{...c,status:"denied"}:c)})),Xg=at((r,u)=>({...r,assetRequests:[...r.assetRequests||[],{id:`asset-req-${Date.now()}`,...u,status:"pending"}]})),Qg=at((r,u)=>{const c=r.assetRequests.find(o=>o.id===u);return!c||!zh(c.assetName)?r:{...r,assetRequests:r.assetRequests.map(o=>o.id===u?{...o,status:"approved"}:o),tribes:r.tribes.map(o=>o.id===c.tribeId?{...o,assets:[...o.assets||[],c.assetName]}:o)}}),Zg=at((r,u)=>({...r,assetRequests:r.assetRequests.map(c=>c.id===u?{...c,status:"denied"}:c)})),$g=at((r,u)=>{const c=new Set(r.tribes.map(m=>m.location)),o=r.startingLocations.find(m=>!c.has(m));if(!o)return r;const f=Cg(o,r.tribes.map(m=>m.tribeName));return r.tribes.forEach(m=>{f.diplomacy[m.id]={status:De.War},m.diplomacy[f.id]={status:De.War}}),{...r,tribes:[...r.tribes,f]}}),Fg=at((r,{fromTribeId:u,toTribeId:c})=>{const o=r.tribes.find(m=>m.id===u);if(!o||r.diplomaticProposals.some(m=>m.fromTribeId===u&&m.toTribeId===c||m.fromTribeId===c&&m.toTribeId===u))return r;const f={id:`proposal-${Date.now()}`,fromTribeId:u,toTribeId:c,statusChangeTo:De.Alliance,expiresOnTurn:r.turn+3,fromTribeName:o.tribeName};return{...r,diplomaticProposals:[...r.diplomaticProposals,f]}}),Jg=at((r,{fromTribeId:u,toTribeId:c,reparations:o})=>{const f=r.tribes.find(S=>S.id===u);if(!f)return r;const m=Object.values(f.garrisons).reduce((S,b)=>S+b.weapons,0);if(f.globalResources.food<o.food||f.globalResources.scrap<o.scrap||m<o.weapons||r.diplomaticProposals.some(S=>S.fromTribeId===u&&S.toTribeId===c||S.fromTribeId===c&&S.toTribeId===u))return r;const x={id:`proposal-${Date.now()}`,fromTribeId:u,toTribeId:c,statusChangeTo:De.Neutral,expiresOnTurn:r.turn+3,fromTribeName:f.tribeName,reparations:o};return{...r,diplomaticProposals:[...r.diplomaticProposals,x]}}),Kg=at((r,u)=>{const c=r.diplomaticProposals.find(g=>g.id===u);if(!c)return r;const o=r.tribes.findIndex(g=>g.id===c.fromTribeId),f=r.tribes.findIndex(g=>g.id===c.toTribeId);if(o===-1||f===-1)return r;const m=JSON.parse(JSON.stringify(r.tribes)),x=m[o],S=m[f];let b;if(c.statusChangeTo===De.Neutral&&c.reparations){const g=c.reparations,w=Object.values(x.garrisons).reduce((_,C)=>_+C.weapons,0);if(x.globalResources.food<g.food||x.globalResources.scrap<g.scrap||w<g.weapons)return{...r,diplomaticProposals:r.diplomaticProposals.filter(_=>_.id!==u)};x.globalResources.food-=g.food,S.globalResources.food+=g.food,x.globalResources.scrap-=g.scrap,S.globalResources.scrap+=g.scrap;let q=g.weapons;for(const _ in x.garrisons){if(q<=0)break;const C=Math.min(q,x.garrisons[_].weapons);x.garrisons[_].weapons-=C,q-=C}S.garrisons[S.location].weapons+=g.weapons,b=r.turn+5}return x.diplomacy[S.id]={status:c.statusChangeTo,truceUntilTurn:b},S.diplomacy[x.id]={status:c.statusChangeTo,truceUntilTurn:b},{...r,tribes:m,diplomaticProposals:r.diplomaticProposals.filter(g=>g.id!==u)}}),Wg=at((r,u)=>({...r,diplomaticProposals:r.diplomaticProposals.filter(c=>c.id!==u)})),Pg=at((r,{fromTribeId:u,toTribeId:c})=>{const o=r.tribes.find(m=>m.id===u);if(o){const m=o.diplomacy[c];if(m?.truceUntilTurn&&m.truceUntilTurn>r.turn)return r}const f=r.tribes.map(m=>m.id===u?{...m,diplomacy:{...m.diplomacy,[c]:{status:De.War}}}:m.id===c?{...m,diplomacy:{...m.diplomacy,[u]:{status:De.War}}}:m);return{...r,tribes:f}}),Ig=at((r,u)=>({...r,tribes:[],chiefRequests:[],assetRequests:[],journeys:[],turn:1,diplomaticProposals:[],history:[]})),eb=at((r,u)=>(J0(u),{...r,tribes:r.tribes.filter(c=>c.playerId!==u)})),tb=at((r,u)=>(K0(u.users),zi(u.gameState))),ab=()=>{const[r,u]=$.useState(null),[c,o]=$.useState(null),[f,m]=$.useState("login"),[x,S]=$.useState(!0);$.useEffect(()=>{const R=Uh();R&&u(R),Ch().then(V=>{o(V),S(!1)})},[]);const b=$.useMemo(()=>{if(!(!r||!c))return c.tribes.find(R=>R.playerId===r.id)},[r,c]);$.useEffect(()=>{x||!r||!c||f==="create_tribe"&&b&&m("game")},[c,b,r,f,x]),$.useEffect(()=>{if(!b||!c)return;let R;return b.turnSubmitted===!0&&(R=window.setInterval(async()=>{const te=await Ch();te.turn>c.turn&&o(te)},8e3)),()=>{R&&clearInterval(R)}},[b?.turnSubmitted,c?.turn]);const g=R=>{u(R),c?.tribes.find(te=>te.playerId===R.id)?m("game"):R.role!=="admin"?m("create_tribe"):m("game")},w=R=>{g(R)},q=()=>{Q0(),u(null),m("login")},_=async R=>{if(!r||!c)return;const V=new Set(c.tribes.map(ne=>ne.location)),te=c.startingLocations.find(ne=>!V.has(ne));if(!te){alert("The admin has not set any available starting locations for new players. Please contact the administrator.");return}const v=Ye(te),O=ms(v,2),Q={...R,id:`tribe-${Date.now()}`,playerId:r.id,location:te,globalResources:Dh,garrisons:{[te]:{...h0,chiefs:[]}},actions:[],turnSubmitted:!1,lastTurnResults:[],exploredHexes:O,rationLevel:"Normal",completedTechs:[],assets:[],currentResearch:null,journeyResponses:[],diplomacy:{}},I=await qg(Q);o(I)},C=async(R,V,te)=>{const v=await Ug({tribeId:R,plannedActions:V,journeyResponses:te});o(v)},p=async R=>{const V=await Lg(R);o(V)},T=async()=>{const R=await Hg();o(R)},z=async(R,V)=>{const te=await Bg({newMapData:R,newStartingLocations:V});o(te),m("admin")},P=async R=>{const V=await eb(R);o(V)},H=async()=>{const R=await Ig();o(R),alert("New game started! All tribes and requests have been removed and the turn has been reset to 1.")},J=async R=>{const V=await tb(R);if(r){const te=R.users.find(v=>v.id===r.id);te?(W0(te),u(te)):(alert("Game state loaded, but your user account was not in the backup. Logging you out."),q())}o(V),alert("Game state and all users loaded successfully!")},ee=(R,V,te)=>Yg({tribeId:R,chiefName:V,radixAddressSnippet:te}).then(o),U=R=>Gg(R).then(o),le=R=>Vg(R).then(o),B=(R,V,te)=>Xg({tribeId:R,assetName:V,radixAddressSnippet:te}).then(o),Z=R=>Qg(R).then(o),W=R=>Zg(R).then(o),oe=()=>$g().then(o),de=(R,V)=>Fg({fromTribeId:R,toTribeId:V}).then(o),se=(R,V,te)=>Jg({fromTribeId:R,toTribeId:V,reparations:te}).then(o),ge=R=>Kg(R).then(o),he=R=>Wg(R).then(o),K=(R,V)=>Pg({fromTribeId:R,toTribeId:V}).then(o),A=()=>{if(x||!c)return l.jsx(Th,{message:"Loading Wasteland..."});switch(f){case"login":return l.jsx(P0,{onLoginSuccess:g,onSwitchToRegister:()=>m("register"),onNavigateToForgotPassword:()=>m("forgot_password")});case"register":return l.jsx(I0,{onRegisterSuccess:w,onSwitchToLogin:()=>m("login")});case"forgot_password":return l.jsx(fg,{onSuccess:()=>m("login"),onCancel:()=>m("login")});case"create_tribe":return r?l.jsx(b0,{onTribeCreate:_,user:r}):(m("login"),null);case"transition":return l.jsx(Th,{message:"Synchronizing World..."});case"admin":return!r||r.role!=="admin"?(m("login"),null):l.jsx(eg,{gameState:c,onBack:()=>m("game"),onNavigateToEditor:()=>m("map_editor"),onProcessTurn:T,onRemovePlayer:P,onStartNewGame:H,onLoadBackup:J,onApproveChief:U,onDenyChief:le,onApproveAsset:Z,onDenyAsset:W,onAddAITribe:oe});case"map_editor":return!r||r.role!=="admin"?(m("login"),null):l.jsx(dg,{initialMapData:c.mapData,initialMapSettings:c.mapSettings,initialMapSeed:c.mapSeed,initialStartLocations:c.startingLocations,onSave:z,onCancel:()=>m("admin")});case"leaderboard":return r?l.jsx(pg,{gameState:c,playerTribe:b,onBack:()=>m("game")}):(m("login"),null);case"game":default:return r?!b&&r.role!=="admin"?(m("create_tribe"),null):l.jsx(G0,{currentUser:r,playerTribe:b,allTribes:c.tribes,turn:c.turn,mapData:c.mapData,startingLocations:c.startingLocations,allChiefRequests:c.chiefRequests||[],allAssetRequests:c.assetRequests||[],journeys:c.journeys||[],diplomaticProposals:c.diplomaticProposals||[],onFinalizeTurn:(R,V)=>b&&C(b.id,R,V),onRequestChief:(R,V)=>b&&ee(b.id,R,V),onRequestAsset:(R,V)=>b&&B(b.id,R,V),onUpdateTribe:p,onLogout:q,onNavigateToAdmin:()=>m("admin"),onNavigateToLeaderboard:()=>m("leaderboard"),onProposeAlliance:R=>b&&de(b.id,R),onSueForPeace:(R,V)=>b&&se(b.id,R,V),onDeclareWar:R=>b&&K(b.id,R),onAcceptProposal:ge,onRejectProposal:he}):(m("login"),null)}};return l.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-200 p-0 sm:p-0 lg:p-0",children:l.jsx("div",{className:"max-w-full",children:A()})})},Gh=document.getElementById("root");if(!Gh)throw new Error("Could not find root element to mount to");const sb=f0.createRoot(Gh);sb.render(l.jsx(At.StrictMode,{children:l.jsx(ab,{})}));
